import{j as e,r as d,L as y}from"./main-BaJar6w-.js";import{C as j,u as v,o as N,P as w,D as k,a as C,S}from"./CardAutocomplete-C0OcS9HO.js";const T=({name:t})=>e.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card px-4 py-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/20 text-sm font-bold text-primary",children:t.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t}),e.jsx("p",{className:"text-xs text-success",children:"Online"})]})]}),_=({text:t,sender:n})=>{const l=n==="own";return e.jsx("div",{className:`flex ${l?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 text-sm ${l?"rounded-br-md bg-primary text-primary-foreground":"rounded-bl-md bg-secondary text-foreground"}`,children:t})})},P=({text:t})=>e.jsx("div",{className:"flex justify-center px-4",children:e.jsx("p",{className:"rounded-full bg-secondary/60 px-4 py-1.5 text-center text-xs text-muted-foreground",children:t})}),I=({card:t,onRemove:n})=>e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-border bg-secondary/50 px-3 py-2",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-10 w-7 rounded object-cover"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-foreground truncate",children:t.name}),e.jsxs("p",{className:"text-[10px] text-muted-foreground truncate",children:[t.setName,t.marketPrice!=null&&` · $${t.marketPrice.toFixed(2)}`]})]}),e.jsx("button",{type:"button",onClick:()=>n(t.externalId),className:"shrink-0 text-muted-foreground hover:text-foreground transition-colors","aria-label":`Remove ${t.name}`,children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),D=[{value:"pokemon",label:"Pokemon"},{value:"mtg",label:"MTG"},{value:"yugioh",label:"Yu-Gi-Oh!"}],M=[{value:"wtt",label:"Trade"},{value:"wtb",label:"Buy"},{value:"wts",label:"Sell"}],O=({selectedCards:t,tcg:n,listingType:l,onTcgChange:i,onListingTypeChange:c,onAddCard:p,onRemoveCard:x,onSubmit:h,onBack:u})=>{const[f,g]=d.useState("");return e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card px-4 py-3",children:[e.jsx("button",{type:"button",onClick:u,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Go back",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Build Your Offer"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"TCG"}),e.jsx("div",{className:"flex gap-2",children:D.map(s=>e.jsx("button",{type:"button",onClick:()=>i(s.value),className:`flex-1 rounded-lg border px-3 py-2 text-xs font-medium transition-colors ${n===s.value?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-foreground hover:bg-accent"}`,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"I want to..."}),e.jsx("div",{className:"flex gap-2",children:M.map(s=>e.jsx("button",{type:"button",onClick:()=>c(s.value),className:`flex-1 rounded-lg border px-3 py-2 text-xs font-medium transition-colors ${l===s.value?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-foreground hover:bg-accent"}`,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Search cards to add"}),e.jsx(j,{tcg:n,onSelect:p,selectedCard:null,onClear:()=>{}})]}),t.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:["Your cards (",t.length,")"]}),e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsx(I,{card:s,onRemove:x},s.externalId))})]}),(l==="wts"||l==="wtb")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:[l==="wts"?"Asking Price":"Budget"," ",e.jsx("span",{className:"text-muted-foreground/60",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:f,onChange:s=>g(s.target.value),placeholder:"0.00",className:"w-full rounded-lg border border-input bg-background pl-7 pr-4 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]})]})]}),e.jsx("div",{className:"border-t border-border bg-card p-4",children:e.jsx("button",{type:"button",onClick:h,disabled:t.length===0,className:"w-full rounded-xl bg-primary py-3 text-sm font-semibold text-primary-foreground transition-opacity hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Offer"})})]})},B=({selectedCards:t,listingType:n,onSuccess:l,onBack:i})=>{const[c,p]=d.useState(""),[x,h]=d.useState(""),[u,f]=d.useState(""),[g,s]=d.useState(""),a=t[0],m=v(N.preRegistration.create.mutationOptions()),r=o=>{o.preventDefault(),a&&m.mutate({email:c,display_name:x||null,tcg:a.tcg,card_name:a.name,card_set:a.setName??null,card_external_id:a.externalId??null,card_image_url:a.imageUrl??null,listing_type:n,asking_price:null,city:u||null,zip_code:g||null},{onSuccess:b=>{l(b.position,c)}})};return e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card px-4 py-3",children:[e.jsx("button",{type:"button",onClick:i,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Go back",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Complete Registration"})]}),e.jsxs("form",{onSubmit:r,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email to save your offer and get notified when TCG Trade Hub launches."}),a&&e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-secondary/50 p-3",children:[e.jsx("img",{src:a.imageUrl,alt:a.name,className:"h-14 w-10 rounded object-cover"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.setName}),t.length>1&&e.jsxs("p",{className:"text-xs text-primary",children:["+",t.length-1," more"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"demo-email",className:"block text-xs font-medium text-foreground mb-1.5",children:["Email ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("input",{id:"demo-email",type:"email",required:!0,value:c,onChange:o=>p(o.target.value),placeholder:"you@example.com",className:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"demo-name",className:"block text-xs font-medium text-foreground mb-1.5",children:["Display Name ",e.jsx("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),e.jsx("input",{id:"demo-name",type:"text",value:x,onChange:o=>h(o.target.value),placeholder:"TraderJoe",className:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"demo-city",className:"block text-xs font-medium text-foreground mb-1.5",children:"City"}),e.jsx("input",{id:"demo-city",type:"text",value:u,onChange:o=>f(o.target.value),placeholder:"San Francisco",className:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"demo-zip",className:"block text-xs font-medium text-foreground mb-1.5",children:"Zip Code"}),e.jsx("input",{id:"demo-zip",type:"text",value:g,onChange:o=>s(o.target.value),placeholder:"94102",className:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]})]}),m.isError&&e.jsx("div",{className:"rounded-lg bg-destructive/10 p-3 text-xs text-destructive",children:m.error.message||"Something went wrong. Please try again."}),e.jsx("button",{type:"submit",disabled:m.isPending||!c,className:"w-full rounded-xl bg-primary py-3 text-sm font-semibold text-primary-foreground transition-opacity hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:m.isPending?"Registering...":"Get Early Access"}),e.jsx("p",{className:"text-center text-[10px] text-muted-foreground",children:"No spam, ever. We'll only email when we launch in your area."})]})]})},E=[{id:"1",type:"system",sender:"system",text:"You matched with TraderMike on a Charizard listing"},{id:"2",type:"text",sender:"other",text:"Hey! I saw your listing. I have a Charizard ex from 151 - would you trade?"},{id:"3",type:"text",sender:"other",text:"Here's what I'm thinking:"},{id:"4",type:"card_offer",sender:"other"},{id:"5",type:"text",sender:"other",text:"Let me know what you think!"},{id:"6",type:"meetup_proposal",sender:"other"},{id:"7",type:"system",sender:"system",text:"Tap the trade offer above to respond with your cards"}],R=()=>{const[t,n]=d.useState("chat"),[l,i]=d.useState([]),[c,p]=d.useState("pokemon"),[x,h]=d.useState("wtt"),[u,f]=d.useState(null),g=r=>{i(o=>o.some(b=>b.externalId===r.externalId)?o:[...o,r])},s=r=>{i(o=>o.filter(b=>b.externalId!==r))},a=r=>{p(r),i([])},m=()=>{n("chat"),i([]),p("pokemon"),h("wtt"),f(null)};return e.jsxs(w,{children:[t==="chat"&&e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(T,{name:"TraderMike"}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:E.map(r=>r.type==="system"?e.jsx(P,{text:r.text},r.id):r.type==="text"?e.jsx(_,{text:r.text,sender:"other"},r.id):r.type==="card_offer"?e.jsx(k,{onCounterOffer:()=>n("trade-editor")},r.id):r.type==="meetup_proposal"?e.jsx(C,{},r.id):null)})]}),t==="trade-editor"&&e.jsx(O,{selectedCards:l,tcg:c,listingType:x,onTcgChange:a,onListingTypeChange:h,onAddCard:g,onRemoveCard:s,onSubmit:()=>n("email"),onBack:()=>n("chat")}),t==="email"&&e.jsx(B,{selectedCards:l,listingType:x,onSuccess:(r,o)=>{f({position:r,email:o}),n("success")},onBack:()=>n("trade-editor")}),t==="success"&&u&&e.jsx("div",{className:"flex flex-1 items-center overflow-y-auto",children:e.jsx(S,{position:u.position,email:u.email,onReset:m})})]})};function $(){return e.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center px-4 py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(y,{to:"/",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"← Back to home"})}),e.jsx(R,{})]})}export{$ as component};
