{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":45,"index":195}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  /**\n   * Hook that calls the complete-meetup edge function.\n   *\n   * Marks the current user's side as completed. When both users have\n   * completed, the response indicates `both_completed: true` which\n   * triggers the rating prompt via the onBothCompleted callback.\n   */\n  var useCompleteMeetup = onBothCompleted => {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var meetupId = _ref.meetupId;\n          var _yield$supabase$funct = yield _libSupabase.supabase.functions.invoke('complete-meetup', {\n              body: {\n                meetup_id: meetupId\n              }\n            }),\n            data = _yield$supabase$funct.data,\n            error = _yield$supabase$funct.error;\n          if (error) throw error;\n          if (!data) throw new Error('No response from complete-meetup');\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: data => {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.detail(data.meetup_id)\n        });\n        if (data.both_completed && onBothCompleted) {\n          onBothCompleted(data.meetup_id);\n        }\n      },\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to complete meetup');\n      }\n    });\n  };\n  _s(useCompleteMeetup, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  var _default = useCompleteMeetup;\n});","lineCount":74,"map":[[13,2,51,0,"Object"],[13,8,51,0],[13,9,51,0,"defineProperty"],[13,23,51,0],[13,24,51,0,"exports"],[13,31,51,0],[14,4,51,0,"enumerable"],[14,14,51,0],[15,4,51,0,"get"],[15,7,51,0],[15,18,51,0,"get"],[15,19,51,0],[16,6,51,0],[16,13,51,0,"_default"],[16,21,51,0],[17,4,51,0],[18,2,51,0],[19,2,51,33],[19,6,51,33,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,51,33],[19,45,51,33,"require"],[19,52,51,33],[19,53,51,33,"_dependencyMap"],[19,67,51,33],[20,2,51,33],[20,6,51,33,"_asyncToGenerator"],[20,23,51,33],[20,26,51,33,"_interopDefault"],[20,41,51,33],[20,42,51,33,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,51,33],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_queryKeys"],[24,16,4,0],[24,19,4,0,"require"],[24,26,4,0],[24,27,4,0,"_dependencyMap"],[24,41,4,0],[25,2,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,2,22,0],[32,6,22,6,"useCompleteMeetup"],[32,23,22,23],[32,26,22,27,"onBothCompleted"],[32,41,22,71],[32,45,22,76],[33,4,22,76,"_s"],[33,6,22,76],[34,4,23,2],[34,8,23,8,"queryClient"],[34,19,23,19],[34,22,23,22],[34,26,23,22,"useQueryClient"],[34,45,23,36],[34,46,23,36,"useQueryClient"],[34,60,23,36],[34,62,23,37],[34,63,23,38],[35,4,25,2],[35,11,25,9],[35,15,25,9,"useMutation"],[35,34,25,20],[35,35,25,20,"useMutation"],[35,46,25,20],[35,48,25,21],[36,6,26,4,"mutationFn"],[36,16,26,14],[37,8,26,14],[37,12,26,14,"_ref2"],[37,17,26,14],[37,24,26,14,"_asyncToGenerator"],[37,41,26,14],[37,42,26,14,"default"],[37,49,26,14],[37,51,26,16],[37,62,26,16,"_ref"],[37,66,26,16],[37,68,26,62],[38,10,26,62],[38,14,26,25,"meetupId"],[38,22,26,33],[38,25,26,33,"_ref"],[38,29,26,33],[38,30,26,25,"meetupId"],[38,38,26,33],[39,10,27,6],[39,14,27,6,"_yield$supabase$funct"],[39,35,27,6],[39,44,27,36,"supabase"],[39,56,27,44],[39,57,27,44,"supabase"],[39,65,27,44],[39,66,27,45,"functions"],[39,75,27,54],[39,76,27,55,"invoke"],[39,82,27,61],[39,83,28,8],[39,100,28,25],[39,102,29,8],[40,14,29,10,"body"],[40,18,29,14],[40,20,29,16],[41,16,29,18,"meetup_id"],[41,25,29,27],[41,27,29,29,"meetupId"],[42,14,29,38],[43,12,29,40],[43,13,30,6],[43,14,30,7],[44,12,27,14,"data"],[44,16,27,18],[44,19,27,18,"_yield$supabase$funct"],[44,40,27,18],[44,41,27,14,"data"],[44,45,27,18],[45,12,27,20,"error"],[45,17,27,25],[45,20,27,25,"_yield$supabase$funct"],[45,41,27,25],[45,42,27,20,"error"],[45,47,27,25],[46,10,32,6],[46,14,32,10,"error"],[46,19,32,15],[46,21,32,17],[46,27,32,23,"error"],[46,32,32,28],[47,10,33,6],[47,14,33,10],[47,15,33,11,"data"],[47,19,33,15],[47,21,33,17],[47,27,33,23],[47,31,33,27,"Error"],[47,36,33,32],[47,37,33,33],[47,71,33,67],[47,72,33,68],[48,10,35,6],[48,17,35,13,"data"],[48,21,35,17],[49,8,36,4],[49,9,36,5],[50,8,36,5],[50,24,26,4,"mutationFn"],[50,34,26,14,"mutationFn"],[50,35,26,14,"_x"],[50,37,26,14],[51,10,26,14],[51,17,26,14,"_ref2"],[51,22,26,14],[51,23,26,14,"apply"],[51,28,26,14],[51,35,26,14,"arguments"],[51,44,26,14],[52,8,26,14],[53,6,26,14],[53,9,36,5],[54,6,37,4,"onSuccess"],[54,15,37,13],[54,17,37,16,"data"],[54,21,37,20],[54,25,37,25],[55,8,38,6,"queryClient"],[55,19,38,17],[55,20,38,18,"invalidateQueries"],[55,37,38,35],[55,38,38,36],[56,10,38,38,"queryKey"],[56,18,38,46],[56,20,38,48,"meetupKeys"],[56,30,38,58],[56,31,38,58,"meetupKeys"],[56,41,38,58],[56,42,38,59,"all"],[57,8,38,63],[57,9,38,64],[57,10,38,65],[58,8,39,6,"queryClient"],[58,19,39,17],[58,20,39,18,"invalidateQueries"],[58,37,39,35],[58,38,39,36],[59,10,39,38,"queryKey"],[59,18,39,46],[59,20,39,48,"meetupKeys"],[59,30,39,58],[59,31,39,58,"meetupKeys"],[59,41,39,58],[59,42,39,59,"detail"],[59,48,39,65],[59,49,39,66,"data"],[59,53,39,70],[59,54,39,71,"meetup_id"],[59,63,39,80],[60,8,39,82],[60,9,39,83],[60,10,39,84],[61,8,41,6],[61,12,41,10,"data"],[61,16,41,14],[61,17,41,15,"both_completed"],[61,31,41,29],[61,35,41,33,"onBothCompleted"],[61,50,41,48],[61,52,41,50],[62,10,42,8,"onBothCompleted"],[62,25,42,23],[62,26,42,24,"data"],[62,30,42,28],[62,31,42,29,"meetup_id"],[62,40,42,38],[62,41,42,39],[63,8,43,6],[64,6,44,4],[64,7,44,5],[65,6,45,4,"onError"],[65,13,45,11],[65,15,45,14,"error"],[65,20,45,26],[65,24,45,31],[66,8,46,6,"Alert"],[66,20,46,11],[66,21,46,11,"Alert"],[66,26,46,11],[66,27,46,12,"alert"],[66,32,46,17],[66,33,46,18],[66,40,46,25],[66,42,46,27,"error"],[66,47,46,32],[66,48,46,33,"message"],[66,55,46,40],[66,59,46,44],[66,86,46,71],[66,87,46,72],[67,6,47,4],[68,4,48,2],[68,5,48,3],[68,6,48,4],[69,2,49,0],[69,3,49,1],[70,2,49,2,"_s"],[70,4,49,2],[70,5,22,6,"useCompleteMeetup"],[70,22,22,23],[71,4,22,23],[71,12,23,22,"useQueryClient"],[71,31,23,36],[71,32,23,36,"useQueryClient"],[71,46,23,36],[71,48,25,9,"useMutation"],[71,67,25,20],[71,68,25,20,"useMutation"],[71,79,25,20],[72,2,25,20],[73,2,51,0],[73,6,51,0,"_default"],[73,14,51,0],[73,17,51,15,"useCompleteMeetup"],[73,34,51,32],[74,0,51,33],[74,3]],"functionMap":{"names":["<global>","useCompleteMeetup","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;0BCqB;gBCI;KDU;eEC;KFO;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}