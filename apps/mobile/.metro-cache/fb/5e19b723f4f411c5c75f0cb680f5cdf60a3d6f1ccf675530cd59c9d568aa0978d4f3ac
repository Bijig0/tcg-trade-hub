{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":43,"index":136}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _queryKeys = require(_dependencyMap[3]);\n  /**\n   * Fetches the other user's last-read message ID for a conversation.\n   * Returns null if no read receipt row exists yet.\n   */\n  var useOtherUserReadReceipt = (conversationId, otherUserId) => {\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.chatKeys.readReceipt(conversationId),\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('conversation_reads').select('last_read_message_id').eq('conversation_id', conversationId).eq('user_id', otherUserId).maybeSingle(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return data?.last_read_message_id ?? null;\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      enabled: !!conversationId && !!otherUserId\n    });\n  };\n  var _default = useOtherUserReadReceipt;\n});","lineCount":46,"map":[[12,2,27,0,"Object"],[12,8,27,0],[12,9,27,0,"defineProperty"],[12,23,27,0],[12,24,27,0,"exports"],[12,31,27,0],[13,4,27,0,"enumerable"],[13,14,27,0],[14,4,27,0,"get"],[14,7,27,0],[14,18,27,0,"get"],[14,19,27,0],[15,6,27,0],[15,13,27,0,"_default"],[15,21,27,0],[16,4,27,0],[17,2,27,0],[18,2,27,39],[18,6,27,39,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,27,39],[18,45,27,39,"require"],[18,52,27,39],[18,53,27,39,"_dependencyMap"],[18,67,27,39],[19,2,27,39],[19,6,27,39,"_asyncToGenerator"],[19,23,27,39],[19,26,27,39,"_interopDefault"],[19,41,27,39],[19,42,27,39,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,27,39],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_queryKeys"],[22,16,3,0],[22,19,3,0,"require"],[22,26,3,0],[22,27,3,0,"_dependencyMap"],[22,41,3,0],[23,2,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,2,9,0],[27,6,9,6,"useOtherUserReadReceipt"],[27,29,9,29],[27,32,9,32,"useOtherUserReadReceipt"],[27,33,9,33,"conversationId"],[27,47,9,55],[27,49,9,57,"otherUserId"],[27,60,9,76],[27,65,9,81],[28,4,10,2],[28,11,10,9],[28,15,10,9,"useQuery"],[28,34,10,17],[28,35,10,17,"useQuery"],[28,43,10,17],[28,45,10,18],[29,6,11,4,"queryKey"],[29,14,11,12],[29,16,11,14,"chatKeys"],[29,26,11,22],[29,27,11,22,"chatKeys"],[29,35,11,22],[29,36,11,23,"readReceipt"],[29,47,11,34],[29,48,11,35,"conversationId"],[29,62,11,49],[29,63,11,50],[30,6,12,4,"queryFn"],[30,13,12,11],[31,8,12,11],[31,12,12,11,"_ref"],[31,16,12,11],[31,23,12,11,"_asyncToGenerator"],[31,40,12,11],[31,41,12,11,"default"],[31,48,12,11],[31,50,12,13],[31,63,12,25],[32,10,13,6],[32,14,13,6,"_yield$supabase$from$"],[32,35,13,6],[32,44,13,36,"supabase"],[32,56,13,44],[32,57,13,44,"supabase"],[32,65,13,44],[32,66,14,9,"from"],[32,70,14,13],[32,71,14,14],[32,91,14,34],[32,92,14,35],[32,93,15,9,"select"],[32,99,15,15],[32,100,15,16],[32,122,15,38],[32,123,15,39],[32,124,16,9,"eq"],[32,126,16,11],[32,127,16,12],[32,144,16,29],[32,146,16,31,"conversationId"],[32,160,16,45],[32,161,16,46],[32,162,17,9,"eq"],[32,164,17,11],[32,165,17,12],[32,174,17,21],[32,176,17,23,"otherUserId"],[32,187,17,34],[32,188,17,35],[32,189,18,9,"maybeSingle"],[32,200,18,20],[32,201,18,21],[32,202,18,22],[33,12,13,14,"data"],[33,16,13,18],[33,19,13,18,"_yield$supabase$from$"],[33,40,13,18],[33,41,13,14,"data"],[33,45,13,18],[34,12,13,20,"error"],[34,17,13,25],[34,20,13,25,"_yield$supabase$from$"],[34,41,13,25],[34,42,13,20,"error"],[34,47,13,25],[35,10,20,6],[35,14,20,10,"error"],[35,19,20,15],[35,21,20,17],[35,27,20,23,"error"],[35,32,20,28],[36,10,21,6],[36,17,21,13,"data"],[36,21,21,17],[36,23,21,19,"last_read_message_id"],[36,43,21,39],[36,47,21,43],[36,51,21,47],[37,8,22,4],[37,9,22,5],[38,8,22,5],[38,24,12,4,"queryFn"],[38,31,12,11,"queryFn"],[38,32,12,11],[39,10,12,11],[39,17,12,11,"_ref"],[39,21,12,11],[39,22,12,11,"apply"],[39,27,12,11],[39,34,12,11,"arguments"],[39,43,12,11],[40,8,12,11],[41,6,12,11],[41,9,22,5],[42,6,23,4,"enabled"],[42,13,23,11],[42,15,23,13],[42,16,23,14],[42,17,23,15,"conversationId"],[42,31,23,29],[42,35,23,33],[42,36,23,34],[42,37,23,35,"otherUserId"],[43,4,24,2],[43,5,24,3],[43,6,24,4],[44,2,25,0],[44,3,25,1],[45,2,27,0],[45,6,27,0,"_default"],[45,14,27,0],[45,17,27,15,"useOtherUserReadReceipt"],[45,40,27,38],[46,0,27,39],[46,3]],"functionMap":{"names":["<global>","useOtherUserReadReceipt","useQuery$argument_0.queryFn"],"mappings":"AAA;gCCQ;aCG;KDU;CDG"},"hasCjsExports":false},"type":"js/module"}]}