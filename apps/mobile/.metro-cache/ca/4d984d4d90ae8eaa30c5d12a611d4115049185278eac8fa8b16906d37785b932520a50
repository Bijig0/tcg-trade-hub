{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":49,"index":142}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":143},"end":{"line":4,"column":43,"index":186}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"fetchConversations\", {\n    enumerable: true,\n    get: function () {\n      return fetchConversations;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _contextAuthProvider = require(_dependencyMap[3]);\n  var _queryKeys = require(_dependencyMap[4]);\n  /**\n   * Fetches all conversations for a given user, sorted by most recent message.\n   *\n   * Batch-fetches profiles, last messages, and unread counts in bulk queries\n   * instead of N+1 loops. Filters out conversations with blocked users.\n   */\n  var fetchConversations = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (userId) {\n      // 1. Get conversations with match data, listing info, and negotiation status\n      var _yield$supabase$from$ = yield _libSupabase.supabase.from('conversations').select(`\n      id,\n      match_id,\n      negotiation_status,\n      matches!inner (\n        id,\n        user_a_id,\n        user_b_id,\n        listing_id,\n        listings!inner (\n          id,\n          title,\n          type,\n          tcg,\n          listing_items (\n            card_image_url\n          )\n        )\n      )\n    `).or(`user_a_id.eq.${userId},user_b_id.eq.${userId}`, {\n          referencedTable: 'matches'\n        }),\n        conversations = _yield$supabase$from$.data,\n        error = _yield$supabase$from$.error;\n      if (error) throw error;\n      if (!conversations || conversations.length === 0) return [];\n\n      // 2. Collect other user IDs and conversation IDs\n      var otherUserIds = [];\n      var convIds = [];\n      for (var conv of conversations) {\n        var match = conv.matches;\n        var otherId = match.user_a_id === userId ? match.user_b_id : match.user_a_id;\n        otherUserIds.push(otherId);\n        convIds.push(conv.id);\n      }\n\n      // 3. Fetch blocked user IDs (both directions)\n      var _yield$supabase$from$2 = yield _libSupabase.supabase.from('blocks').select('blocked_id').eq('blocker_id', userId),\n        blocksAsBlocker = _yield$supabase$from$2.data;\n      var _yield$supabase$from$3 = yield _libSupabase.supabase.from('blocks').select('blocker_id').eq('blocked_id', userId),\n        blocksAsBlocked = _yield$supabase$from$3.data;\n      var blockedIds = new Set([...(blocksAsBlocker ?? []).map(b => b.blocked_id), ...(blocksAsBlocked ?? []).map(b => b.blocker_id)]);\n\n      // 4. Batch fetch profiles for all other users\n      var uniqueOtherIds = [...new Set(otherUserIds)];\n      var _yield$supabase$from$4 = yield _libSupabase.supabase.from('users').select('id, display_name, avatar_url, rating_score').in('id', uniqueOtherIds),\n        profiles = _yield$supabase$from$4.data;\n      var profileMap = new Map((profiles ?? []).map(p => [p.id, p]));\n\n      // 5. Batch fetch last messages â€” one query, most recent per conversation\n      var _yield$supabase$from$5 = yield _libSupabase.supabase.from('messages').select('conversation_id, body, type, created_at').in('conversation_id', convIds).order('created_at', {\n          ascending: false\n        }),\n        recentMessages = _yield$supabase$from$5.data;\n\n      // Deduplicate to most recent per conversation\n      var lastMessageMap = new Map();\n      for (var msg of recentMessages ?? []) {\n        if (!lastMessageMap.has(msg.conversation_id)) {\n          lastMessageMap.set(msg.conversation_id, {\n            body: msg.body,\n            type: msg.type,\n            created_at: msg.created_at\n          });\n        }\n      }\n\n      // 6. Get real unread counts via RPC\n      var _yield$supabase$rpc = yield _libSupabase.supabase.rpc('get_unread_counts', {\n          p_user_id: userId\n        }),\n        unreadData = _yield$supabase$rpc.data;\n      var unreadMap = new Map((unreadData ?? []).map(r => [r.conversation_id, r.unread_count]));\n\n      // 6b. Bulk-fetch nicknames for current user\n      var _yield$supabase$from$6 = yield _libSupabase.supabase.from('conversation_nicknames').select('conversation_id, nickname').eq('user_id', userId).in('conversation_id', convIds),\n        nicknameData = _yield$supabase$from$6.data;\n      var nicknameMap = new Map((nicknameData ?? []).map(n => [n.conversation_id, n.nickname]));\n\n      // 7. Build results, filtering blocked users\n      var results = [];\n      for (var _conv of conversations) {\n        var _match = _conv.matches;\n        var _otherId = _match.user_a_id === userId ? _match.user_b_id : _match.user_a_id;\n\n        // Filter blocked users\n        if (blockedIds.has(_otherId)) continue;\n        var profile = profileMap.get(_otherId);\n        var lastMsg = lastMessageMap.get(_conv.id);\n\n        // Get first 2 card thumbnails from listing items\n        var listingThumbnails = (_match.listings.listing_items ?? []).slice(0, 2).map(li => li.card_image_url);\n        results.push({\n          conversationId: _conv.id,\n          matchId: _match.id,\n          otherUser: {\n            id: profile?.id ?? _otherId,\n            name: profile?.display_name ?? 'Unknown',\n            avatar: profile?.avatar_url ?? null,\n            rating: profile?.rating_score ?? 0\n          },\n          lastMessage: lastMsg ? {\n            body: lastMsg.body,\n            type: lastMsg.type,\n            createdAt: lastMsg.created_at\n          } : null,\n          unreadCount: unreadMap.get(_conv.id) ?? 0,\n          negotiationStatus: _conv.negotiation_status,\n          listingTitle: _match.listings.title,\n          listingThumbnails,\n          nickname: nicknameMap.get(_conv.id) ?? null\n        });\n      }\n\n      // Sort by last message date descending (newest first)\n      results.sort((a, b) => {\n        var dateA = a.lastMessage?.createdAt ?? '';\n        var dateB = b.lastMessage?.createdAt ?? '';\n        return dateB.localeCompare(dateA);\n      });\n      return results;\n    });\n    return function fetchConversations(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\n   * Hook that fetches all conversations for the current user.\n   */\n  var useConversations = () => {\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.chatKeys.conversations(),\n      queryFn: () => fetchConversations(user.id),\n      enabled: !!user\n    });\n  };\n  var _default = useConversations;\n});","lineCount":180,"map":[[12,2,243,0,"Object"],[12,8,243,0],[12,9,243,0,"defineProperty"],[12,23,243,0],[12,24,243,0,"exports"],[12,31,243,0],[13,4,243,0,"enumerable"],[13,14,243,0],[14,4,243,0,"get"],[14,7,243,0],[14,18,243,0,"get"],[14,19,243,0],[15,6,243,0],[15,13,243,0,"_default"],[15,21,243,0],[16,4,243,0],[17,2,243,0],[18,2,34,0,"Object"],[18,8,34,0],[18,9,34,0,"defineProperty"],[18,23,34,0],[18,24,34,0,"exports"],[18,31,34,0],[19,4,34,0,"enumerable"],[19,14,34,0],[20,4,34,0,"get"],[20,7,34,0],[20,18,34,0,"get"],[20,19,34,0],[21,6,34,0],[21,13,34,0,"fetchConversations"],[21,31,34,0],[22,4,34,0],[23,2,34,0],[24,2,228,2],[24,6,228,2,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,228,2],[24,45,228,2,"require"],[24,52,228,2],[24,53,228,2,"_dependencyMap"],[24,67,228,2],[25,2,228,2],[25,6,228,2,"_asyncToGenerator"],[25,23,228,2],[25,26,228,2,"_interopDefault"],[25,41,228,2],[25,42,228,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,228,2],[26,2,1,0],[26,6,1,0,"_tanstackReactQuery"],[26,25,1,0],[26,28,1,0,"require"],[26,35,1,0],[26,36,1,0,"_dependencyMap"],[26,50,1,0],[27,2,2,0],[27,6,2,0,"_libSupabase"],[27,18,2,0],[27,21,2,0,"require"],[27,28,2,0],[27,29,2,0,"_dependencyMap"],[27,43,2,0],[28,2,3,0],[28,6,3,0,"_contextAuthProvider"],[28,26,3,0],[28,29,3,0,"require"],[28,36,3,0],[28,37,3,0,"_dependencyMap"],[28,51,3,0],[29,2,4,0],[29,6,4,0,"_queryKeys"],[29,16,4,0],[29,19,4,0,"require"],[29,26,4,0],[29,27,4,0,"_dependencyMap"],[29,41,4,0],[30,2,28,0],[31,0,29,0],[32,0,30,0],[33,0,31,0],[34,0,32,0],[35,0,33,0],[36,2,34,7],[36,6,34,13,"fetchConversations"],[36,24,34,31],[37,4,34,31],[37,8,34,31,"_ref"],[37,12,34,31],[37,19,34,31,"_asyncToGenerator"],[37,36,34,31],[37,37,34,31,"default"],[37,44,34,31],[37,46,34,34],[37,57,34,41,"userId"],[37,63,34,55],[37,65,34,92],[38,6,35,2],[39,6,36,2],[39,10,36,2,"_yield$supabase$from$"],[39,31,36,2],[39,40,36,47,"supabase"],[39,52,36,55],[39,53,36,55,"supabase"],[39,61,36,55],[39,62,37,5,"from"],[39,66,37,9],[39,67,37,10],[39,82,37,25],[39,83,37,26],[39,84,38,5,"select"],[39,90,38,11],[39,91,39,6],[40,0,40,0],[41,0,41,0],[42,0,42,0],[43,0,43,0],[44,0,44,0],[45,0,45,0],[46,0,46,0],[47,0,47,0],[48,0,48,0],[49,0,49,0],[50,0,50,0],[51,0,51,0],[52,0,52,0],[53,0,53,0],[54,0,54,0],[55,0,55,0],[56,0,56,0],[57,0,57,0],[58,0,58,0],[58,5,59,4],[58,6,59,5],[58,7,60,5,"or"],[58,9,60,7],[58,10,61,6],[58,26,61,22,"userId"],[58,32,61,28],[58,49,61,45,"userId"],[58,55,61,51],[58,57,61,53],[58,59,62,6],[59,10,62,8,"referencedTable"],[59,25,62,23],[59,27,62,25],[60,8,62,35],[60,9,63,4],[60,10,63,5],[61,8,36,16,"conversations"],[61,21,36,29],[61,24,36,29,"_yield$supabase$from$"],[61,45,36,29],[61,46,36,10,"data"],[61,50,36,14],[62,8,36,31,"error"],[62,13,36,36],[62,16,36,36,"_yield$supabase$from$"],[62,37,36,36],[62,38,36,31,"error"],[62,43,36,36],[63,6,65,2],[63,10,65,6,"error"],[63,15,65,11],[63,17,65,13],[63,23,65,19,"error"],[63,28,65,24],[64,6,66,2],[64,10,66,6],[64,11,66,7,"conversations"],[64,24,66,20],[64,28,66,24,"conversations"],[64,41,66,37],[64,42,66,38,"length"],[64,48,66,44],[64,53,66,49],[64,54,66,50],[64,56,66,52],[64,63,66,59],[64,65,66,61],[66,6,68,2],[67,6,69,2],[67,10,69,8,"otherUserIds"],[67,22,69,30],[67,25,69,33],[67,27,69,35],[68,6,70,2],[68,10,70,8,"convIds"],[68,17,70,25],[68,20,70,28],[68,22,70,30],[69,6,72,2],[69,11,72,7],[69,15,72,13,"conv"],[69,19,72,17],[69,23,72,21,"conversations"],[69,36,72,34],[69,38,72,36],[70,8,73,4],[70,12,73,10,"match"],[70,17,73,15],[70,20,73,18,"conv"],[70,24,73,22],[70,25,73,23,"matches"],[70,32,85,5],[71,8,86,4],[71,12,86,10,"otherId"],[71,19,86,17],[71,22,87,6,"match"],[71,27,87,11],[71,28,87,12,"user_a_id"],[71,37,87,21],[71,42,87,26,"userId"],[71,48,87,32],[71,51,87,35,"match"],[71,56,87,40],[71,57,87,41,"user_b_id"],[71,66,87,50],[71,69,87,53,"match"],[71,74,87,58],[71,75,87,59,"user_a_id"],[71,84,87,68],[72,8,88,4,"otherUserIds"],[72,20,88,16],[72,21,88,17,"push"],[72,25,88,21],[72,26,88,22,"otherId"],[72,33,88,29],[72,34,88,30],[73,8,89,4,"convIds"],[73,15,89,11],[73,16,89,12,"push"],[73,20,89,16],[73,21,89,17,"conv"],[73,25,89,21],[73,26,89,22,"id"],[73,28,89,24],[73,29,89,25],[74,6,90,2],[76,6,92,2],[77,6,93,2],[77,10,93,2,"_yield$supabase$from$2"],[77,32,93,2],[77,41,93,42,"supabase"],[77,53,93,50],[77,54,93,50,"supabase"],[77,62,93,50],[77,63,94,5,"from"],[77,67,94,9],[77,68,94,10],[77,76,94,18],[77,77,94,19],[77,78,95,5,"select"],[77,84,95,11],[77,85,95,12],[77,97,95,24],[77,98,95,25],[77,99,96,5,"eq"],[77,101,96,7],[77,102,96,8],[77,114,96,20],[77,116,96,22,"userId"],[77,122,96,28],[77,123,96,29],[78,8,93,16,"blocksAsBlocker"],[78,23,93,31],[78,26,93,31,"_yield$supabase$from$2"],[78,48,93,31],[78,49,93,10,"data"],[78,53,93,14],[79,6,98,2],[79,10,98,2,"_yield$supabase$from$3"],[79,32,98,2],[79,41,98,42,"supabase"],[79,53,98,50],[79,54,98,50,"supabase"],[79,62,98,50],[79,63,99,5,"from"],[79,67,99,9],[79,68,99,10],[79,76,99,18],[79,77,99,19],[79,78,100,5,"select"],[79,84,100,11],[79,85,100,12],[79,97,100,24],[79,98,100,25],[79,99,101,5,"eq"],[79,101,101,7],[79,102,101,8],[79,114,101,20],[79,116,101,22,"userId"],[79,122,101,28],[79,123,101,29],[80,8,98,16,"blocksAsBlocked"],[80,23,98,31],[80,26,98,31,"_yield$supabase$from$3"],[80,48,98,31],[80,49,98,10,"data"],[80,53,98,14],[81,6,103,2],[81,10,103,8,"blockedIds"],[81,20,103,18],[81,23,103,21],[81,27,103,25,"Set"],[81,30,103,28],[81,31,103,37],[81,32,104,4],[81,35,104,7],[81,36,104,8,"blocksAsBlocker"],[81,51,104,23],[81,55,104,27],[81,57,104,29],[81,59,104,31,"map"],[81,62,104,34],[81,63,104,36,"b"],[81,64,104,37],[81,68,104,42,"b"],[81,69,104,43],[81,70,104,44,"blocked_id"],[81,80,104,54],[81,81,104,55],[81,83,105,4],[81,86,105,7],[81,87,105,8,"blocksAsBlocked"],[81,102,105,23],[81,106,105,27],[81,108,105,29],[81,110,105,31,"map"],[81,113,105,34],[81,114,105,36,"b"],[81,115,105,37],[81,119,105,42,"b"],[81,120,105,43],[81,121,105,44,"blocker_id"],[81,131,105,54],[81,132,105,55],[81,133,106,3],[81,134,106,4],[83,6,108,2],[84,6,109,2],[84,10,109,8,"uniqueOtherIds"],[84,24,109,22],[84,27,109,25],[84,28,109,26],[84,31,109,29],[84,35,109,33,"Set"],[84,38,109,36],[84,39,109,37,"otherUserIds"],[84,51,109,49],[84,52,109,50],[84,53,109,51],[85,6,110,2],[85,10,110,2,"_yield$supabase$from$4"],[85,32,110,2],[85,41,110,35,"supabase"],[85,53,110,43],[85,54,110,43,"supabase"],[85,62,110,43],[85,63,111,5,"from"],[85,67,111,9],[85,68,111,10],[85,75,111,17],[85,76,111,18],[85,77,112,5,"select"],[85,83,112,11],[85,84,112,12],[85,128,112,56],[85,129,112,57],[85,130,113,5,"in"],[85,132,113,7],[85,133,113,8],[85,137,113,12],[85,139,113,14,"uniqueOtherIds"],[85,153,113,28],[85,154,113,29],[86,8,110,16,"profiles"],[86,16,110,24],[86,19,110,24,"_yield$supabase$from$4"],[86,41,110,24],[86,42,110,10,"data"],[86,46,110,14],[87,6,115,2],[87,10,115,8,"profileMap"],[87,20,115,18],[87,23,115,21],[87,27,115,25,"Map"],[87,30,115,28],[87,31,116,4],[87,32,116,5,"profiles"],[87,40,116,13],[87,44,116,17],[87,46,116,19],[87,48,116,21,"map"],[87,51,116,24],[87,52,116,26,"p"],[87,53,116,27],[87,57,116,32],[87,58,116,33,"p"],[87,59,116,34],[87,60,116,35,"id"],[87,62,116,37],[87,64,116,39,"p"],[87,65,116,40],[87,66,116,41],[87,67,117,2],[87,68,117,3],[89,6,119,2],[90,6,120,2],[90,10,120,2,"_yield$supabase$from$5"],[90,32,120,2],[90,41,120,41,"supabase"],[90,53,120,49],[90,54,120,49,"supabase"],[90,62,120,49],[90,63,121,5,"from"],[90,67,121,9],[90,68,121,10],[90,78,121,20],[90,79,121,21],[90,80,122,5,"select"],[90,86,122,11],[90,87,122,12],[90,128,122,53],[90,129,122,54],[90,130,123,5,"in"],[90,132,123,7],[90,133,123,8],[90,150,123,25],[90,152,123,27,"convIds"],[90,159,123,34],[90,160,123,35],[90,161,124,5,"order"],[90,166,124,10],[90,167,124,11],[90,179,124,23],[90,181,124,25],[91,10,124,27,"ascending"],[91,19,124,36],[91,21,124,38],[92,8,124,44],[92,9,124,45],[92,10,124,46],[93,8,120,16,"recentMessages"],[93,22,120,30],[93,25,120,30,"_yield$supabase$from$5"],[93,47,120,30],[93,48,120,10,"data"],[93,52,120,14],[95,6,126,2],[96,6,127,2],[96,10,127,8,"lastMessageMap"],[96,24,127,22],[96,27,127,25],[96,31,127,29,"Map"],[96,34,127,32],[96,35,130,4],[96,36,130,5],[97,6,131,2],[97,11,131,7],[97,15,131,13,"msg"],[97,18,131,16],[97,22,131,20,"recentMessages"],[97,36,131,34],[97,40,131,38],[97,42,131,40],[97,44,131,42],[98,8,132,4],[98,12,132,8],[98,13,132,9,"lastMessageMap"],[98,27,132,23],[98,28,132,24,"has"],[98,31,132,27],[98,32,132,28,"msg"],[98,35,132,31],[98,36,132,32,"conversation_id"],[98,51,132,47],[98,52,132,48],[98,54,132,50],[99,10,133,6,"lastMessageMap"],[99,24,133,20],[99,25,133,21,"set"],[99,28,133,24],[99,29,133,25,"msg"],[99,32,133,28],[99,33,133,29,"conversation_id"],[99,48,133,44],[99,50,133,46],[100,12,134,8,"body"],[100,16,134,12],[100,18,134,14,"msg"],[100,21,134,17],[100,22,134,18,"body"],[100,26,134,22],[101,12,135,8,"type"],[101,16,135,12],[101,18,135,14,"msg"],[101,21,135,17],[101,22,135,18,"type"],[101,26,135,37],[102,12,136,8,"created_at"],[102,22,136,18],[102,24,136,20,"msg"],[102,27,136,23],[102,28,136,24,"created_at"],[103,10,137,6],[103,11,137,7],[103,12,137,8],[104,8,138,4],[105,6,139,2],[107,6,141,2],[108,6,142,2],[108,10,142,2,"_yield$supabase$rpc"],[108,29,142,2],[108,38,142,37,"supabase"],[108,50,142,45],[108,51,142,45,"supabase"],[108,59,142,45],[108,60,142,46,"rpc"],[108,63,142,49],[108,64,142,50],[108,83,142,69],[108,85,142,71],[109,10,143,4,"p_user_id"],[109,19,143,13],[109,21,143,15,"userId"],[110,8,144,2],[110,9,144,3],[110,10,144,4],[111,8,142,16,"unreadData"],[111,18,142,26],[111,21,142,26,"_yield$supabase$rpc"],[111,40,142,26],[111,41,142,10,"data"],[111,45,142,14],[112,6,146,2],[112,10,146,8,"unreadMap"],[112,19,146,17],[112,22,146,20],[112,26,146,24,"Map"],[112,29,146,27],[112,30,147,4],[112,31,147,5,"unreadData"],[112,41,147,15],[112,45,147,19],[112,47,147,21],[112,49,147,23,"map"],[112,52,147,26],[112,53,147,28,"r"],[112,54,147,80],[112,58,147,85],[112,59,148,6,"r"],[112,60,148,7],[112,61,148,8,"conversation_id"],[112,76,148,23],[112,78,149,6,"r"],[112,79,149,7],[112,80,149,8,"unread_count"],[112,92,149,20],[112,93,150,5],[112,94,151,2],[112,95,151,3],[114,6,153,2],[115,6,154,2],[115,10,154,2,"_yield$supabase$from$6"],[115,32,154,2],[115,41,154,39,"supabase"],[115,53,154,47],[115,54,154,47,"supabase"],[115,62,154,47],[115,63,155,5,"from"],[115,67,155,9],[115,68,155,10],[115,92,155,34],[115,93,155,35],[115,94,156,5,"select"],[115,100,156,11],[115,101,156,12],[115,128,156,39],[115,129,156,40],[115,130,157,5,"eq"],[115,132,157,7],[115,133,157,8],[115,142,157,17],[115,144,157,19,"userId"],[115,150,157,25],[115,151,157,26],[115,152,158,5,"in"],[115,154,158,7],[115,155,158,8],[115,172,158,25],[115,174,158,27,"convIds"],[115,181,158,34],[115,182,158,35],[116,8,154,16,"nicknameData"],[116,20,154,28],[116,23,154,28,"_yield$supabase$from$6"],[116,45,154,28],[116,46,154,10,"data"],[116,50,154,14],[117,6,160,2],[117,10,160,8,"nicknameMap"],[117,21,160,19],[117,24,160,22],[117,28,160,26,"Map"],[117,31,160,29],[117,32,161,4],[117,33,161,5,"nicknameData"],[117,45,161,17],[117,49,161,21],[117,51,161,23],[117,53,161,25,"map"],[117,56,161,28],[117,57,161,30,"n"],[117,58,161,31],[117,62,161,36],[117,63,161,37,"n"],[117,64,161,38],[117,65,161,39,"conversation_id"],[117,80,161,54],[117,82,161,56,"n"],[117,83,161,57],[117,84,161,58,"nickname"],[117,92,161,66],[117,93,161,67],[117,94,162,2],[117,95,162,3],[119,6,164,2],[120,6,165,2],[120,10,165,8,"results"],[120,17,165,38],[120,20,165,41],[120,22,165,43],[121,6,167,2],[121,11,167,7],[121,15,167,13,"conv"],[121,20,167,17],[121,24,167,21,"conversations"],[121,37,167,34],[121,39,167,36],[122,8,168,4],[122,12,168,10,"match"],[122,18,168,15],[122,21,168,18,"conv"],[122,26,168,22],[122,27,168,23,"matches"],[122,34,180,5],[123,8,182,4],[123,12,182,10,"otherId"],[123,20,182,17],[123,23,183,6,"match"],[123,29,183,11],[123,30,183,12,"user_a_id"],[123,39,183,21],[123,44,183,26,"userId"],[123,50,183,32],[123,53,183,35,"match"],[123,59,183,40],[123,60,183,41,"user_b_id"],[123,69,183,50],[123,72,183,53,"match"],[123,78,183,58],[123,79,183,59,"user_a_id"],[123,88,183,68],[125,8,185,4],[126,8,186,4],[126,12,186,8,"blockedIds"],[126,22,186,18],[126,23,186,19,"has"],[126,26,186,22],[126,27,186,23,"otherId"],[126,35,186,30],[126,36,186,31],[126,38,186,33],[127,8,188,4],[127,12,188,10,"profile"],[127,19,188,17],[127,22,188,20,"profileMap"],[127,32,188,30],[127,33,188,31,"get"],[127,36,188,34],[127,37,188,35,"otherId"],[127,45,188,42],[127,46,188,43],[128,8,189,4],[128,12,189,10,"lastMsg"],[128,19,189,17],[128,22,189,20,"lastMessageMap"],[128,36,189,34],[128,37,189,35,"get"],[128,40,189,38],[128,41,189,39,"conv"],[128,46,189,43],[128,47,189,44,"id"],[128,49,189,46],[128,50,189,47],[130,8,191,4],[131,8,192,4],[131,12,192,10,"listingThumbnails"],[131,29,192,27],[131,32,192,30],[131,33,192,31,"match"],[131,39,192,36],[131,40,192,37,"listings"],[131,48,192,45],[131,49,192,46,"listing_items"],[131,62,192,59],[131,66,192,63],[131,68,192,65],[131,70,193,7,"slice"],[131,75,193,12],[131,76,193,13],[131,77,193,14],[131,79,193,16],[131,80,193,17],[131,81,193,18],[131,82,194,7,"map"],[131,85,194,10],[131,86,194,12,"li"],[131,88,194,14],[131,92,194,19,"li"],[131,94,194,21],[131,95,194,22,"card_image_url"],[131,109,194,36],[131,110,194,37],[132,8,196,4,"results"],[132,15,196,11],[132,16,196,12,"push"],[132,20,196,16],[132,21,196,17],[133,10,197,6,"conversationId"],[133,24,197,20],[133,26,197,22,"conv"],[133,31,197,26],[133,32,197,27,"id"],[133,34,197,29],[134,10,198,6,"matchId"],[134,17,198,13],[134,19,198,15,"match"],[134,25,198,20],[134,26,198,21,"id"],[134,28,198,23],[135,10,199,6,"otherUser"],[135,19,199,15],[135,21,199,17],[136,12,200,8,"id"],[136,14,200,10],[136,16,200,12,"profile"],[136,23,200,19],[136,25,200,21,"id"],[136,27,200,23],[136,31,200,27,"otherId"],[136,39,200,34],[137,12,201,8,"name"],[137,16,201,12],[137,18,201,14,"profile"],[137,25,201,21],[137,27,201,23,"display_name"],[137,39,201,35],[137,43,201,39],[137,52,201,48],[138,12,202,8,"avatar"],[138,18,202,14],[138,20,202,16,"profile"],[138,27,202,23],[138,29,202,25,"avatar_url"],[138,39,202,35],[138,43,202,39],[138,47,202,43],[139,12,203,8,"rating"],[139,18,203,14],[139,20,203,16,"profile"],[139,27,203,23],[139,29,203,25,"rating_score"],[139,41,203,37],[139,45,203,41],[140,10,204,6],[140,11,204,7],[141,10,205,6,"lastMessage"],[141,21,205,17],[141,23,205,19,"lastMsg"],[141,30,205,26],[141,33,206,10],[142,12,207,12,"body"],[142,16,207,16],[142,18,207,18,"lastMsg"],[142,25,207,25],[142,26,207,26,"body"],[142,30,207,30],[143,12,208,12,"type"],[143,16,208,16],[143,18,208,18,"lastMsg"],[143,25,208,25],[143,26,208,26,"type"],[143,30,208,30],[144,12,209,12,"createdAt"],[144,21,209,21],[144,23,209,23,"lastMsg"],[144,30,209,30],[144,31,209,31,"created_at"],[145,10,210,10],[145,11,210,11],[145,14,211,10],[145,18,211,14],[146,10,212,6,"unreadCount"],[146,21,212,17],[146,23,212,19,"unreadMap"],[146,32,212,28],[146,33,212,29,"get"],[146,36,212,32],[146,37,212,33,"conv"],[146,42,212,37],[146,43,212,38,"id"],[146,45,212,40],[146,46,212,41],[146,50,212,45],[146,51,212,46],[147,10,213,6,"negotiationStatus"],[147,27,213,23],[147,29,213,25,"conv"],[147,34,213,29],[147,35,213,30,"negotiation_status"],[147,53,213,69],[148,10,214,6,"listingTitle"],[148,22,214,18],[148,24,214,20,"match"],[148,30,214,25],[148,31,214,26,"listings"],[148,39,214,34],[148,40,214,35,"title"],[148,45,214,40],[149,10,215,6,"listingThumbnails"],[149,27,215,23],[150,10,216,6,"nickname"],[150,18,216,14],[150,20,216,16,"nicknameMap"],[150,31,216,27],[150,32,216,28,"get"],[150,35,216,31],[150,36,216,32,"conv"],[150,41,216,36],[150,42,216,37,"id"],[150,44,216,39],[150,45,216,40],[150,49,216,44],[151,8,217,4],[151,9,217,5],[151,10,217,6],[152,6,218,2],[154,6,220,2],[155,6,221,2,"results"],[155,13,221,9],[155,14,221,10,"sort"],[155,18,221,14],[155,19,221,15],[155,20,221,16,"a"],[155,21,221,17],[155,23,221,19,"b"],[155,24,221,20],[155,29,221,25],[156,8,222,4],[156,12,222,10,"dateA"],[156,17,222,15],[156,20,222,18,"a"],[156,21,222,19],[156,22,222,20,"lastMessage"],[156,33,222,31],[156,35,222,33,"createdAt"],[156,44,222,42],[156,48,222,46],[156,50,222,48],[157,8,223,4],[157,12,223,10,"dateB"],[157,17,223,15],[157,20,223,18,"b"],[157,21,223,19],[157,22,223,20,"lastMessage"],[157,33,223,31],[157,35,223,33,"createdAt"],[157,44,223,42],[157,48,223,46],[157,50,223,48],[158,8,224,4],[158,15,224,11,"dateB"],[158,20,224,16],[158,21,224,17,"localeCompare"],[158,34,224,30],[158,35,224,31,"dateA"],[158,40,224,36],[158,41,224,37],[159,6,225,2],[159,7,225,3],[159,8,225,4],[160,6,227,2],[160,13,227,9,"results"],[160,20,227,16],[161,4,228,0],[161,5,228,1],[162,4,228,1],[162,20,34,13,"fetchConversations"],[162,38,34,31,"fetchConversations"],[162,39,34,31,"_x"],[162,41,34,31],[163,6,34,31],[163,13,34,31,"_ref"],[163,17,34,31],[163,18,34,31,"apply"],[163,23,34,31],[163,30,34,31,"arguments"],[163,39,34,31],[164,4,34,31],[165,2,34,31],[165,5,228,1],[167,2,230,0],[168,0,231,0],[169,0,232,0],[170,2,233,0],[170,6,233,6,"useConversations"],[170,22,233,22],[170,25,233,25,"useConversations"],[170,26,233,25],[170,31,233,31],[171,4,234,2],[171,8,234,2,"_useAuth"],[171,16,234,2],[171,19,234,19],[171,23,234,19,"useAuth"],[171,43,234,26],[171,44,234,26,"useAuth"],[171,51,234,26],[171,53,234,27],[171,54,234,28],[172,6,234,10,"user"],[172,10,234,14],[172,13,234,14,"_useAuth"],[172,21,234,14],[172,22,234,10,"user"],[172,26,234,14],[173,4,236,2],[173,11,236,9],[173,15,236,9,"useQuery"],[173,34,236,17],[173,35,236,17,"useQuery"],[173,43,236,17],[173,45,236,18],[174,6,237,4,"queryKey"],[174,14,237,12],[174,16,237,14,"chatKeys"],[174,26,237,22],[174,27,237,22,"chatKeys"],[174,35,237,22],[174,36,237,23,"conversations"],[174,49,237,36],[174,50,237,37],[174,51,237,38],[175,6,238,4,"queryFn"],[175,13,238,11],[175,15,238,13,"queryFn"],[175,16,238,13],[175,21,238,19,"fetchConversations"],[175,39,238,37],[175,40,238,38,"user"],[175,44,238,42],[175,45,238,44,"id"],[175,47,238,46],[175,48,238,47],[176,6,239,4,"enabled"],[176,13,239,11],[176,15,239,13],[176,16,239,14],[176,17,239,15,"user"],[177,4,240,2],[177,5,240,3],[177,6,240,4],[178,2,241,0],[178,3,241,1],[179,2,243,0],[179,6,243,0,"_default"],[179,14,243,0],[179,17,243,15,"useConversations"],[179,33,243,31],[180,0,243,32],[180,3]],"functionMap":{"names":["<global>","fetchConversations","map$argument_0","slice.map$argument_0","results.sort$argument_0","useConversations","useQuery$argument_0.queryFn"],"mappings":"AAA;kCCiC;mCCsE,mBD;mCCC,mBD;yBCW,gBD;2BC+B;KDG;6BCW,sCD;WEiC,yBF;eG2B;GHI;CDG;yBKK;aCK,kCD;CLG"},"hasCjsExports":false},"type":"js/module"}]}