{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  /**\n   * Groups collection items by external_id for display.\n   * Each group aggregates count and value across individual physical cards.\n   * Items within each group are sorted by condition (nm first).\n   */\n  var groupCollectionItems = items => {\n    var conditionOrder = {\n      nm: 0,\n      lp: 1,\n      mp: 2,\n      hp: 3,\n      dmg: 4\n    };\n    var groupMap = new Map();\n    for (var item of items) {\n      var existing = groupMap.get(item.external_id);\n      if (existing) {\n        existing.totalCount += item.quantity;\n        existing.totalValue += (item.market_price ?? 0) * item.quantity;\n        existing.items.push(item);\n      } else {\n        groupMap.set(item.external_id, {\n          groupKey: item.external_id,\n          card_name: item.card_name,\n          set_name: item.set_name,\n          set_code: item.set_code,\n          card_number: item.card_number,\n          tcg: item.tcg,\n          image_url: item.image_url,\n          rarity: item.rarity,\n          totalCount: item.quantity,\n          totalValue: (item.market_price ?? 0) * item.quantity,\n          items: [item]\n        });\n      }\n    }\n    var groups = Array.from(groupMap.values());\n    for (var group of groups) {\n      group.items.sort((a, b) => (conditionOrder[a.condition] ?? 99) - (conditionOrder[b.condition] ?? 99));\n    }\n    return groups;\n  };\n  var _default = groupCollectionItems;\n});","lineCount":56,"map":[[7,2,61,0,"Object"],[7,8,61,0],[7,9,61,0,"defineProperty"],[7,23,61,0],[7,24,61,0,"exports"],[7,31,61,0],[8,4,61,0,"enumerable"],[8,14,61,0],[9,4,61,0,"get"],[9,7,61,0],[9,18,61,0,"get"],[9,19,61,0],[10,6,61,0],[10,13,61,0,"_default"],[10,21,61,0],[11,4,61,0],[12,2,61,0],[13,2,17,0],[14,0,18,0],[15,0,19,0],[16,0,20,0],[17,0,21,0],[18,2,22,0],[18,6,22,6,"groupCollectionItems"],[18,26,22,26],[18,29,22,30,"items"],[18,34,22,56],[18,38,22,84],[19,4,23,2],[19,8,23,8,"conditionOrder"],[19,22,23,46],[19,25,23,49],[20,6,23,51,"nm"],[20,8,23,53],[20,10,23,55],[20,11,23,56],[21,6,23,58,"lp"],[21,8,23,60],[21,10,23,62],[21,11,23,63],[22,6,23,65,"mp"],[22,8,23,67],[22,10,23,69],[22,11,23,70],[23,6,23,72,"hp"],[23,8,23,74],[23,10,23,76],[23,11,23,77],[24,6,23,79,"dmg"],[24,9,23,82],[24,11,23,84],[25,4,23,86],[25,5,23,87],[26,4,25,2],[26,8,25,8,"groupMap"],[26,16,25,16],[26,19,25,19],[26,23,25,23,"Map"],[26,26,25,26],[26,27,25,56],[26,28,25,57],[27,4,27,2],[27,9,27,7],[27,13,27,13,"item"],[27,17,27,17],[27,21,27,21,"items"],[27,26,27,26],[27,28,27,28],[28,6,28,4],[28,10,28,10,"existing"],[28,18,28,18],[28,21,28,21,"groupMap"],[28,29,28,29],[28,30,28,30,"get"],[28,33,28,33],[28,34,28,34,"item"],[28,38,28,38],[28,39,28,39,"external_id"],[28,50,28,50],[28,51,28,51],[29,6,29,4],[29,10,29,8,"existing"],[29,18,29,16],[29,20,29,18],[30,8,30,6,"existing"],[30,16,30,14],[30,17,30,15,"totalCount"],[30,27,30,25],[30,31,30,29,"item"],[30,35,30,33],[30,36,30,34,"quantity"],[30,44,30,42],[31,8,31,6,"existing"],[31,16,31,14],[31,17,31,15,"totalValue"],[31,27,31,25],[31,31,31,29],[31,32,31,30,"item"],[31,36,31,34],[31,37,31,35,"market_price"],[31,49,31,47],[31,53,31,51],[31,54,31,52],[31,58,31,56,"item"],[31,62,31,60],[31,63,31,61,"quantity"],[31,71,31,69],[32,8,32,6,"existing"],[32,16,32,14],[32,17,32,15,"items"],[32,22,32,20],[32,23,32,21,"push"],[32,27,32,25],[32,28,32,26,"item"],[32,32,32,30],[32,33,32,31],[33,6,33,4],[33,7,33,5],[33,13,33,11],[34,8,34,6,"groupMap"],[34,16,34,14],[34,17,34,15,"set"],[34,20,34,18],[34,21,34,19,"item"],[34,25,34,23],[34,26,34,24,"external_id"],[34,37,34,35],[34,39,34,37],[35,10,35,8,"groupKey"],[35,18,35,16],[35,20,35,18,"item"],[35,24,35,22],[35,25,35,23,"external_id"],[35,36,35,34],[36,10,36,8,"card_name"],[36,19,36,17],[36,21,36,19,"item"],[36,25,36,23],[36,26,36,24,"card_name"],[36,35,36,33],[37,10,37,8,"set_name"],[37,18,37,16],[37,20,37,18,"item"],[37,24,37,22],[37,25,37,23,"set_name"],[37,33,37,31],[38,10,38,8,"set_code"],[38,18,38,16],[38,20,38,18,"item"],[38,24,38,22],[38,25,38,23,"set_code"],[38,33,38,31],[39,10,39,8,"card_number"],[39,21,39,19],[39,23,39,21,"item"],[39,27,39,25],[39,28,39,26,"card_number"],[39,39,39,37],[40,10,40,8,"tcg"],[40,13,40,11],[40,15,40,13,"item"],[40,19,40,17],[40,20,40,18,"tcg"],[40,23,40,21],[41,10,41,8,"image_url"],[41,19,41,17],[41,21,41,19,"item"],[41,25,41,23],[41,26,41,24,"image_url"],[41,35,41,33],[42,10,42,8,"rarity"],[42,16,42,14],[42,18,42,16,"item"],[42,22,42,20],[42,23,42,21,"rarity"],[42,29,42,27],[43,10,43,8,"totalCount"],[43,20,43,18],[43,22,43,20,"item"],[43,26,43,24],[43,27,43,25,"quantity"],[43,35,43,33],[44,10,44,8,"totalValue"],[44,20,44,18],[44,22,44,20],[44,23,44,21,"item"],[44,27,44,25],[44,28,44,26,"market_price"],[44,40,44,38],[44,44,44,42],[44,45,44,43],[44,49,44,47,"item"],[44,53,44,51],[44,54,44,52,"quantity"],[44,62,44,60],[45,10,45,8,"items"],[45,15,45,13],[45,17,45,15],[45,18,45,16,"item"],[45,22,45,20],[46,8,46,6],[46,9,46,7],[46,10,46,8],[47,6,47,4],[48,4,48,2],[49,4,50,2],[49,8,50,8,"groups"],[49,14,50,14],[49,17,50,17,"Array"],[49,22,50,22],[49,23,50,23,"from"],[49,27,50,27],[49,28,50,28,"groupMap"],[49,36,50,36],[49,37,50,37,"values"],[49,43,50,43],[49,44,50,44],[49,45,50,45],[49,46,50,46],[50,4,52,2],[50,9,52,7],[50,13,52,13,"group"],[50,18,52,18],[50,22,52,22,"groups"],[50,28,52,28],[50,30,52,30],[51,6,53,4,"group"],[51,11,53,9],[51,12,53,10,"items"],[51,17,53,15],[51,18,53,16,"sort"],[51,22,53,20],[51,23,54,6],[51,24,54,7,"a"],[51,25,54,8],[51,27,54,10,"b"],[51,28,54,11],[51,33,54,16],[51,34,54,17,"conditionOrder"],[51,48,54,31],[51,49,54,32,"a"],[51,50,54,33],[51,51,54,34,"condition"],[51,60,54,43],[51,61,54,44],[51,65,54,48],[51,67,54,50],[51,72,54,55,"conditionOrder"],[51,86,54,69],[51,87,54,70,"b"],[51,88,54,71],[51,89,54,72,"condition"],[51,98,54,81],[51,99,54,82],[51,103,54,86],[51,105,54,88],[51,106,55,4],[51,107,55,5],[52,4,56,2],[53,4,58,2],[53,11,58,9,"groups"],[53,17,58,15],[54,2,59,0],[54,3,59,1],[55,2,61,0],[55,6,61,0,"_default"],[55,14,61,0],[55,17,61,15,"groupCollectionItems"],[55,37,61,35],[56,0,61,36],[56,3]],"functionMap":{"names":["<global>","groupCollectionItems","group.items.sort$argument_0"],"mappings":"AAA;6BCqB;MCgC,mFD;CDK"},"hasCjsExports":false},"type":"js/module"}]}