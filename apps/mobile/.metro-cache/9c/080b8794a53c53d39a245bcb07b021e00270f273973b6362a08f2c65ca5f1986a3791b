{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":45,"index":138}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[3], \"../../queryKeys\");\n  /**\n   * Hook that fetches all meetups for the current user.\n   *\n   * Joins matches to resolve both user IDs, then filters where the\n   * current user is either user_a or user_b. Also joins shops for\n   * location details. Returns meetups split into upcoming and past.\n   */\n  var useMeetups = () => {\n    _s();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.meetupKeys.all,\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$auth$ = yield _libSupabase.supabase.auth.getSession(),\n            session = _yield$supabase$auth$.data.session;\n          var user = session?.user ?? null;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('meetups').select(`\n          id,\n          match_id,\n          proposal_message_id,\n          shop_id,\n          location_name,\n          proposed_time,\n          status,\n          user_a_completed,\n          user_b_completed,\n          created_at,\n          updated_at,\n          match:matches (\n            id,\n            user_a_id,\n            user_b_id\n          ),\n          shop:shops (\n            id,\n            name,\n            address\n          )\n        `).order('created_at', {\n              ascending: false\n            }),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!data || data.length === 0) return {\n            upcoming: [],\n            past: []\n          };\n\n          // Filter meetups where current user is participant and resolve other user\n          var userMeetups = data.filter(meetup => {\n            var match = meetup.match;\n            return match && (match.user_a_id === user.id || match.user_b_id === user.id);\n          });\n          if (userMeetups.length === 0) return {\n            upcoming: [],\n            past: []\n          };\n\n          // Collect other user IDs to batch-fetch their profiles\n          var otherUserIds = userMeetups.map(meetup => {\n            var match = meetup.match;\n            return match.user_a_id === user.id ? match.user_b_id : match.user_a_id;\n          });\n          var uniqueUserIds = [...new Set(otherUserIds)];\n          var _yield$supabase$from$2 = yield _libSupabase.supabase.from('users').select('id, display_name, avatar_url, rating_score').in('id', uniqueUserIds),\n            usersData = _yield$supabase$from$2.data;\n          var usersMap = new Map((usersData ?? []).map(u => [u.id, u]));\n          var enriched = userMeetups.map(meetup => {\n            var match = meetup.match;\n            var otherUserId = match.user_a_id === user.id ? match.user_b_id : match.user_a_id;\n            var otherUser = usersMap.get(otherUserId) ?? {\n              id: otherUserId,\n              display_name: 'Unknown',\n              avatar_url: null,\n              rating_score: 0\n            };\n            return {\n              ...meetup,\n              match,\n              shop: meetup.shop,\n              other_user: otherUser\n            };\n          });\n          var now = new Date().toISOString();\n          var upcoming = enriched.filter(m => (m.status === 'proposed' || m.status === 'confirmed') && (m.proposed_time === null || m.proposed_time >= now));\n          var past = enriched.filter(m => m.status === 'completed' || m.status === 'cancelled' || (m.status === 'proposed' || m.status === 'confirmed') && m.proposed_time !== null && m.proposed_time < now);\n          return {\n            upcoming,\n            past\n          };\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    });\n  };\n  _s(useMeetups, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  var _default = useMeetups;\n});","lineCount":127,"map":[[13,2,136,0,"Object"],[13,8,136,0],[13,9,136,0,"defineProperty"],[13,23,136,0],[13,24,136,0,"exports"],[13,31,136,0],[14,4,136,0,"enumerable"],[14,14,136,0],[15,4,136,0,"get"],[15,7,136,0],[15,18,136,0,"get"],[15,19,136,0],[16,6,136,0],[16,13,136,0,"_default"],[16,21,136,0],[17,4,136,0],[18,2,136,0],[19,2,136,26],[19,6,136,26,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,136,26],[19,45,136,26,"require"],[19,52,136,26],[19,53,136,26,"_dependencyMap"],[19,67,136,26],[20,2,136,26],[20,6,136,26,"_asyncToGenerator"],[20,23,136,26],[20,26,136,26,"_interopDefault"],[20,41,136,26],[20,42,136,26,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,136,26],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_queryKeys"],[23,16,3,0],[23,19,3,0,"require"],[23,26,3,0],[23,27,3,0,"_dependencyMap"],[23,41,3,0],[24,2,21,0],[25,0,22,0],[26,0,23,0],[27,0,24,0],[28,0,25,0],[29,0,26,0],[30,0,27,0],[31,2,28,0],[31,6,28,6,"useMeetups"],[31,16,28,16],[31,19,28,19,"useMeetups"],[31,20,28,19],[31,25,28,25],[32,4,28,25,"_s"],[32,6,28,25],[33,4,29,2],[33,11,29,9],[33,15,29,9,"useQuery"],[33,34,29,17],[33,35,29,17,"useQuery"],[33,43,29,17],[33,45,29,43],[34,6,30,4,"queryKey"],[34,14,30,12],[34,16,30,14,"meetupKeys"],[34,26,30,24],[34,27,30,24,"meetupKeys"],[34,37,30,24],[34,38,30,25,"all"],[34,41,30,28],[35,6,31,4,"queryFn"],[35,13,31,11],[36,8,31,11],[36,12,31,11,"_ref"],[36,16,31,11],[36,23,31,11,"_asyncToGenerator"],[36,40,31,11],[36,41,31,11,"default"],[36,48,31,11],[36,50,31,13],[36,63,31,25],[37,10,32,6],[37,14,32,6,"_yield$supabase$auth$"],[37,35,32,6],[37,44,34,16,"supabase"],[37,56,34,24],[37,57,34,24,"supabase"],[37,65,34,24],[37,66,34,25,"auth"],[37,70,34,29],[37,71,34,30,"getSession"],[37,81,34,40],[37,82,34,41],[37,83,34,42],[38,12,33,16,"session"],[38,19,33,23],[38,22,33,23,"_yield$supabase$auth$"],[38,43,33,23],[38,44,33,8,"data"],[38,48,33,12],[38,49,33,16,"session"],[38,56,33,23],[39,10,35,6],[39,14,35,12,"user"],[39,18,35,16],[39,21,35,19,"session"],[39,28,35,26],[39,30,35,28,"user"],[39,34,35,32],[39,38,35,36],[39,42,35,40],[40,10,37,6],[40,14,37,10],[40,15,37,11,"user"],[40,19,37,15],[40,21,37,17],[40,27,37,23],[40,31,37,27,"Error"],[40,36,37,32],[40,37,37,33],[40,56,37,52],[40,57,37,53],[41,10,39,6],[41,14,39,6,"_yield$supabase$from$"],[41,35,39,6],[41,44,39,36,"supabase"],[41,56,39,44],[41,57,39,44,"supabase"],[41,65,39,44],[41,66,40,9,"from"],[41,70,40,13],[41,71,40,14],[41,80,40,23],[41,81,40,24],[41,82,41,9,"select"],[41,88,41,15],[41,89,42,10],[42,0,43,0],[43,0,44,0],[44,0,45,0],[45,0,46,0],[46,0,47,0],[47,0,48,0],[48,0,49,0],[49,0,50,0],[50,0,51,0],[51,0,52,0],[52,0,53,0],[53,0,54,0],[54,0,55,0],[55,0,56,0],[56,0,57,0],[57,0,58,0],[58,0,59,0],[59,0,60,0],[60,0,61,0],[61,0,62,0],[62,0,63,0],[63,0,64,0],[63,9,65,8],[63,10,65,9],[63,11,66,9,"order"],[63,16,66,14],[63,17,66,15],[63,29,66,27],[63,31,66,29],[64,14,66,31,"ascending"],[64,23,66,40],[64,25,66,42],[65,12,66,48],[65,13,66,49],[65,14,66,50],[66,12,39,14,"data"],[66,16,39,18],[66,19,39,18,"_yield$supabase$from$"],[66,40,39,18],[66,41,39,14,"data"],[66,45,39,18],[67,12,39,20,"error"],[67,17,39,25],[67,20,39,25,"_yield$supabase$from$"],[67,41,39,25],[67,42,39,20,"error"],[67,47,39,25],[68,10,68,6],[68,14,68,10,"error"],[68,19,68,15],[68,21,68,17],[68,27,68,23,"error"],[68,32,68,28],[69,10,69,6],[69,14,69,10],[69,15,69,11,"data"],[69,19,69,15],[69,23,69,19,"data"],[69,27,69,23],[69,28,69,24,"length"],[69,34,69,30],[69,39,69,35],[69,40,69,36],[69,42,69,38],[69,49,69,45],[70,12,69,47,"upcoming"],[70,20,69,55],[70,22,69,57],[70,24,69,59],[71,12,69,61,"past"],[71,16,69,65],[71,18,69,67],[72,10,69,70],[72,11,69,71],[74,10,71,6],[75,10,72,6],[75,14,72,12,"userMeetups"],[75,25,72,23],[75,28,72,26,"data"],[75,32,72,30],[75,33,72,31,"filter"],[75,39,72,37],[75,40,72,39,"meetup"],[75,46,72,70],[75,50,72,75],[76,12,73,8],[76,16,73,14,"match"],[76,21,73,19],[76,24,73,22,"meetup"],[76,30,73,28],[76,31,73,29,"match"],[76,36,73,85],[77,12,74,8],[77,19,74,15,"match"],[77,24,74,20],[77,29,74,25,"match"],[77,34,74,30],[77,35,74,31,"user_a_id"],[77,44,74,40],[77,49,74,45,"user"],[77,53,74,49],[77,54,74,50,"id"],[77,56,74,52],[77,60,74,56,"match"],[77,65,74,61],[77,66,74,62,"user_b_id"],[77,75,74,71],[77,80,74,76,"user"],[77,84,74,80],[77,85,74,81,"id"],[77,87,74,83],[77,88,74,84],[78,10,75,6],[78,11,75,7],[78,12,75,8],[79,10,77,6],[79,14,77,10,"userMeetups"],[79,25,77,21],[79,26,77,22,"length"],[79,32,77,28],[79,37,77,33],[79,38,77,34],[79,40,77,36],[79,47,77,43],[80,12,77,45,"upcoming"],[80,20,77,53],[80,22,77,55],[80,24,77,57],[81,12,77,59,"past"],[81,16,77,63],[81,18,77,65],[82,10,77,68],[82,11,77,69],[84,10,79,6],[85,10,80,6],[85,14,80,12,"otherUserIds"],[85,26,80,24],[85,29,80,27,"userMeetups"],[85,40,80,38],[85,41,80,39,"map"],[85,44,80,42],[85,45,80,44,"meetup"],[85,51,80,75],[85,55,80,80],[86,12,81,8],[86,16,81,14,"match"],[86,21,81,19],[86,24,81,22,"meetup"],[86,30,81,28],[86,31,81,29,"match"],[86,36,81,78],[87,12,82,8],[87,19,82,15,"match"],[87,24,82,20],[87,25,82,21,"user_a_id"],[87,34,82,30],[87,39,82,35,"user"],[87,43,82,39],[87,44,82,40,"id"],[87,46,82,42],[87,49,82,45,"match"],[87,54,82,50],[87,55,82,51,"user_b_id"],[87,64,82,60],[87,67,82,63,"match"],[87,72,82,68],[87,73,82,69,"user_a_id"],[87,82,82,78],[88,10,83,6],[88,11,83,7],[88,12,83,8],[89,10,85,6],[89,14,85,12,"uniqueUserIds"],[89,27,85,25],[89,30,85,28],[89,31,85,29],[89,34,85,32],[89,38,85,36,"Set"],[89,41,85,39],[89,42,85,40,"otherUserIds"],[89,54,85,52],[89,55,85,53],[89,56,85,54],[90,10,87,6],[90,14,87,6,"_yield$supabase$from$2"],[90,36,87,6],[90,45,87,40,"supabase"],[90,57,87,48],[90,58,87,48,"supabase"],[90,66,87,48],[90,67,88,9,"from"],[90,71,88,13],[90,72,88,14],[90,79,88,21],[90,80,88,22],[90,81,89,9,"select"],[90,87,89,15],[90,88,89,16],[90,132,89,60],[90,133,89,61],[90,134,90,9,"in"],[90,136,90,11],[90,137,90,12],[90,141,90,16],[90,143,90,18,"uniqueUserIds"],[90,156,90,31],[90,157,90,32],[91,12,87,20,"usersData"],[91,21,87,29],[91,24,87,29,"_yield$supabase$from$2"],[91,46,87,29],[91,47,87,14,"data"],[91,51,87,18],[92,10,92,6],[92,14,92,12,"usersMap"],[92,22,92,20],[92,25,92,23],[92,29,92,27,"Map"],[92,32,92,30],[92,33,93,8],[92,34,93,9,"usersData"],[92,43,93,18],[92,47,93,22],[92,49,93,24],[92,51,93,26,"map"],[92,54,93,29],[92,55,93,31,"u"],[92,56,93,32],[92,60,93,37],[92,61,93,38,"u"],[92,62,93,39],[92,63,93,40,"id"],[92,65,93,42],[92,67,93,44,"u"],[92,68,93,45],[92,69,93,46],[92,70,94,6],[92,71,94,7],[93,10,96,6],[93,14,96,12,"enriched"],[93,22,96,41],[93,25,96,44,"userMeetups"],[93,36,96,55],[93,37,96,56,"map"],[93,40,96,59],[93,41,96,61,"meetup"],[93,47,96,92],[93,51,96,97],[94,12,97,8],[94,16,97,14,"match"],[94,21,97,19],[94,24,97,22,"meetup"],[94,30,97,28],[94,31,97,29,"match"],[94,36,97,90],[95,12,98,8],[95,16,98,14,"otherUserId"],[95,27,98,25],[95,30,98,28,"match"],[95,35,98,33],[95,36,98,34,"user_a_id"],[95,45,98,43],[95,50,98,48,"user"],[95,54,98,52],[95,55,98,53,"id"],[95,57,98,55],[95,60,98,58,"match"],[95,65,98,63],[95,66,98,64,"user_b_id"],[95,75,98,73],[95,78,98,76,"match"],[95,83,98,81],[95,84,98,82,"user_a_id"],[95,93,98,91],[96,12,99,8],[96,16,99,14,"otherUser"],[96,25,99,23],[96,28,99,26,"usersMap"],[96,36,99,34],[96,37,99,35,"get"],[96,40,99,38],[96,41,99,39,"otherUserId"],[96,52,99,50],[96,53,99,51],[96,57,99,55],[97,14,100,10,"id"],[97,16,100,12],[97,18,100,14,"otherUserId"],[97,29,100,25],[98,14,101,10,"display_name"],[98,26,101,22],[98,28,101,24],[98,37,101,33],[99,14,102,10,"avatar_url"],[99,24,102,20],[99,26,102,22],[99,30,102,26],[100,14,103,10,"rating_score"],[100,26,103,22],[100,28,103,24],[101,12,104,8],[101,13,104,9],[102,12,106,8],[102,19,106,15],[103,14,107,10],[103,17,107,14,"meetup"],[103,23,107,34],[104,14,108,10,"match"],[104,19,108,15],[105,14,109,10,"shop"],[105,18,109,14],[105,20,109,16,"meetup"],[105,26,109,22],[105,27,109,23,"shop"],[105,31,109,56],[106,14,110,10,"other_user"],[106,24,110,20],[106,26,110,22,"otherUser"],[107,12,111,8],[107,13,111,9],[108,10,112,6],[108,11,112,7],[108,12,112,8],[109,10,114,6],[109,14,114,12,"now"],[109,17,114,15],[109,20,114,18],[109,24,114,22,"Date"],[109,28,114,26],[109,29,114,27],[109,30,114,28],[109,31,114,29,"toISOString"],[109,42,114,40],[109,43,114,41],[109,44,114,42],[110,10,116,6],[110,14,116,12,"upcoming"],[110,22,116,20],[110,25,116,23,"enriched"],[110,33,116,31],[110,34,116,32,"filter"],[110,40,116,38],[110,41,117,9,"m"],[110,42,117,10],[110,46,118,10],[110,47,118,11,"m"],[110,48,118,12],[110,49,118,13,"status"],[110,55,118,19],[110,60,118,24],[110,70,118,34],[110,74,118,38,"m"],[110,75,118,39],[110,76,118,40,"status"],[110,82,118,46],[110,87,118,51],[110,98,118,62],[110,104,119,11,"m"],[110,105,119,12],[110,106,119,13,"proposed_time"],[110,119,119,26],[110,124,119,31],[110,128,119,35],[110,132,119,39,"m"],[110,133,119,40],[110,134,119,41,"proposed_time"],[110,147,119,54],[110,151,119,58,"now"],[110,154,119,61],[110,155,120,6],[110,156,120,7],[111,10,122,6],[111,14,122,12,"past"],[111,18,122,16],[111,21,122,19,"enriched"],[111,29,122,27],[111,30,122,28,"filter"],[111,36,122,34],[111,37,123,9,"m"],[111,38,123,10],[111,42,124,10,"m"],[111,43,124,11],[111,44,124,12,"status"],[111,50,124,18],[111,55,124,23],[111,66,124,34],[111,70,125,10,"m"],[111,71,125,11],[111,72,125,12,"status"],[111,78,125,18],[111,83,125,23],[111,94,125,34],[111,98,126,11],[111,99,126,12,"m"],[111,100,126,13],[111,101,126,14,"status"],[111,107,126,20],[111,112,126,25],[111,122,126,35],[111,126,126,39,"m"],[111,127,126,40],[111,128,126,41,"status"],[111,134,126,47],[111,139,126,52],[111,150,126,63],[111,155,127,12,"m"],[111,156,127,13],[111,157,127,14,"proposed_time"],[111,170,127,27],[111,175,127,32],[111,179,127,36],[111,183,128,12,"m"],[111,184,128,13],[111,185,128,14,"proposed_time"],[111,198,128,27],[111,201,128,30,"now"],[111,204,129,6],[111,205,129,7],[112,10,131,6],[112,17,131,13],[113,12,131,15,"upcoming"],[113,20,131,23],[114,12,131,25,"past"],[115,10,131,30],[115,11,131,31],[116,8,132,4],[116,9,132,5],[117,8,132,5],[117,24,31,4,"queryFn"],[117,31,31,11,"queryFn"],[117,32,31,11],[118,10,31,11],[118,17,31,11,"_ref"],[118,21,31,11],[118,22,31,11,"apply"],[118,27,31,11],[118,34,31,11,"arguments"],[118,43,31,11],[119,8,31,11],[120,6,31,11],[121,4,133,2],[121,5,133,3],[121,6,133,4],[122,2,134,0],[122,3,134,1],[123,2,134,2,"_s"],[123,4,134,2],[123,5,28,6,"useMeetups"],[123,15,28,16],[124,4,28,16],[124,12,29,9,"useQuery"],[124,31,29,17],[124,32,29,17,"useQuery"],[124,40,29,17],[125,2,29,17],[126,2,136,0],[126,6,136,0,"_default"],[126,14,136,0],[126,17,136,15,"useMeetups"],[126,27,136,25],[127,0,136,26],[127,3]],"functionMap":{"names":["<global>","useMeetups","useQuery$argument_0.queryFn","data.filter$argument_0","userMeetups.map$argument_0","map$argument_0","enriched.filter$argument_0"],"mappings":"AAA;mBC2B;aCG;sCCyC;ODG;2CEK;OFG;8BGU,gBH;4DEG;OFgB;QIK;8DJE;QII;kCJK;KDI;CDE"},"hasCjsExports":false},"type":"js/module"}]}