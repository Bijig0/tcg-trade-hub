{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":55,"index":90}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":42,"index":133}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":134},"end":{"line":4,"column":43,"index":177}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[3], \"../../queryKeys\");\n  /**\n   * Subscribes to Supabase Realtime postgres_changes on the conversations table\n   * for a specific conversation ID. When the negotiation_status changes,\n   * invalidates the trade context query to reflect the new status.\n   */\n  var useNegotiationStatus = function useNegotiationStatus(conversationId) {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    (0, _react.useEffect)(function () {\n      if (!conversationId) return;\n      var channel = _libSupabase.supabase.channel(`conversation-status:${conversationId}`).on('postgres_changes', {\n        event: 'UPDATE',\n        schema: 'public',\n        table: 'conversations',\n        filter: `id=eq.${conversationId}`\n      }, function () {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.chatKeys.tradeContext(conversationId)\n        });\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.chatKeys.conversations()\n        });\n      }).subscribe();\n      return function () {\n        _libSupabase.supabase.removeChannel(channel);\n      };\n    }, [conversationId, queryClient]);\n  };\n  _s(useNegotiationStatus, \"aixO0mo1bdM1nWLRolCdKzppx/I=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient];\n  });\n  var _default = useNegotiationStatus;\n});","lineCount":50,"map":[[8,2,45,0,"Object"],[8,8,45,0],[8,9,45,0,"defineProperty"],[8,23,45,0],[8,24,45,0,"exports"],[8,31,45,0],[9,4,45,0,"enumerable"],[9,14,45,0],[10,4,45,0,"get"],[10,7,45,0],[10,18,45,0,"get"],[10,19,45,0],[11,6,45,0],[11,13,45,0,"_default"],[11,21,45,0],[12,4,45,0],[13,2,45,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_tanstackReactQuery"],[15,25,2,0],[15,28,2,0,"require"],[15,35,2,0],[15,36,2,0,"_dependencyMap"],[15,50,2,0],[16,2,3,0],[16,6,3,0,"_libSupabase"],[16,18,3,0],[16,21,3,0,"require"],[16,28,3,0],[16,29,3,0,"_dependencyMap"],[16,43,3,0],[17,2,4,0],[17,6,4,0,"_queryKeys"],[17,16,4,0],[17,19,4,0,"require"],[17,26,4,0],[17,27,4,0,"_dependencyMap"],[17,41,4,0],[18,2,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,2,12,0],[23,6,12,6,"useNegotiationStatus"],[23,26,12,26],[23,29,12,29],[23,38,12,6,"useNegotiationStatus"],[23,58,12,26,"useNegotiationStatus"],[23,59,12,30,"conversationId"],[23,73,12,52],[23,75,12,57],[24,4,12,57,"_s"],[24,6,12,57],[25,4,13,2],[25,8,13,8,"queryClient"],[25,19,13,19],[25,22,13,22],[25,26,13,22,"useQueryClient"],[25,45,13,36],[25,46,13,36,"useQueryClient"],[25,60,13,36],[25,62,13,37],[25,63,13,38],[26,4,15,2],[26,8,15,2,"useEffect"],[26,14,15,11],[26,15,15,11,"useEffect"],[26,24,15,11],[26,26,15,12],[26,38,15,18],[27,6,16,4],[27,10,16,8],[27,11,16,9,"conversationId"],[27,25,16,23],[27,27,16,25],[28,6,18,4],[28,10,18,10,"channel"],[28,17,18,17],[28,20,18,20,"supabase"],[28,32,18,28],[28,33,18,28,"supabase"],[28,41,18,28],[28,42,19,7,"channel"],[28,49,19,14],[28,50,19,15],[28,73,19,38,"conversationId"],[28,87,19,52],[28,89,19,54],[28,90,19,55],[28,91,20,7,"on"],[28,93,20,9],[28,94,21,8],[28,112,21,26],[28,114,22,8],[29,8,23,10,"event"],[29,13,23,15],[29,15,23,17],[29,23,23,25],[30,8,24,10,"schema"],[30,14,24,16],[30,16,24,18],[30,24,24,26],[31,8,25,10,"table"],[31,13,25,15],[31,15,25,17],[31,30,25,32],[32,8,26,10,"filter"],[32,14,26,16],[32,16,26,18],[32,25,26,27,"conversationId"],[32,39,26,41],[33,6,27,8],[33,7,27,9],[33,9,28,8],[33,21,28,14],[34,8,29,10,"queryClient"],[34,19,29,21],[34,20,29,22,"invalidateQueries"],[34,37,29,39],[34,38,29,40],[35,10,30,12,"queryKey"],[35,18,30,20],[35,20,30,22,"chatKeys"],[35,30,30,30],[35,31,30,30,"chatKeys"],[35,39,30,30],[35,40,30,31,"tradeContext"],[35,52,30,43],[35,53,30,44,"conversationId"],[35,67,30,58],[36,8,31,10],[36,9,31,11],[36,10,31,12],[37,8,32,10,"queryClient"],[37,19,32,21],[37,20,32,22,"invalidateQueries"],[37,37,32,39],[37,38,32,40],[38,10,33,12,"queryKey"],[38,18,33,20],[38,20,33,22,"chatKeys"],[38,30,33,30],[38,31,33,30,"chatKeys"],[38,39,33,30],[38,40,33,31,"conversations"],[38,53,33,44],[38,54,33,45],[39,8,34,10],[39,9,34,11],[39,10,34,12],[40,6,35,8],[40,7,36,6],[40,8,36,7],[40,9,37,7,"subscribe"],[40,18,37,16],[40,19,37,17],[40,20,37,18],[41,6,39,4],[41,13,39,11],[41,25,39,17],[42,8,40,6,"supabase"],[42,20,40,14],[42,21,40,14,"supabase"],[42,29,40,14],[42,30,40,15,"removeChannel"],[42,43,40,28],[42,44,40,29,"channel"],[42,51,40,36],[42,52,40,37],[43,6,41,4],[43,7,41,5],[44,4,42,2],[44,5,42,3],[44,7,42,5],[44,8,42,6,"conversationId"],[44,22,42,20],[44,24,42,22,"queryClient"],[44,35,42,33],[44,36,42,34],[44,37,42,35],[45,2,43,0],[45,3,43,1],[46,2,43,2,"_s"],[46,4,43,2],[46,5,12,6,"useNegotiationStatus"],[46,25,12,26],[47,4,12,26],[47,12,13,22,"useQueryClient"],[47,31,13,36],[47,32,13,36,"useQueryClient"],[47,46,13,36],[48,2,13,36],[49,2,45,0],[49,6,45,0,"_default"],[49,14,45,0],[49,17,45,15,"useNegotiationStatus"],[49,37,45,35],[50,0,45,36],[50,3]],"functionMap":{"names":["<global>","useNegotiationStatus","useEffect$argument_0","supabase.channel.on$argument_2","<anonymous>"],"mappings":"AAA;6BCW;YCG;QCa;SDO;WEI;KFE;GDC;CDC"},"hasCjsExports":false},"type":"js/module"}]}