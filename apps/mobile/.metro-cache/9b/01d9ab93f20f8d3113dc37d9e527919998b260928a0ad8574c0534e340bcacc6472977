{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  /**\n   * Normalizes offer notes from a CardOfferPayload, handling both\n   * new multi-author format (offering_notes/requesting_notes arrays)\n   * and legacy single-string format (offering_note/requesting_note/note).\n   *\n   * When legacy strings are found, they are wrapped into single-entry\n   * NoteEntry arrays using the provided fallback author info.\n   */\n  var normalizeOfferNotes = (payload, fallbackAuthor) => {\n    // New format takes precedence\n    if (payload.offering_notes || payload.requesting_notes) {\n      return {\n        offeringNotes: payload.offering_notes ?? [],\n        requestingNotes: payload.requesting_notes ?? []\n      };\n    }\n    var offeringNotes = [];\n    var requestingNotes = [];\n    var legacyOfferingNote = payload.offering_note ?? payload.note;\n    if (legacyOfferingNote?.trim()) {\n      offeringNotes.push({\n        author_id: fallbackAuthor?.id ?? 'unknown',\n        author_name: fallbackAuthor?.name ?? 'Unknown',\n        author_avatar_url: fallbackAuthor?.avatarUrl ?? null,\n        text: legacyOfferingNote.trim(),\n        created_at: new Date().toISOString()\n      });\n    }\n    if (payload.requesting_note?.trim()) {\n      requestingNotes.push({\n        author_id: fallbackAuthor?.id ?? 'unknown',\n        author_name: fallbackAuthor?.name ?? 'Unknown',\n        author_avatar_url: fallbackAuthor?.avatarUrl ?? null,\n        text: payload.requesting_note.trim(),\n        created_at: new Date().toISOString()\n      });\n    }\n    return {\n      offeringNotes,\n      requestingNotes\n    };\n  };\n  var _default = normalizeOfferNotes;\n});","lineCount":56,"map":[[7,2,61,0,"Object"],[7,8,61,0],[7,9,61,0,"defineProperty"],[7,23,61,0],[7,24,61,0,"exports"],[7,31,61,0],[8,4,61,0,"enumerable"],[8,14,61,0],[9,4,61,0,"get"],[9,7,61,0],[9,18,61,0,"get"],[9,19,61,0],[10,6,61,0],[10,13,61,0,"_default"],[10,21,61,0],[11,4,61,0],[12,2,61,0],[13,2,14,0],[14,0,15,0],[15,0,16,0],[16,0,17,0],[17,0,18,0],[18,0,19,0],[19,0,20,0],[20,0,21,0],[21,2,22,0],[21,6,22,6,"normalizeOfferNotes"],[21,25,22,25],[21,28,22,28,"normalizeOfferNotes"],[21,29,23,2,"payload"],[21,36,23,27],[21,38,24,2,"fallbackAuthor"],[21,52,24,33],[21,57,25,22],[22,4,26,2],[23,4,27,2],[23,8,27,6,"payload"],[23,15,27,13],[23,16,27,14,"offering_notes"],[23,30,27,28],[23,34,27,32,"payload"],[23,41,27,39],[23,42,27,40,"requesting_notes"],[23,58,27,56],[23,60,27,58],[24,6,28,4],[24,13,28,11],[25,8,29,6,"offeringNotes"],[25,21,29,19],[25,23,29,21,"payload"],[25,30,29,28],[25,31,29,29,"offering_notes"],[25,45,29,43],[25,49,29,47],[25,51,29,49],[26,8,30,6,"requestingNotes"],[26,23,30,21],[26,25,30,23,"payload"],[26,32,30,30],[26,33,30,31,"requesting_notes"],[26,49,30,47],[26,53,30,51],[27,6,31,4],[27,7,31,5],[28,4,32,2],[29,4,34,2],[29,8,34,8,"offeringNotes"],[29,21,34,34],[29,24,34,37],[29,26,34,39],[30,4,35,2],[30,8,35,8,"requestingNotes"],[30,23,35,36],[30,26,35,39],[30,28,35,41],[31,4,37,2],[31,8,37,8,"legacyOfferingNote"],[31,26,37,26],[31,29,37,29,"payload"],[31,36,37,36],[31,37,37,37,"offering_note"],[31,50,37,50],[31,54,37,54,"payload"],[31,61,37,61],[31,62,37,62,"note"],[31,66,37,66],[32,4,38,2],[32,8,38,6,"legacyOfferingNote"],[32,26,38,24],[32,28,38,26,"trim"],[32,32,38,30],[32,33,38,31],[32,34,38,32],[32,36,38,34],[33,6,39,4,"offeringNotes"],[33,19,39,17],[33,20,39,18,"push"],[33,24,39,22],[33,25,39,23],[34,8,40,6,"author_id"],[34,17,40,15],[34,19,40,17,"fallbackAuthor"],[34,33,40,31],[34,35,40,33,"id"],[34,37,40,35],[34,41,40,39],[34,50,40,48],[35,8,41,6,"author_name"],[35,19,41,17],[35,21,41,19,"fallbackAuthor"],[35,35,41,33],[35,37,41,35,"name"],[35,41,41,39],[35,45,41,43],[35,54,41,52],[36,8,42,6,"author_avatar_url"],[36,25,42,23],[36,27,42,25,"fallbackAuthor"],[36,41,42,39],[36,43,42,41,"avatarUrl"],[36,52,42,50],[36,56,42,54],[36,60,42,58],[37,8,43,6,"text"],[37,12,43,10],[37,14,43,12,"legacyOfferingNote"],[37,32,43,30],[37,33,43,31,"trim"],[37,37,43,35],[37,38,43,36],[37,39,43,37],[38,8,44,6,"created_at"],[38,18,44,16],[38,20,44,18],[38,24,44,22,"Date"],[38,28,44,26],[38,29,44,27],[38,30,44,28],[38,31,44,29,"toISOString"],[38,42,44,40],[38,43,44,41],[39,6,45,4],[39,7,45,5],[39,8,45,6],[40,4,46,2],[41,4,48,2],[41,8,48,6,"payload"],[41,15,48,13],[41,16,48,14,"requesting_note"],[41,31,48,29],[41,33,48,31,"trim"],[41,37,48,35],[41,38,48,36],[41,39,48,37],[41,41,48,39],[42,6,49,4,"requestingNotes"],[42,21,49,19],[42,22,49,20,"push"],[42,26,49,24],[42,27,49,25],[43,8,50,6,"author_id"],[43,17,50,15],[43,19,50,17,"fallbackAuthor"],[43,33,50,31],[43,35,50,33,"id"],[43,37,50,35],[43,41,50,39],[43,50,50,48],[44,8,51,6,"author_name"],[44,19,51,17],[44,21,51,19,"fallbackAuthor"],[44,35,51,33],[44,37,51,35,"name"],[44,41,51,39],[44,45,51,43],[44,54,51,52],[45,8,52,6,"author_avatar_url"],[45,25,52,23],[45,27,52,25,"fallbackAuthor"],[45,41,52,39],[45,43,52,41,"avatarUrl"],[45,52,52,50],[45,56,52,54],[45,60,52,58],[46,8,53,6,"text"],[46,12,53,10],[46,14,53,12,"payload"],[46,21,53,19],[46,22,53,20,"requesting_note"],[46,37,53,35],[46,38,53,36,"trim"],[46,42,53,40],[46,43,53,41],[46,44,53,42],[47,8,54,6,"created_at"],[47,18,54,16],[47,20,54,18],[47,24,54,22,"Date"],[47,28,54,26],[47,29,54,27],[47,30,54,28],[47,31,54,29,"toISOString"],[47,42,54,40],[47,43,54,41],[48,6,55,4],[48,7,55,5],[48,8,55,6],[49,4,56,2],[50,4,58,2],[50,11,58,9],[51,6,58,11,"offeringNotes"],[51,19,58,24],[52,6,58,26,"requestingNotes"],[53,4,58,42],[53,5,58,43],[54,2,59,0],[54,3,59,1],[55,2,61,0],[55,6,61,0,"_default"],[55,14,61,0],[55,17,61,15,"normalizeOfferNotes"],[55,36,61,34],[56,0,61,35],[56,3]],"functionMap":{"names":["<global>","normalizeOfferNotes"],"mappings":"AAA;4BCqB;CDqC"},"hasCjsExports":false},"type":"js/module"}]}