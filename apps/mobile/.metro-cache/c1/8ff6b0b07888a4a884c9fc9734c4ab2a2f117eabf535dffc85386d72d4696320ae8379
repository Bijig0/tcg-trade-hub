{"dependencies":[{"name":"@babel/runtime/helpers/toConsumableArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kiCFfIx1MWoD4noR0gEoyrFAUKE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":46,"index":139}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersToConsumableArray = require(_dependencyMap[0], \"@babel/runtime/helpers/toConsumableArray\");\n  var _toConsumableArray = _interopDefault(_babelRuntimeHelpersToConsumableArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[2], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  /**\n   * Hook that fetches all ratings for a given user.\n   *\n   * Returns each rating with the rater's display name, score,\n   * optional comment, and date.\n   */\n  var useUserRatings = function useUserRatings(userId) {\n    _s();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.profileKeys.ratings(userId),\n      queryFn: function () {\n        var _queryFn = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('ratings').select('id, score, comment, created_at, rater_id').eq('ratee_id', userId).order('created_at', {\n              ascending: false\n            }),\n            ratings = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!ratings || ratings.length === 0) return [];\n\n          // Resolve rater display names\n          var raterIds = (0, _toConsumableArray.default)(new Set(ratings.map(function (r) {\n            return r.rater_id;\n          })));\n          var _yield$supabase$from$2 = yield _libSupabase.supabase.from('users').select('id, display_name').in('id', raterIds),\n            raters = _yield$supabase$from$2.data;\n          var ratersMap = new Map((raters != null ? raters : []).map(function (r) {\n            return [r.id, r.display_name];\n          }));\n          return ratings.map(function (r) {\n            var _ratersMap$get;\n            return {\n              id: r.id,\n              score: r.score,\n              comment: r.comment,\n              created_at: r.created_at,\n              rater_display_name: (_ratersMap$get = ratersMap.get(r.rater_id)) != null ? _ratersMap$get : 'Unknown'\n            };\n          });\n        });\n        function queryFn() {\n          return _queryFn.apply(this, arguments);\n        }\n        return queryFn;\n      }(),\n      enabled: !!userId\n    });\n  };\n  _s(useUserRatings, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  var _default = useUserRatings;\n});","lineCount":78,"map":[[13,2,53,0,"Object"],[13,8,53,0],[13,9,53,0,"defineProperty"],[13,23,53,0],[13,24,53,0,"exports"],[13,31,53,0],[14,4,53,0,"enumerable"],[14,14,53,0],[15,4,53,0,"get"],[15,7,53,0],[15,18,53,0,"get"],[15,19,53,0],[16,6,53,0],[16,13,53,0,"_default"],[16,21,53,0],[17,4,53,0],[18,2,53,0],[19,2,53,30],[19,6,53,30,"_babelRuntimeHelpersToConsumableArray"],[19,43,53,30],[19,46,53,30,"require"],[19,53,53,30],[19,54,53,30,"_dependencyMap"],[19,68,53,30],[20,2,53,30],[20,6,53,30,"_toConsumableArray"],[20,24,53,30],[20,27,53,30,"_interopDefault"],[20,42,53,30],[20,43,53,30,"_babelRuntimeHelpersToConsumableArray"],[20,80,53,30],[21,2,53,30],[21,6,53,30,"_babelRuntimeHelpersAsyncToGenerator"],[21,42,53,30],[21,45,53,30,"require"],[21,52,53,30],[21,53,53,30,"_dependencyMap"],[21,67,53,30],[22,2,53,30],[22,6,53,30,"_asyncToGenerator"],[22,23,53,30],[22,26,53,30,"_interopDefault"],[22,41,53,30],[22,42,53,30,"_babelRuntimeHelpersAsyncToGenerator"],[22,78,53,30],[23,2,1,0],[23,6,1,0,"_tanstackReactQuery"],[23,25,1,0],[23,28,1,0,"require"],[23,35,1,0],[23,36,1,0,"_dependencyMap"],[23,50,1,0],[24,2,2,0],[24,6,2,0,"_libSupabase"],[24,18,2,0],[24,21,2,0,"require"],[24,28,2,0],[24,29,2,0,"_dependencyMap"],[24,43,2,0],[25,2,3,0],[25,6,3,0,"_queryKeys"],[25,16,3,0],[25,19,3,0,"require"],[25,26,3,0],[25,27,3,0,"_dependencyMap"],[25,41,3,0],[26,2,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,0,18,0],[32,2,19,0],[32,6,19,6,"useUserRatings"],[32,20,19,20],[32,23,19,23],[32,32,19,6,"useUserRatings"],[32,46,19,20,"useUserRatings"],[32,47,19,24,"userId"],[32,53,19,38],[32,55,19,43],[33,4,19,43,"_s"],[33,6,19,43],[34,4,20,2],[34,11,20,9],[34,15,20,9,"useQuery"],[34,34,20,17],[34,35,20,17,"useQuery"],[34,43,20,17],[34,45,20,39],[35,6,21,4,"queryKey"],[35,14,21,12],[35,16,21,14,"profileKeys"],[35,26,21,25],[35,27,21,25,"profileKeys"],[35,38,21,25],[35,39,21,26,"ratings"],[35,46,21,33],[35,47,21,34,"userId"],[35,53,21,40],[35,54,21,41],[36,6,22,4,"queryFn"],[36,13,22,11],[37,8,22,11],[37,12,22,11,"_queryFn"],[37,20,22,11],[37,27,22,11,"_asyncToGenerator"],[37,44,22,11],[37,45,22,11,"default"],[37,52,22,11],[37,54,22,13],[37,67,22,25],[38,10,23,6],[38,14,23,6,"_yield$supabase$from$"],[38,35,23,6],[38,44,23,45,"supabase"],[38,56,23,53],[38,57,23,53,"supabase"],[38,65,23,53],[38,66,24,9,"from"],[38,70,24,13],[38,71,24,14],[38,80,24,23],[38,81,24,24],[38,82,25,9,"select"],[38,88,25,15],[38,89,25,16],[38,131,25,58],[38,132,25,59],[38,133,26,9,"eq"],[38,135,26,11],[38,136,26,12],[38,146,26,22],[38,148,26,24,"userId"],[38,154,26,30],[38,155,26,31],[38,156,27,9,"order"],[38,161,27,14],[38,162,27,15],[38,174,27,27],[38,176,27,29],[39,14,27,31,"ascending"],[39,23,27,40],[39,25,27,42],[40,12,27,48],[40,13,27,49],[40,14,27,50],[41,12,23,20,"ratings"],[41,19,23,27],[41,22,23,27,"_yield$supabase$from$"],[41,43,23,27],[41,44,23,14,"data"],[41,48,23,18],[42,12,23,29,"error"],[42,17,23,34],[42,20,23,34,"_yield$supabase$from$"],[42,41,23,34],[42,42,23,29,"error"],[42,47,23,34],[43,10,29,6],[43,14,29,10,"error"],[43,19,29,15],[43,21,29,17],[43,27,29,23,"error"],[43,32,29,28],[44,10,30,6],[44,14,30,10],[44,15,30,11,"ratings"],[44,22,30,18],[44,26,30,22,"ratings"],[44,33,30,29],[44,34,30,30,"length"],[44,40,30,36],[44,45,30,41],[44,46,30,42],[44,48,30,44],[44,55,30,51],[44,57,30,53],[46,10,32,6],[47,10,33,6],[47,14,33,12,"raterIds"],[47,22,33,20],[47,29,33,20,"_toConsumableArray"],[47,47,33,20],[47,48,33,20,"default"],[47,55,33,20],[47,57,33,27],[47,61,33,31,"Set"],[47,64,33,34],[47,65,33,35,"ratings"],[47,72,33,42],[47,73,33,43,"map"],[47,76,33,46],[47,77,33,47],[47,87,33,48,"r"],[47,88,33,49],[48,12,33,49],[48,19,33,54,"r"],[48,20,33,55],[48,21,33,56,"rater_id"],[48,29,33,64],[49,10,33,64],[49,12,33,65],[49,13,33,66],[49,14,33,67],[50,10,34,6],[50,14,34,6,"_yield$supabase$from$2"],[50,36,34,6],[50,45,34,37,"supabase"],[50,57,34,45],[50,58,34,45,"supabase"],[50,66,34,45],[50,67,35,9,"from"],[50,71,35,13],[50,72,35,14],[50,79,35,21],[50,80,35,22],[50,81,36,9,"select"],[50,87,36,15],[50,88,36,16],[50,106,36,34],[50,107,36,35],[50,108,37,9,"in"],[50,110,37,11],[50,111,37,12],[50,115,37,16],[50,117,37,18,"raterIds"],[50,125,37,26],[50,126,37,27],[51,12,34,20,"raters"],[51,18,34,26],[51,21,34,26,"_yield$supabase$from$2"],[51,43,34,26],[51,44,34,14,"data"],[51,48,34,18],[52,10,39,6],[52,14,39,12,"ratersMap"],[52,23,39,21],[52,26,39,24],[52,30,39,28,"Map"],[52,33,39,31],[52,34,39,32],[52,35,39,33,"raters"],[52,41,39,39],[52,52,39,33,"raters"],[52,58,39,39],[52,61,39,43],[52,63,39,45],[52,65,39,47,"map"],[52,68,39,50],[52,69,39,51],[52,79,39,52,"r"],[52,80,39,53],[53,12,39,53],[53,19,39,58],[53,20,39,59,"r"],[53,21,39,60],[53,22,39,61,"id"],[53,24,39,63],[53,26,39,65,"r"],[53,27,39,66],[53,28,39,67,"display_name"],[53,40,39,79],[53,41,39,80],[54,10,39,80],[54,12,39,81],[54,13,39,82],[55,10,41,6],[55,17,41,13,"ratings"],[55,24,41,20],[55,25,41,21,"map"],[55,28,41,24],[55,29,41,25],[55,39,41,26,"r"],[55,40,41,27],[56,12,41,27],[56,16,41,27,"_ratersMap$get"],[56,30,41,27],[57,12,41,27],[57,19,41,33],[58,14,42,8,"id"],[58,16,42,10],[58,18,42,12,"r"],[58,19,42,13],[58,20,42,14,"id"],[58,22,42,16],[59,14,43,8,"score"],[59,19,43,13],[59,21,43,15,"r"],[59,22,43,16],[59,23,43,17,"score"],[59,28,43,22],[60,14,44,8,"comment"],[60,21,44,15],[60,23,44,17,"r"],[60,24,44,18],[60,25,44,19,"comment"],[60,32,44,26],[61,14,45,8,"created_at"],[61,24,45,18],[61,26,45,20,"r"],[61,27,45,21],[61,28,45,22,"created_at"],[61,38,45,32],[62,14,46,8,"rater_display_name"],[62,32,46,26],[62,35,46,26,"_ratersMap$get"],[62,49,46,26],[62,52,46,28,"ratersMap"],[62,61,46,37],[62,62,46,38,"get"],[62,65,46,41],[62,66,46,42,"r"],[62,67,46,43],[62,68,46,44,"rater_id"],[62,76,46,52],[62,77,46,53],[62,89,46,53,"_ratersMap$get"],[62,103,46,53],[62,106,46,57],[63,12,47,6],[63,13,47,7],[64,10,47,7],[64,11,47,8],[64,12,47,9],[65,8,48,4],[65,9,48,5],[66,8,48,5],[66,17,22,4,"queryFn"],[66,24,22,11,"queryFn"],[66,25,22,11],[67,10,22,11],[67,17,22,11,"_queryFn"],[67,25,22,11],[67,26,22,11,"apply"],[67,31,22,11],[67,38,22,11,"arguments"],[67,47,22,11],[68,8,22,11],[69,8,22,11],[69,15,22,4,"queryFn"],[69,22,22,11],[70,6,22,11],[70,9,48,5],[71,6,49,4,"enabled"],[71,13,49,11],[71,15,49,13],[71,16,49,14],[71,17,49,15,"userId"],[72,4,50,2],[72,5,50,3],[72,6,50,4],[73,2,51,0],[73,3,51,1],[74,2,51,2,"_s"],[74,4,51,2],[74,5,19,6,"useUserRatings"],[74,19,19,20],[75,4,19,20],[75,12,20,9,"useQuery"],[75,31,20,17],[75,32,20,17,"useQuery"],[75,40,20,17],[76,2,20,17],[77,2,53,0],[77,6,53,0,"_default"],[77,14,53,0],[77,17,53,15,"useUserRatings"],[77,31,53,29],[78,0,53,30],[78,3]],"functionMap":{"names":["<global>","useUserRatings","useQuery$argument_0.queryFn","ratings.map$argument_0","map$argument_0"],"mappings":"AAA;uBCkB;aCG;+CCW,iBD;mDEM,6BF;yBCE;QDM;KDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}