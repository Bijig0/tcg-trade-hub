{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":45,"index":195}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _reactNative = require(_dependencyMap[2]);\n  var _libSupabase = require(_dependencyMap[3]);\n  var _queryKeys = require(_dependencyMap[4]);\n  /**\n   * Hook that undoes a meetup completion via atomic Postgres RPC.\n   *\n   * Resets the current user's completion flag. Only allowed while the\n   * meetup is still in `confirmed` status (the other party hasn't\n   * completed yet). Once both complete, finalization is irreversible.\n   */\n  var useUncompleteMeetup = () => {\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var meetupId = _ref.meetupId;\n          var _yield$supabase$auth$ = yield _libSupabase.supabase.auth.getSession(),\n            session = _yield$supabase$auth$.data.session;\n          var userId = session?.user?.id;\n          if (!userId) throw new Error('Not authenticated');\n          var _yield$supabase$rpc = yield _libSupabase.supabase.rpc('uncomplete_meetup_v1', {\n              p_meetup_id: meetupId,\n              p_user_id: userId\n            }),\n            data = _yield$supabase$rpc.data,\n            error = _yield$supabase$rpc.error;\n          if (error) throw error;\n          if (!data) throw new Error('No response from uncomplete_meetup_v1');\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: data => {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.detail(data.meetup_id)\n        });\n      },\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to undo completion');\n      }\n    });\n  };\n  var _default = useUncompleteMeetup;\n});","lineCount":69,"map":[[12,2,54,0,"Object"],[12,8,54,0],[12,9,54,0,"defineProperty"],[12,23,54,0],[12,24,54,0,"exports"],[12,31,54,0],[13,4,54,0,"enumerable"],[13,14,54,0],[14,4,54,0,"get"],[14,7,54,0],[14,18,54,0,"get"],[14,19,54,0],[15,6,54,0],[15,13,54,0,"_default"],[15,21,54,0],[16,4,54,0],[17,2,54,0],[18,2,54,35],[18,6,54,35,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,54,35],[18,45,54,35,"require"],[18,52,54,35],[18,53,54,35,"_dependencyMap"],[18,67,54,35],[19,2,54,35],[19,6,54,35,"_asyncToGenerator"],[19,23,54,35],[19,26,54,35,"_interopDefault"],[19,41,54,35],[19,42,54,35,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,54,35],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_reactNative"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_libSupabase"],[22,18,3,0],[22,21,3,0,"require"],[22,28,3,0],[22,29,3,0,"_dependencyMap"],[22,43,3,0],[23,2,4,0],[23,6,4,0,"_queryKeys"],[23,16,4,0],[23,19,4,0,"require"],[23,26,4,0],[23,27,4,0,"_dependencyMap"],[23,41,4,0],[24,2,15,0],[25,0,16,0],[26,0,17,0],[27,0,18,0],[28,0,19,0],[29,0,20,0],[30,0,21,0],[31,2,22,0],[31,6,22,6,"useUncompleteMeetup"],[31,25,22,25],[31,28,22,28,"useUncompleteMeetup"],[31,29,22,28],[31,34,22,34],[32,4,23,2],[32,8,23,8,"queryClient"],[32,19,23,19],[32,22,23,22],[32,26,23,22,"useQueryClient"],[32,45,23,36],[32,46,23,36,"useQueryClient"],[32,60,23,36],[32,62,23,37],[32,63,23,38],[33,4,25,2],[33,11,25,9],[33,15,25,9,"useMutation"],[33,34,25,20],[33,35,25,20,"useMutation"],[33,46,25,20],[33,48,25,21],[34,6,26,4,"mutationFn"],[34,16,26,14],[35,8,26,14],[35,12,26,14,"_ref2"],[35,17,26,14],[35,24,26,14,"_asyncToGenerator"],[35,41,26,14],[35,42,26,14,"default"],[35,49,26,14],[35,51,26,16],[35,62,26,16,"_ref"],[35,66,26,16],[35,68,26,64],[36,10,26,64],[36,14,26,25,"meetupId"],[36,22,26,33],[36,25,26,33,"_ref"],[36,29,26,33],[36,30,26,25,"meetupId"],[36,38,26,33],[37,10,27,6],[37,14,27,6,"_yield$supabase$auth$"],[37,35,27,6],[37,44,29,16,"supabase"],[37,56,29,24],[37,57,29,24,"supabase"],[37,65,29,24],[37,66,29,25,"auth"],[37,70,29,29],[37,71,29,30,"getSession"],[37,81,29,40],[37,82,29,41],[37,83,29,42],[38,12,28,16,"session"],[38,19,28,23],[38,22,28,23,"_yield$supabase$auth$"],[38,43,28,23],[38,44,28,8,"data"],[38,48,28,12],[38,49,28,16,"session"],[38,56,28,23],[39,10,30,6],[39,14,30,12,"userId"],[39,20,30,18],[39,23,30,21,"session"],[39,30,30,28],[39,32,30,30,"user"],[39,36,30,34],[39,38,30,36,"id"],[39,40,30,38],[40,10,32,6],[40,14,32,10],[40,15,32,11,"userId"],[40,21,32,17],[40,23,32,19],[40,29,32,25],[40,33,32,29,"Error"],[40,38,32,34],[40,39,32,35],[40,58,32,54],[40,59,32,55],[41,10,34,6],[41,14,34,6,"_yield$supabase$rpc"],[41,33,34,6],[41,42,34,36,"supabase"],[41,54,34,44],[41,55,34,44,"supabase"],[41,63,34,44],[41,64,34,45,"rpc"],[41,67,34,48],[41,68,34,49],[41,90,34,71],[41,92,34,73],[42,14,35,8,"p_meetup_id"],[42,25,35,19],[42,27,35,21,"meetupId"],[42,35,35,29],[43,14,36,8,"p_user_id"],[43,23,36,17],[43,25,36,19,"userId"],[44,12,37,6],[44,13,37,7],[44,14,37,8],[45,12,34,14,"data"],[45,16,34,18],[45,19,34,18,"_yield$supabase$rpc"],[45,38,34,18],[45,39,34,14,"data"],[45,43,34,18],[46,12,34,20,"error"],[46,17,34,25],[46,20,34,25,"_yield$supabase$rpc"],[46,39,34,25],[46,40,34,20,"error"],[46,45,34,25],[47,10,39,6],[47,14,39,10,"error"],[47,19,39,15],[47,21,39,17],[47,27,39,23,"error"],[47,32,39,28],[48,10,40,6],[48,14,40,10],[48,15,40,11,"data"],[48,19,40,15],[48,21,40,17],[48,27,40,23],[48,31,40,27,"Error"],[48,36,40,32],[48,37,40,33],[48,76,40,72],[48,77,40,73],[49,10,42,6],[49,17,42,13,"data"],[49,21,42,17],[50,8,43,4],[50,9,43,5],[51,8,43,5],[51,24,26,4,"mutationFn"],[51,34,26,14,"mutationFn"],[51,35,26,14,"_x"],[51,37,26,14],[52,10,26,14],[52,17,26,14,"_ref2"],[52,22,26,14],[52,23,26,14,"apply"],[52,28,26,14],[52,35,26,14,"arguments"],[52,44,26,14],[53,8,26,14],[54,6,26,14],[54,9,43,5],[55,6,44,4,"onSuccess"],[55,15,44,13],[55,17,44,16,"data"],[55,21,44,20],[55,25,44,25],[56,8,45,6,"queryClient"],[56,19,45,17],[56,20,45,18,"invalidateQueries"],[56,37,45,35],[56,38,45,36],[57,10,45,38,"queryKey"],[57,18,45,46],[57,20,45,48,"meetupKeys"],[57,30,45,58],[57,31,45,58,"meetupKeys"],[57,41,45,58],[57,42,45,59,"all"],[58,8,45,63],[58,9,45,64],[58,10,45,65],[59,8,46,6,"queryClient"],[59,19,46,17],[59,20,46,18,"invalidateQueries"],[59,37,46,35],[59,38,46,36],[60,10,46,38,"queryKey"],[60,18,46,46],[60,20,46,48,"meetupKeys"],[60,30,46,58],[60,31,46,58,"meetupKeys"],[60,41,46,58],[60,42,46,59,"detail"],[60,48,46,65],[60,49,46,66,"data"],[60,53,46,70],[60,54,46,71,"meetup_id"],[60,63,46,80],[61,8,46,82],[61,9,46,83],[61,10,46,84],[62,6,47,4],[62,7,47,5],[63,6,48,4,"onError"],[63,13,48,11],[63,15,48,14,"error"],[63,20,48,26],[63,24,48,31],[64,8,49,6,"Alert"],[64,20,49,11],[64,21,49,11,"Alert"],[64,26,49,11],[64,27,49,12,"alert"],[64,32,49,17],[64,33,49,18],[64,40,49,25],[64,42,49,27,"error"],[64,47,49,32],[64,48,49,33,"message"],[64,55,49,40],[64,59,49,44],[64,86,49,71],[64,87,49,72],[65,6,50,4],[66,4,51,2],[66,5,51,3],[66,6,51,4],[67,2,52,0],[67,3,52,1],[68,2,54,0],[68,6,54,0,"_default"],[68,14,54,0],[68,17,54,15,"useUncompleteMeetup"],[68,36,54,34],[69,0,54,35],[69,3]],"functionMap":{"names":["<global>","useUncompleteMeetup","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;4BCqB;gBCI;KDiB;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}