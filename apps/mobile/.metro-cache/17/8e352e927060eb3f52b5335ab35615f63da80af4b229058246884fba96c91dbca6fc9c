{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-updates","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":16,"index":727},"end":{"line":22,"column":39,"index":750}}],"key":"sQsauHA5DNzHLms5+mQxP53QDg8=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var POLL_INTERVAL_MS = 10_000;\n\n  /**\n   * Polls for OTA updates and auto-reloads the app when one is found.\n   * Designed for live development: Claude pushes an EAS update via a stop hook,\n   * and this hook picks it up within seconds and seamlessly reloads.\n   *\n   * Returns `{ isUpdating }` so the layout can show a visual overlay.\n   * Only active in non-dev mode (i.e., preview/production builds not connected to Metro).\n   */\n  var useAutoUpdate = () => {\n    _s();\n    var checking = (0, _react.useRef)(false);\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isUpdating = _useState2[0],\n      setIsUpdating = _useState2[1];\n    (0, _react.useEffect)(() => {\n      if (__DEV__) return;\n      var Updates = null;\n      try {\n        Updates = require(_dependencyMap[3], \"expo-updates\");\n      } catch {\n        return;\n      }\n      var poll = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          if (checking.current || !Updates) return;\n          checking.current = true;\n          try {\n            var result = yield Updates.checkForUpdateAsync();\n            if (!result.isAvailable) {\n              checking.current = false;\n              return;\n            }\n            console.log('[AutoUpdate] Update found, downloading...');\n            yield Updates.fetchUpdateAsync();\n            console.log('[AutoUpdate] Downloaded, reloading...');\n            setIsUpdating(true);\n            // Brief delay so the overlay renders before reload\n            yield new Promise(resolve => setTimeout(resolve, 400));\n            yield Updates.reloadAsync();\n          } catch (error) {\n            // Silent fail â€” will retry on next poll\n            console.warn('[AutoUpdate] Check failed:', error);\n            checking.current = false;\n            setIsUpdating(false);\n          }\n        });\n        return function poll() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      // Initial check after a short delay\n      var initialTimeout = setTimeout(poll, 3_000);\n      // Then poll on interval\n      var interval = setInterval(poll, POLL_INTERVAL_MS);\n      return () => {\n        clearTimeout(initialTimeout);\n        clearInterval(interval);\n      };\n    }, []);\n    return {\n      isUpdating\n    };\n  };\n  _s(useAutoUpdate, \"0j3FlZ/Kvfmk6u/tOZoSRtRAEl4=\");\n  var _default = useAutoUpdate;\n});","lineCount":93,"map":[[13,2,68,0,"Object"],[13,8,68,0],[13,9,68,0,"defineProperty"],[13,23,68,0],[13,24,68,0,"exports"],[13,31,68,0],[14,4,68,0,"enumerable"],[14,14,68,0],[15,4,68,0,"get"],[15,7,68,0],[15,18,68,0,"get"],[15,19,68,0],[16,6,68,0],[16,13,68,0,"_default"],[16,21,68,0],[17,4,68,0],[18,2,68,0],[19,2,68,29],[19,6,68,29,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,68,29],[19,45,68,29,"require"],[19,52,68,29],[19,53,68,29,"_dependencyMap"],[19,67,68,29],[20,2,68,29],[20,6,68,29,"_asyncToGenerator"],[20,23,68,29],[20,26,68,29,"_interopDefault"],[20,41,68,29],[20,42,68,29,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,68,29],[21,2,68,29],[21,6,68,29,"_babelRuntimeHelpersSlicedToArray"],[21,39,68,29],[21,42,68,29,"require"],[21,49,68,29],[21,50,68,29,"_dependencyMap"],[21,64,68,29],[22,2,68,29],[22,6,68,29,"_slicedToArray"],[22,20,68,29],[22,23,68,29,"_interopDefault"],[22,38,68,29],[22,39,68,29,"_babelRuntimeHelpersSlicedToArray"],[22,72,68,29],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,3,0],[24,6,3,6,"POLL_INTERVAL_MS"],[24,22,3,22],[24,25,3,25],[24,31,3,31],[26,2,5,0],[27,0,6,0],[28,0,7,0],[29,0,8,0],[30,0,9,0],[31,0,10,0],[32,0,11,0],[33,0,12,0],[34,2,13,0],[34,6,13,6,"useAutoUpdate"],[34,19,13,19],[34,22,13,22,"useAutoUpdate"],[34,23,13,22],[34,28,13,28],[35,4,13,28,"_s"],[35,6,13,28],[36,4,14,2],[36,8,14,8,"checking"],[36,16,14,16],[36,19,14,19],[36,23,14,19,"useRef"],[36,29,14,25],[36,30,14,25,"useRef"],[36,36,14,25],[36,38,14,26],[36,43,14,31],[36,44,14,32],[37,4,15,2],[37,8,15,2,"_useState"],[37,17,15,2],[37,20,15,38],[37,24,15,38,"useState"],[37,30,15,46],[37,31,15,46,"useState"],[37,39,15,46],[37,41,15,47],[37,46,15,52],[37,47,15,53],[38,6,15,53,"_useState2"],[38,16,15,53],[38,23,15,53,"_slicedToArray"],[38,37,15,53],[38,38,15,53,"default"],[38,45,15,53],[38,47,15,53,"_useState"],[38,56,15,53],[39,6,15,9,"isUpdating"],[39,16,15,19],[39,19,15,19,"_useState2"],[39,29,15,19],[40,6,15,21,"setIsUpdating"],[40,19,15,34],[40,22,15,34,"_useState2"],[40,32,15,34],[41,4,17,2],[41,8,17,2,"useEffect"],[41,14,17,11],[41,15,17,11,"useEffect"],[41,24,17,11],[41,26,17,12],[41,32,17,18],[42,6,18,4],[42,10,18,8,"__DEV__"],[42,17,18,15],[42,19,18,17],[43,6,20,4],[43,10,20,8,"Updates"],[43,17,20,53],[43,20,20,56],[43,24,20,60],[44,6,21,4],[44,10,21,8],[45,8,22,6,"Updates"],[45,15,22,13],[45,18,22,16,"require"],[45,25,22,23],[45,26,22,23,"_dependencyMap"],[45,40,22,23],[45,59,22,38],[45,60,22,72],[46,6,23,4],[46,7,23,5],[46,8,23,6],[46,14,23,12],[47,8,24,6],[48,6,25,4],[49,6,27,4],[49,10,27,10,"poll"],[49,14,27,14],[50,8,27,14],[50,12,27,14,"_ref"],[50,16,27,14],[50,23,27,14,"_asyncToGenerator"],[50,40,27,14],[50,41,27,14,"default"],[50,48,27,14],[50,50,27,17],[50,63,27,29],[51,10,28,6],[51,14,28,10,"checking"],[51,22,28,18],[51,23,28,19,"current"],[51,30,28,26],[51,34,28,30],[51,35,28,31,"Updates"],[51,42,28,38],[51,44,28,40],[52,10,29,6,"checking"],[52,18,29,14],[52,19,29,15,"current"],[52,26,29,22],[52,29,29,25],[52,33,29,29],[53,10,31,6],[53,14,31,10],[54,12,32,8],[54,16,32,14,"result"],[54,22,32,20],[54,31,32,29,"Updates"],[54,38,32,36],[54,39,32,37,"checkForUpdateAsync"],[54,58,32,56],[54,59,32,57],[54,60,32,58],[55,12,33,8],[55,16,33,12],[55,17,33,13,"result"],[55,23,33,19],[55,24,33,20,"isAvailable"],[55,35,33,31],[55,37,33,33],[56,14,34,10,"checking"],[56,22,34,18],[56,23,34,19,"current"],[56,30,34,26],[56,33,34,29],[56,38,34,34],[57,14,35,10],[58,12,36,8],[59,12,38,8,"console"],[59,19,38,15],[59,20,38,16,"log"],[59,23,38,19],[59,24,38,20],[59,67,38,63],[59,68,38,64],[60,12,39,8],[60,18,39,14,"Updates"],[60,25,39,21],[60,26,39,22,"fetchUpdateAsync"],[60,42,39,38],[60,43,39,39],[60,44,39,40],[61,12,40,8,"console"],[61,19,40,15],[61,20,40,16,"log"],[61,23,40,19],[61,24,40,20],[61,63,40,59],[61,64,40,60],[62,12,42,8,"setIsUpdating"],[62,25,42,21],[62,26,42,22],[62,30,42,26],[62,31,42,27],[63,12,43,8],[64,12,44,8],[64,18,44,14],[64,22,44,18,"Promise"],[64,29,44,25],[64,30,44,27,"resolve"],[64,37,44,34],[64,41,44,39,"setTimeout"],[64,51,44,49],[64,52,44,50,"resolve"],[64,59,44,57],[64,61,44,59],[64,64,44,62],[64,65,44,63],[64,66,44,64],[65,12,45,8],[65,18,45,14,"Updates"],[65,25,45,21],[65,26,45,22,"reloadAsync"],[65,37,45,33],[65,38,45,34],[65,39,45,35],[66,10,46,6],[66,11,46,7],[66,12,46,8],[66,19,46,15,"error"],[66,24,46,20],[66,26,46,22],[67,12,47,8],[68,12,48,8,"console"],[68,19,48,15],[68,20,48,16,"warn"],[68,24,48,20],[68,25,48,21],[68,53,48,49],[68,55,48,51,"error"],[68,60,48,56],[68,61,48,57],[69,12,49,8,"checking"],[69,20,49,16],[69,21,49,17,"current"],[69,28,49,24],[69,31,49,27],[69,36,49,32],[70,12,50,8,"setIsUpdating"],[70,25,50,21],[70,26,50,22],[70,31,50,27],[70,32,50,28],[71,10,51,6],[72,8,52,4],[72,9,52,5],[73,8,52,5],[73,24,27,10,"poll"],[73,28,27,14,"poll"],[73,29,27,14],[74,10,27,14],[74,17,27,14,"_ref"],[74,21,27,14],[74,22,27,14,"apply"],[74,27,27,14],[74,34,27,14,"arguments"],[74,43,27,14],[75,8,27,14],[76,6,27,14],[76,9,52,5],[78,6,54,4],[79,6,55,4],[79,10,55,10,"initialTimeout"],[79,24,55,24],[79,27,55,27,"setTimeout"],[79,37,55,37],[79,38,55,38,"poll"],[79,42,55,42],[79,44,55,44],[79,49,55,49],[79,50,55,50],[80,6,56,4],[81,6,57,4],[81,10,57,10,"interval"],[81,18,57,18],[81,21,57,21,"setInterval"],[81,32,57,32],[81,33,57,33,"poll"],[81,37,57,37],[81,39,57,39,"POLL_INTERVAL_MS"],[81,55,57,55],[81,56,57,56],[82,6,59,4],[82,13,59,11],[82,19,59,17],[83,8,60,6,"clearTimeout"],[83,20,60,18],[83,21,60,19,"initialTimeout"],[83,35,60,33],[83,36,60,34],[84,8,61,6,"clearInterval"],[84,21,61,19],[84,22,61,20,"interval"],[84,30,61,28],[84,31,61,29],[85,6,62,4],[85,7,62,5],[86,4,63,2],[86,5,63,3],[86,7,63,5],[86,9,63,7],[86,10,63,8],[87,4,65,2],[87,11,65,9],[88,6,65,11,"isUpdating"],[89,4,65,22],[89,5,65,23],[90,2,66,0],[90,3,66,1],[91,2,66,2,"_s"],[91,4,66,2],[91,5,13,6,"useAutoUpdate"],[91,18,13,19],[92,2,68,0],[92,6,68,0,"_default"],[92,14,68,0],[92,17,68,15,"useAutoUpdate"],[92,30,68,28],[93,0,68,29],[93,3]],"functionMap":{"names":["<global>","useAutoUpdate","useEffect$argument_0","poll","Promise$argument_0","<anonymous>"],"mappings":"AAA;sBCY;YCI;iBCU;0BCiB,qCD;KDQ;WGO;KHG;GDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}