{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":45,"index":245}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}},{"name":"@tcg-trade-hub/database","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":246},"end":{"line":6,"column":59,"index":305}}],"key":"5m5x3CfVnTLecgF7rw3ym/c0mII=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _queryKeys = require(_dependencyMap[5], \"../../queryKeys\");\n  var _tcgTradeHubDatabase = require(_dependencyMap[6], \"@tcg-trade-hub/database\");\n  /**\n   * Hook that cancels a meetup by updating its status and sending\n   * a system message in the related chat conversation.\n   */\n  var useCancelMeetup = () => {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var meetupId = _ref.meetupId,\n            conversationId = _ref.conversationId;\n          if (!user) throw new Error('Not authenticated');\n\n          // Fetch current meetup to validate transition\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('meetups').select('status').eq('id', meetupId).single(),\n            currentMeetup = _yield$supabase$from$.data,\n            fetchError = _yield$supabase$from$.error;\n          if (fetchError) throw fetchError;\n          (0, _tcgTradeHubDatabase.assertTransition)('meetup', currentMeetup.status, 'cancelled');\n\n          // Update meetup status to cancelled\n          var _yield$supabase$from$2 = yield _libSupabase.supabase.from('meetups').update({\n              status: 'cancelled'\n            }).eq('id', meetupId),\n            meetupError = _yield$supabase$from$2.error;\n          if (meetupError) throw meetupError;\n\n          // Send system message in the conversation\n          var _yield$supabase$from$3 = yield _libSupabase.supabase.from('messages').insert({\n              conversation_id: conversationId,\n              sender_id: user.id,\n              type: 'system',\n              body: 'Meetup was cancelled.',\n              payload: {\n                event: 'meetup_cancelled'\n              }\n            }),\n            messageError = _yield$supabase$from$3.error;\n          if (messageError) throw messageError;\n          return {\n            meetupId\n          };\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: _ref3 => {\n        var meetupId = _ref3.meetupId;\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.detail(meetupId)\n        });\n      },\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to cancel meetup');\n      }\n    });\n  };\n  _s(useCancelMeetup, \"F80WCgOaBMKe49pooE2QTJGb66o=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useCancelMeetup;\n});","lineCount":95,"map":[[13,2,68,0,"Object"],[13,8,68,0],[13,9,68,0,"defineProperty"],[13,23,68,0],[13,24,68,0,"exports"],[13,31,68,0],[14,4,68,0,"enumerable"],[14,14,68,0],[15,4,68,0,"get"],[15,7,68,0],[15,18,68,0,"get"],[15,19,68,0],[16,6,68,0],[16,13,68,0,"_default"],[16,21,68,0],[17,4,68,0],[18,2,68,0],[19,2,68,31],[19,6,68,31,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,68,31],[19,45,68,31,"require"],[19,52,68,31],[19,53,68,31,"_dependencyMap"],[19,67,68,31],[20,2,68,31],[20,6,68,31,"_asyncToGenerator"],[20,23,68,31],[20,26,68,31,"_interopDefault"],[20,41,68,31],[20,42,68,31,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,68,31],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_contextAuthProvider"],[24,26,4,0],[24,29,4,0,"require"],[24,36,4,0],[24,37,4,0,"_dependencyMap"],[24,51,4,0],[25,2,5,0],[25,6,5,0,"_queryKeys"],[25,16,5,0],[25,19,5,0,"require"],[25,26,5,0],[25,27,5,0,"_dependencyMap"],[25,41,5,0],[26,2,6,0],[26,6,6,0,"_tcgTradeHubDatabase"],[26,26,6,0],[26,29,6,0,"require"],[26,36,6,0],[26,37,6,0,"_dependencyMap"],[26,51,6,0],[27,2,14,0],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,2,18,0],[31,6,18,6,"useCancelMeetup"],[31,21,18,21],[31,24,18,24,"useCancelMeetup"],[31,25,18,24],[31,30,18,30],[32,4,18,30,"_s"],[32,6,18,30],[33,4,19,2],[33,8,19,8,"queryClient"],[33,19,19,19],[33,22,19,22],[33,26,19,22,"useQueryClient"],[33,45,19,36],[33,46,19,36,"useQueryClient"],[33,60,19,36],[33,62,19,37],[33,63,19,38],[34,4,20,2],[34,8,20,2,"_useAuth"],[34,16,20,2],[34,19,20,19],[34,23,20,19,"useAuth"],[34,43,20,26],[34,44,20,26,"useAuth"],[34,51,20,26],[34,53,20,27],[34,54,20,28],[35,6,20,10,"user"],[35,10,20,14],[35,13,20,14,"_useAuth"],[35,21,20,14],[35,22,20,10,"user"],[35,26,20,14],[36,4,22,2],[36,11,22,9],[36,15,22,9,"useMutation"],[36,34,22,20],[36,35,22,20,"useMutation"],[36,46,22,20],[36,48,22,21],[37,6,23,4,"mutationFn"],[37,16,23,14],[38,8,23,14],[38,12,23,14,"_ref2"],[38,17,23,14],[38,24,23,14,"_asyncToGenerator"],[38,41,23,14],[38,42,23,14,"default"],[38,49,23,14],[38,51,23,16],[38,62,23,16,"_ref"],[38,66,23,16],[38,68,23,76],[39,10,23,76],[39,14,23,25,"meetupId"],[39,22,23,33],[39,25,23,33,"_ref"],[39,29,23,33],[39,30,23,25,"meetupId"],[39,38,23,33],[40,12,23,35,"conversationId"],[40,26,23,49],[40,29,23,49,"_ref"],[40,33,23,49],[40,34,23,35,"conversationId"],[40,48,23,49],[41,10,24,6],[41,14,24,10],[41,15,24,11,"user"],[41,19,24,15],[41,21,24,17],[41,27,24,23],[41,31,24,27,"Error"],[41,36,24,32],[41,37,24,33],[41,56,24,52],[41,57,24,53],[43,10,26,6],[44,10,27,6],[44,14,27,6,"_yield$supabase$from$"],[44,35,27,6],[44,44,27,63,"supabase"],[44,56,27,71],[44,57,27,71,"supabase"],[44,65,27,71],[44,66,28,9,"from"],[44,70,28,13],[44,71,28,14],[44,80,28,23],[44,81,28,24],[44,82,29,9,"select"],[44,88,29,15],[44,89,29,16],[44,97,29,24],[44,98,29,25],[44,99,30,9,"eq"],[44,101,30,11],[44,102,30,12],[44,106,30,16],[44,108,30,18,"meetupId"],[44,116,30,26],[44,117,30,27],[44,118,31,9,"single"],[44,124,31,15],[44,125,31,16],[44,126,31,17],[45,12,27,20,"currentMeetup"],[45,25,27,33],[45,28,27,33,"_yield$supabase$from$"],[45,49,27,33],[45,50,27,14,"data"],[45,54,27,18],[46,12,27,42,"fetchError"],[46,22,27,52],[46,25,27,52,"_yield$supabase$from$"],[46,46,27,52],[46,47,27,35,"error"],[46,52,27,40],[47,10,33,6],[47,14,33,10,"fetchError"],[47,24,33,20],[47,26,33,22],[47,32,33,28,"fetchError"],[47,42,33,38],[48,10,35,6],[48,14,35,6,"assertTransition"],[48,34,35,22],[48,35,35,22,"assertTransition"],[48,51,35,22],[48,53,35,23],[48,61,35,31],[48,63,35,33,"currentMeetup"],[48,76,35,46],[48,77,35,47,"status"],[48,83,35,53],[48,85,35,71],[48,96,35,82],[48,97,35,83],[50,10,37,6],[51,10,38,6],[51,14,38,6,"_yield$supabase$from$2"],[51,36,38,6],[51,45,38,43,"supabase"],[51,57,38,51],[51,58,38,51,"supabase"],[51,66,38,51],[51,67,39,9,"from"],[51,71,39,13],[51,72,39,14],[51,81,39,23],[51,82,39,24],[51,83,40,9,"update"],[51,89,40,15],[51,90,40,16],[52,14,40,18,"status"],[52,20,40,24],[52,22,40,26],[53,12,40,38],[53,13,40,39],[53,14,40,40],[53,15,41,9,"eq"],[53,17,41,11],[53,18,41,12],[53,22,41,16],[53,24,41,18,"meetupId"],[53,32,41,26],[53,33,41,27],[54,12,38,21,"meetupError"],[54,23,38,32],[54,26,38,32,"_yield$supabase$from$2"],[54,48,38,32],[54,49,38,14,"error"],[54,54,38,19],[55,10,43,6],[55,14,43,10,"meetupError"],[55,25,43,21],[55,27,43,23],[55,33,43,29,"meetupError"],[55,44,43,40],[57,10,45,6],[58,10,46,6],[58,14,46,6,"_yield$supabase$from$3"],[58,36,46,6],[58,45,46,44,"supabase"],[58,57,46,52],[58,58,46,52,"supabase"],[58,66,46,52],[58,67,46,53,"from"],[58,71,46,57],[58,72,46,58],[58,82,46,68],[58,83,46,69],[58,84,46,70,"insert"],[58,90,46,76],[58,91,46,77],[59,14,47,8,"conversation_id"],[59,29,47,23],[59,31,47,25,"conversationId"],[59,45,47,39],[60,14,48,8,"sender_id"],[60,23,48,17],[60,25,48,19,"user"],[60,29,48,23],[60,30,48,24,"id"],[60,32,48,26],[61,14,49,8,"type"],[61,18,49,12],[61,20,49,14],[61,28,49,22],[62,14,50,8,"body"],[62,18,50,12],[62,20,50,14],[62,43,50,37],[63,14,51,8,"payload"],[63,21,51,15],[63,23,51,17],[64,16,51,19,"event"],[64,21,51,24],[64,23,51,26],[65,14,51,45],[66,12,52,6],[66,13,52,7],[66,14,52,8],[67,12,46,21,"messageError"],[67,24,46,33],[67,27,46,33,"_yield$supabase$from$3"],[67,49,46,33],[67,50,46,14,"error"],[67,55,46,19],[68,10,54,6],[68,14,54,10,"messageError"],[68,26,54,22],[68,28,54,24],[68,34,54,30,"messageError"],[68,46,54,42],[69,10,56,6],[69,17,56,13],[70,12,56,15,"meetupId"],[71,10,56,24],[71,11,56,25],[72,8,57,4],[72,9,57,5],[73,8,57,5],[73,24,23,4,"mutationFn"],[73,34,23,14,"mutationFn"],[73,35,23,14,"_x"],[73,37,23,14],[74,10,23,14],[74,17,23,14,"_ref2"],[74,22,23,14],[74,23,23,14,"apply"],[74,28,23,14],[74,35,23,14,"arguments"],[74,44,23,14],[75,8,23,14],[76,6,23,14],[76,9,57,5],[77,6,58,4,"onSuccess"],[77,15,58,13],[77,17,58,15,"_ref3"],[77,22,58,15],[77,26,58,33],[78,8,58,33],[78,12,58,18,"meetupId"],[78,20,58,26],[78,23,58,26,"_ref3"],[78,28,58,26],[78,29,58,18,"meetupId"],[78,37,58,26],[79,8,59,6,"queryClient"],[79,19,59,17],[79,20,59,18,"invalidateQueries"],[79,37,59,35],[79,38,59,36],[80,10,59,38,"queryKey"],[80,18,59,46],[80,20,59,48,"meetupKeys"],[80,30,59,58],[80,31,59,58,"meetupKeys"],[80,41,59,58],[80,42,59,59,"all"],[81,8,59,63],[81,9,59,64],[81,10,59,65],[82,8,60,6,"queryClient"],[82,19,60,17],[82,20,60,18,"invalidateQueries"],[82,37,60,35],[82,38,60,36],[83,10,60,38,"queryKey"],[83,18,60,46],[83,20,60,48,"meetupKeys"],[83,30,60,58],[83,31,60,58,"meetupKeys"],[83,41,60,58],[83,42,60,59,"detail"],[83,48,60,65],[83,49,60,66,"meetupId"],[83,57,60,74],[84,8,60,76],[84,9,60,77],[84,10,60,78],[85,6,61,4],[85,7,61,5],[86,6,62,4,"onError"],[86,13,62,11],[86,15,62,14,"error"],[86,20,62,26],[86,24,62,31],[87,8,63,6,"Alert"],[87,20,63,11],[87,21,63,11,"Alert"],[87,26,63,11],[87,27,63,12,"alert"],[87,32,63,17],[87,33,63,18],[87,40,63,25],[87,42,63,27,"error"],[87,47,63,32],[87,48,63,33,"message"],[87,55,63,40],[87,59,63,44],[87,84,63,69],[87,85,63,70],[88,6,64,4],[89,4,65,2],[89,5,65,3],[89,6,65,4],[90,2,66,0],[90,3,66,1],[91,2,66,2,"_s"],[91,4,66,2],[91,5,18,6,"useCancelMeetup"],[91,20,18,21],[92,4,18,21],[92,12,19,22,"useQueryClient"],[92,31,19,36],[92,32,19,36,"useQueryClient"],[92,46,19,36],[92,48,20,19,"useAuth"],[92,68,20,26],[92,69,20,26,"useAuth"],[92,76,20,26],[92,78,22,9,"useMutation"],[92,97,22,20],[92,98,22,20,"useMutation"],[92,109,22,20],[93,2,22,20],[94,2,68,0],[94,6,68,0,"_default"],[94,14,68,0],[94,17,68,15,"useCancelMeetup"],[94,32,68,30],[95,0,68,31],[95,3]],"functionMap":{"names":["<global>","useCancelMeetup","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;wBCiB;gBCK;KDkC;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}