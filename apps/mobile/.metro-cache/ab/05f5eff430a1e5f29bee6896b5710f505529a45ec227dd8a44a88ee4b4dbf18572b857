{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":46,"index":246}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _reactNative = require(_dependencyMap[2]);\n  var _libSupabase = require(_dependencyMap[3]);\n  var _contextAuthProvider = require(_dependencyMap[4]);\n  var _queryKeys = require(_dependencyMap[5]);\n  /**\n   * Hook that updates the current user's profile.\n   *\n   * On success, invalidates profile queries and calls refreshProfile\n   * from the AuthProvider to keep the auth context in sync.\n   */\n  var useUpdateProfile = () => {\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user,\n      refreshProfile = _useAuth.refreshProfile;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* (params) {\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('users').upsert({\n              id: user.id,\n              email: user.email,\n              display_name: user.email.split('@')[0],\n              ...params\n            }).select().single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      onSuccess: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          queryClient.invalidateQueries({\n            queryKey: _queryKeys.profileKeys.all\n          });\n          yield refreshProfile();\n        });\n        return function onSuccess() {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to update profile');\n      }\n    });\n  };\n  var _default = useUpdateProfile;\n});","lineCount":72,"map":[[12,2,50,0,"Object"],[12,8,50,0],[12,9,50,0,"defineProperty"],[12,23,50,0],[12,24,50,0,"exports"],[12,31,50,0],[13,4,50,0,"enumerable"],[13,14,50,0],[14,4,50,0,"get"],[14,7,50,0],[14,18,50,0,"get"],[14,19,50,0],[15,6,50,0],[15,13,50,0,"_default"],[15,21,50,0],[16,4,50,0],[17,2,50,0],[18,2,50,32],[18,6,50,32,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,50,32],[18,45,50,32,"require"],[18,52,50,32],[18,53,50,32,"_dependencyMap"],[18,67,50,32],[19,2,50,32],[19,6,50,32,"_asyncToGenerator"],[19,23,50,32],[19,26,50,32,"_interopDefault"],[19,41,50,32],[19,42,50,32,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,50,32],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_reactNative"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_libSupabase"],[22,18,3,0],[22,21,3,0,"require"],[22,28,3,0],[22,29,3,0,"_dependencyMap"],[22,43,3,0],[23,2,4,0],[23,6,4,0,"_contextAuthProvider"],[23,26,4,0],[23,29,4,0,"require"],[23,36,4,0],[23,37,4,0,"_dependencyMap"],[23,51,4,0],[24,2,5,0],[24,6,5,0,"_queryKeys"],[24,16,5,0],[24,19,5,0,"require"],[24,26,5,0],[24,27,5,0,"_dependencyMap"],[24,41,5,0],[25,2,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,2,23,0],[31,6,23,6,"useUpdateProfile"],[31,22,23,22],[31,25,23,25,"useUpdateProfile"],[31,26,23,25],[31,31,23,31],[32,4,24,2],[32,8,24,8,"queryClient"],[32,19,24,19],[32,22,24,22],[32,26,24,22,"useQueryClient"],[32,45,24,36],[32,46,24,36,"useQueryClient"],[32,60,24,36],[32,62,24,37],[32,63,24,38],[33,4,25,2],[33,8,25,2,"_useAuth"],[33,16,25,2],[33,19,25,35],[33,23,25,35,"useAuth"],[33,43,25,42],[33,44,25,42,"useAuth"],[33,51,25,42],[33,53,25,43],[33,54,25,44],[34,6,25,10,"user"],[34,10,25,14],[34,13,25,14,"_useAuth"],[34,21,25,14],[34,22,25,10,"user"],[34,26,25,14],[35,6,25,16,"refreshProfile"],[35,20,25,30],[35,23,25,30,"_useAuth"],[35,31,25,30],[35,32,25,16,"refreshProfile"],[35,46,25,30],[36,4,27,2],[36,11,27,9],[36,15,27,9,"useMutation"],[36,34,27,20],[36,35,27,20,"useMutation"],[36,46,27,20],[36,48,27,21],[37,6,28,4,"mutationFn"],[37,16,28,14],[38,8,28,14],[38,12,28,14,"_ref"],[38,16,28,14],[38,23,28,14,"_asyncToGenerator"],[38,40,28,14],[38,41,28,14,"default"],[38,48,28,14],[38,50,28,16],[38,61,28,23,"params"],[38,67,28,50],[38,69,28,55],[39,10,29,6],[39,14,29,10],[39,15,29,11,"user"],[39,19,29,15],[39,21,29,17],[39,27,29,23],[39,31,29,27,"Error"],[39,36,29,32],[39,37,29,33],[39,56,29,52],[39,57,29,53],[40,10,31,6],[40,14,31,6,"_yield$supabase$from$"],[40,35,31,6],[40,44,31,36,"supabase"],[40,56,31,44],[40,57,31,44,"supabase"],[40,65,31,44],[40,66,32,9,"from"],[40,70,32,13],[40,71,32,14],[40,78,32,21],[40,79,32,22],[40,80,33,9,"upsert"],[40,86,33,15],[40,87,33,16],[41,14,33,18,"id"],[41,16,33,20],[41,18,33,22,"user"],[41,22,33,26],[41,23,33,27,"id"],[41,25,33,29],[42,14,33,31,"email"],[42,19,33,36],[42,21,33,38,"user"],[42,25,33,42],[42,26,33,43,"email"],[42,31,33,49],[43,14,33,51,"display_name"],[43,26,33,63],[43,28,33,65,"user"],[43,32,33,69],[43,33,33,70,"email"],[43,38,33,75],[43,39,33,77,"split"],[43,44,33,82],[43,45,33,83],[43,48,33,86],[43,49,33,87],[43,50,33,88],[43,51,33,89],[43,52,33,90],[44,14,33,92],[44,17,33,95,"params"],[45,12,33,102],[45,13,33,103],[45,14,33,104],[45,15,34,9,"select"],[45,21,34,15],[45,22,34,16],[45,23,34,17],[45,24,35,9,"single"],[45,30,35,15],[45,31,35,16],[45,32,35,17],[46,12,31,14,"data"],[46,16,31,18],[46,19,31,18,"_yield$supabase$from$"],[46,40,31,18],[46,41,31,14,"data"],[46,45,31,18],[47,12,31,20,"error"],[47,17,31,25],[47,20,31,25,"_yield$supabase$from$"],[47,41,31,25],[47,42,31,20,"error"],[47,47,31,25],[48,10,37,6],[48,14,37,10,"error"],[48,19,37,15],[48,21,37,17],[48,27,37,23,"error"],[48,32,37,28],[49,10,38,6],[49,17,38,13,"data"],[49,21,38,17],[50,8,39,4],[50,9,39,5],[51,8,39,5],[51,24,28,4,"mutationFn"],[51,34,28,14,"mutationFn"],[51,35,28,14,"_x"],[51,37,28,14],[52,10,28,14],[52,17,28,14,"_ref"],[52,21,28,14],[52,22,28,14,"apply"],[52,27,28,14],[52,34,28,14,"arguments"],[52,43,28,14],[53,8,28,14],[54,6,28,14],[54,9,39,5],[55,6,40,4,"onSuccess"],[55,15,40,13],[56,8,40,13],[56,12,40,13,"_ref2"],[56,17,40,13],[56,24,40,13,"_asyncToGenerator"],[56,41,40,13],[56,42,40,13,"default"],[56,49,40,13],[56,51,40,15],[56,64,40,27],[57,10,41,6,"queryClient"],[57,21,41,17],[57,22,41,18,"invalidateQueries"],[57,39,41,35],[57,40,41,36],[58,12,41,38,"queryKey"],[58,20,41,46],[58,22,41,48,"profileKeys"],[58,32,41,59],[58,33,41,59,"profileKeys"],[58,44,41,59],[58,45,41,60,"all"],[59,10,41,64],[59,11,41,65],[59,12,41,66],[60,10,42,6],[60,16,42,12,"refreshProfile"],[60,30,42,26],[60,31,42,27],[60,32,42,28],[61,8,43,4],[61,9,43,5],[62,8,43,5],[62,24,40,4,"onSuccess"],[62,33,40,13,"onSuccess"],[62,34,40,13],[63,10,40,13],[63,17,40,13,"_ref2"],[63,22,40,13],[63,23,40,13,"apply"],[63,28,40,13],[63,35,40,13,"arguments"],[63,44,40,13],[64,8,40,13],[65,6,40,13],[65,9,43,5],[66,6,44,4,"onError"],[66,13,44,11],[66,15,44,14,"error"],[66,20,44,26],[66,24,44,31],[67,8,45,6,"Alert"],[67,20,45,11],[67,21,45,11,"Alert"],[67,26,45,11],[67,27,45,12,"alert"],[67,32,45,17],[67,33,45,18],[67,40,45,25],[67,42,45,27,"error"],[67,47,45,32],[67,48,45,33,"message"],[67,55,45,40],[67,59,45,44],[67,85,45,70],[67,86,45,71],[68,6,46,4],[69,4,47,2],[69,5,47,3],[69,6,47,4],[70,2,48,0],[70,3,48,1],[71,2,50,0],[71,6,50,0,"_default"],[71,14,50,0],[71,17,50,15,"useUpdateProfile"],[71,33,50,31],[72,0,50,32],[72,3]],"functionMap":{"names":["<global>","useUpdateProfile","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;yBCsB;gBCK;KDW;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}