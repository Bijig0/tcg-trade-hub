{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":46,"index":246}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _reactNative = require(_dependencyMap[2]);\n  var _libSupabase = require(_dependencyMap[3]);\n  var _contextAuthProvider = require(_dependencyMap[4]);\n  var _queryKeys = require(_dependencyMap[5]);\n  /**\n   * Hook that updates the current user's profile.\n   *\n   * On success, invalidates profile queries and calls refreshProfile\n   * from the AuthProvider to keep the auth context in sync.\n   */\n  var useUpdateProfile = () => {\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user,\n      refreshProfile = _useAuth.refreshProfile;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* (params) {\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('users').upsert({\n              id: user.id,\n              email: user.email,\n              display_name: user.email.split('@')[0],\n              ...params\n            }).select().single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      onSuccess: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          queryClient.invalidateQueries({\n            queryKey: _queryKeys.profileKeys.all\n          });\n          yield refreshProfile();\n        });\n        return function onSuccess() {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to update profile');\n      }\n    });\n  };\n  var _default = useUpdateProfile;\n});","lineCount":72,"map":[[12,2,49,0,"Object"],[12,8,49,0],[12,9,49,0,"defineProperty"],[12,23,49,0],[12,24,49,0,"exports"],[12,31,49,0],[13,4,49,0,"enumerable"],[13,14,49,0],[14,4,49,0,"get"],[14,7,49,0],[14,18,49,0,"get"],[14,19,49,0],[15,6,49,0],[15,13,49,0,"_default"],[15,21,49,0],[16,4,49,0],[17,2,49,0],[18,2,49,32],[18,6,49,32,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,49,32],[18,45,49,32,"require"],[18,52,49,32],[18,53,49,32,"_dependencyMap"],[18,67,49,32],[19,2,49,32],[19,6,49,32,"_asyncToGenerator"],[19,23,49,32],[19,26,49,32,"_interopDefault"],[19,41,49,32],[19,42,49,32,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,49,32],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_reactNative"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_libSupabase"],[22,18,3,0],[22,21,3,0,"require"],[22,28,3,0],[22,29,3,0,"_dependencyMap"],[22,43,3,0],[23,2,4,0],[23,6,4,0,"_contextAuthProvider"],[23,26,4,0],[23,29,4,0,"require"],[23,36,4,0],[23,37,4,0,"_dependencyMap"],[23,51,4,0],[24,2,5,0],[24,6,5,0,"_queryKeys"],[24,16,5,0],[24,19,5,0,"require"],[24,26,5,0],[24,27,5,0,"_dependencyMap"],[24,41,5,0],[25,2,16,0],[26,0,17,0],[27,0,18,0],[28,0,19,0],[29,0,20,0],[30,0,21,0],[31,2,22,0],[31,6,22,6,"useUpdateProfile"],[31,22,22,22],[31,25,22,25,"useUpdateProfile"],[31,26,22,25],[31,31,22,31],[32,4,23,2],[32,8,23,8,"queryClient"],[32,19,23,19],[32,22,23,22],[32,26,23,22,"useQueryClient"],[32,45,23,36],[32,46,23,36,"useQueryClient"],[32,60,23,36],[32,62,23,37],[32,63,23,38],[33,4,24,2],[33,8,24,2,"_useAuth"],[33,16,24,2],[33,19,24,35],[33,23,24,35,"useAuth"],[33,43,24,42],[33,44,24,42,"useAuth"],[33,51,24,42],[33,53,24,43],[33,54,24,44],[34,6,24,10,"user"],[34,10,24,14],[34,13,24,14,"_useAuth"],[34,21,24,14],[34,22,24,10,"user"],[34,26,24,14],[35,6,24,16,"refreshProfile"],[35,20,24,30],[35,23,24,30,"_useAuth"],[35,31,24,30],[35,32,24,16,"refreshProfile"],[35,46,24,30],[36,4,26,2],[36,11,26,9],[36,15,26,9,"useMutation"],[36,34,26,20],[36,35,26,20,"useMutation"],[36,46,26,20],[36,48,26,21],[37,6,27,4,"mutationFn"],[37,16,27,14],[38,8,27,14],[38,12,27,14,"_ref"],[38,16,27,14],[38,23,27,14,"_asyncToGenerator"],[38,40,27,14],[38,41,27,14,"default"],[38,48,27,14],[38,50,27,16],[38,61,27,23,"params"],[38,67,27,50],[38,69,27,55],[39,10,28,6],[39,14,28,10],[39,15,28,11,"user"],[39,19,28,15],[39,21,28,17],[39,27,28,23],[39,31,28,27,"Error"],[39,36,28,32],[39,37,28,33],[39,56,28,52],[39,57,28,53],[40,10,30,6],[40,14,30,6,"_yield$supabase$from$"],[40,35,30,6],[40,44,30,36,"supabase"],[40,56,30,44],[40,57,30,44,"supabase"],[40,65,30,44],[40,66,31,9,"from"],[40,70,31,13],[40,71,31,14],[40,78,31,21],[40,79,31,22],[40,80,32,9,"upsert"],[40,86,32,15],[40,87,32,16],[41,14,32,18,"id"],[41,16,32,20],[41,18,32,22,"user"],[41,22,32,26],[41,23,32,27,"id"],[41,25,32,29],[42,14,32,31,"email"],[42,19,32,36],[42,21,32,38,"user"],[42,25,32,42],[42,26,32,43,"email"],[42,31,32,49],[43,14,32,51,"display_name"],[43,26,32,63],[43,28,32,65,"user"],[43,32,32,69],[43,33,32,70,"email"],[43,38,32,75],[43,39,32,77,"split"],[43,44,32,82],[43,45,32,83],[43,48,32,86],[43,49,32,87],[43,50,32,88],[43,51,32,89],[43,52,32,90],[44,14,32,92],[44,17,32,95,"params"],[45,12,32,102],[45,13,32,103],[45,14,32,104],[45,15,33,9,"select"],[45,21,33,15],[45,22,33,16],[45,23,33,17],[45,24,34,9,"single"],[45,30,34,15],[45,31,34,16],[45,32,34,17],[46,12,30,14,"data"],[46,16,30,18],[46,19,30,18,"_yield$supabase$from$"],[46,40,30,18],[46,41,30,14,"data"],[46,45,30,18],[47,12,30,20,"error"],[47,17,30,25],[47,20,30,25,"_yield$supabase$from$"],[47,41,30,25],[47,42,30,20,"error"],[47,47,30,25],[48,10,36,6],[48,14,36,10,"error"],[48,19,36,15],[48,21,36,17],[48,27,36,23,"error"],[48,32,36,28],[49,10,37,6],[49,17,37,13,"data"],[49,21,37,17],[50,8,38,4],[50,9,38,5],[51,8,38,5],[51,24,27,4,"mutationFn"],[51,34,27,14,"mutationFn"],[51,35,27,14,"_x"],[51,37,27,14],[52,10,27,14],[52,17,27,14,"_ref"],[52,21,27,14],[52,22,27,14,"apply"],[52,27,27,14],[52,34,27,14,"arguments"],[52,43,27,14],[53,8,27,14],[54,6,27,14],[54,9,38,5],[55,6,39,4,"onSuccess"],[55,15,39,13],[56,8,39,13],[56,12,39,13,"_ref2"],[56,17,39,13],[56,24,39,13,"_asyncToGenerator"],[56,41,39,13],[56,42,39,13,"default"],[56,49,39,13],[56,51,39,15],[56,64,39,27],[57,10,40,6,"queryClient"],[57,21,40,17],[57,22,40,18,"invalidateQueries"],[57,39,40,35],[57,40,40,36],[58,12,40,38,"queryKey"],[58,20,40,46],[58,22,40,48,"profileKeys"],[58,32,40,59],[58,33,40,59,"profileKeys"],[58,44,40,59],[58,45,40,60,"all"],[59,10,40,64],[59,11,40,65],[59,12,40,66],[60,10,41,6],[60,16,41,12,"refreshProfile"],[60,30,41,26],[60,31,41,27],[60,32,41,28],[61,8,42,4],[61,9,42,5],[62,8,42,5],[62,24,39,4,"onSuccess"],[62,33,39,13,"onSuccess"],[62,34,39,13],[63,10,39,13],[63,17,39,13,"_ref2"],[63,22,39,13],[63,23,39,13,"apply"],[63,28,39,13],[63,35,39,13,"arguments"],[63,44,39,13],[64,8,39,13],[65,6,39,13],[65,9,42,5],[66,6,43,4,"onError"],[66,13,43,11],[66,15,43,14,"error"],[66,20,43,26],[66,24,43,31],[67,8,44,6,"Alert"],[67,20,44,11],[67,21,44,11,"Alert"],[67,26,44,11],[67,27,44,12,"alert"],[67,32,44,17],[67,33,44,18],[67,40,44,25],[67,42,44,27,"error"],[67,47,44,32],[67,48,44,33,"message"],[67,55,44,40],[67,59,44,44],[67,85,44,70],[67,86,44,71],[68,6,45,4],[69,4,46,2],[69,5,46,3],[69,6,46,4],[70,2,47,0],[70,3,47,1],[71,2,49,0],[71,6,49,0,"_default"],[71,14,49,0],[71,17,49,15,"useUpdateProfile"],[71,33,49,31],[72,0,49,32],[72,3]],"functionMap":{"names":["<global>","useUpdateProfile","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;yBCqB;gBCK;KDW;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}