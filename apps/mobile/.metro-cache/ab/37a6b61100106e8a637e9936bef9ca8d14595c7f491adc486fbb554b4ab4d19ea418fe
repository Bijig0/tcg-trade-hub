{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":51,"index":251}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _feedQueryKeys = require(_dependencyMap[5], \"../../../feed/queryKeys\");\n  /**\n   * Hook that blocks a user by inserting into the blocks table.\n   *\n   * Shows a confirmation dialog before blocking. On success, invalidates\n   * feed queries to remove the blocked user's listings from the feed.\n   */\n  var useBlockUser = () => {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var mutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var blockedId = _ref.blockedId;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('blocks').insert({\n              blocker_id: user.id,\n              blocked_id: blockedId\n            }),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return {\n            blockedId\n          };\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: ['blocked-users']\n        });\n      },\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to block user');\n      }\n    });\n    var blockWithConfirmation = _ref3 => {\n      var blockedId = _ref3.blockedId,\n        displayName = _ref3.displayName;\n      _reactNative.Alert.alert('Block User', `Are you sure you want to block ${displayName}? They won't be able to see your listings or message you.`, [{\n        text: 'Cancel',\n        style: 'cancel'\n      }, {\n        text: 'Block',\n        style: 'destructive',\n        onPress: () => mutation.mutate({\n          blockedId,\n          displayName\n        })\n      }]);\n    };\n    return {\n      ...mutation,\n      blockWithConfirmation\n    };\n  };\n  _s(useBlockUser, \"RQ0PlcUFIMgRZdBPHYTypyNUWyw=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useBlockUser;\n});","lineCount":92,"map":[[13,2,64,0,"Object"],[13,8,64,0],[13,9,64,0,"defineProperty"],[13,23,64,0],[13,24,64,0,"exports"],[13,31,64,0],[14,4,64,0,"enumerable"],[14,14,64,0],[15,4,64,0,"get"],[15,7,64,0],[15,18,64,0,"get"],[15,19,64,0],[16,6,64,0],[16,13,64,0,"_default"],[16,21,64,0],[17,4,64,0],[18,2,64,0],[19,2,64,28],[19,6,64,28,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,64,28],[19,45,64,28,"require"],[19,52,64,28],[19,53,64,28,"_dependencyMap"],[19,67,64,28],[20,2,64,28],[20,6,64,28,"_asyncToGenerator"],[20,23,64,28],[20,26,64,28,"_interopDefault"],[20,41,64,28],[20,42,64,28,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,64,28],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_contextAuthProvider"],[24,26,4,0],[24,29,4,0,"require"],[24,36,4,0],[24,37,4,0,"_dependencyMap"],[24,51,4,0],[25,2,5,0],[25,6,5,0,"_feedQueryKeys"],[25,20,5,0],[25,23,5,0,"require"],[25,30,5,0],[25,31,5,0,"_dependencyMap"],[25,45,5,0],[26,2,12,0],[27,0,13,0],[28,0,14,0],[29,0,15,0],[30,0,16,0],[31,0,17,0],[32,2,18,0],[32,6,18,6,"useBlockUser"],[32,18,18,18],[32,21,18,21,"useBlockUser"],[32,22,18,21],[32,27,18,27],[33,4,18,27,"_s"],[33,6,18,27],[34,4,19,2],[34,8,19,8,"queryClient"],[34,19,19,19],[34,22,19,22],[34,26,19,22,"useQueryClient"],[34,45,19,36],[34,46,19,36,"useQueryClient"],[34,60,19,36],[34,62,19,37],[34,63,19,38],[35,4,20,2],[35,8,20,2,"_useAuth"],[35,16,20,2],[35,19,20,19],[35,23,20,19,"useAuth"],[35,43,20,26],[35,44,20,26,"useAuth"],[35,51,20,26],[35,53,20,27],[35,54,20,28],[36,6,20,10,"user"],[36,10,20,14],[36,13,20,14,"_useAuth"],[36,21,20,14],[36,22,20,10,"user"],[36,26,20,14],[37,4,22,2],[37,8,22,8,"mutation"],[37,16,22,16],[37,19,22,19],[37,23,22,19,"useMutation"],[37,42,22,30],[37,43,22,30,"useMutation"],[37,54,22,30],[37,56,22,31],[38,6,23,4,"mutationFn"],[38,16,23,14],[39,8,23,14],[39,12,23,14,"_ref2"],[39,17,23,14],[39,24,23,14,"_asyncToGenerator"],[39,41,23,14],[39,42,23,14,"default"],[39,49,23,14],[39,51,23,16],[39,62,23,16,"_ref"],[39,66,23,16],[39,68,23,58],[40,10,23,58],[40,14,23,25,"blockedId"],[40,23,23,34],[40,26,23,34,"_ref"],[40,30,23,34],[40,31,23,25,"blockedId"],[40,40,23,34],[41,10,24,6],[41,14,24,10],[41,15,24,11,"user"],[41,19,24,15],[41,21,24,17],[41,27,24,23],[41,31,24,27,"Error"],[41,36,24,32],[41,37,24,33],[41,56,24,52],[41,57,24,53],[42,10,26,6],[42,14,26,6,"_yield$supabase$from$"],[42,35,26,6],[42,44,26,30,"supabase"],[42,56,26,38],[42,57,26,38,"supabase"],[42,65,26,38],[42,66,26,39,"from"],[42,70,26,43],[42,71,26,44],[42,79,26,52],[42,80,26,53],[42,81,26,54,"insert"],[42,87,26,60],[42,88,26,61],[43,14,27,8,"blocker_id"],[43,24,27,18],[43,26,27,20,"user"],[43,30,27,24],[43,31,27,25,"id"],[43,33,27,27],[44,14,28,8,"blocked_id"],[44,24,28,18],[44,26,28,20,"blockedId"],[45,12,29,6],[45,13,29,7],[45,14,29,8],[46,12,26,14,"error"],[46,17,26,19],[46,20,26,19,"_yield$supabase$from$"],[46,41,26,19],[46,42,26,14,"error"],[46,47,26,19],[47,10,31,6],[47,14,31,10,"error"],[47,19,31,15],[47,21,31,17],[47,27,31,23,"error"],[47,32,31,28],[48,10,32,6],[48,17,32,13],[49,12,32,15,"blockedId"],[50,10,32,25],[50,11,32,26],[51,8,33,4],[51,9,33,5],[52,8,33,5],[52,24,23,4,"mutationFn"],[52,34,23,14,"mutationFn"],[52,35,23,14,"_x"],[52,37,23,14],[53,10,23,14],[53,17,23,14,"_ref2"],[53,22,23,14],[53,23,23,14,"apply"],[53,28,23,14],[53,35,23,14,"arguments"],[53,44,23,14],[54,8,23,14],[55,6,23,14],[55,9,33,5],[56,6,34,4,"onSuccess"],[56,15,34,13],[56,17,34,15,"onSuccess"],[56,18,34,15],[56,23,34,21],[57,8,35,6,"queryClient"],[57,19,35,17],[57,20,35,18,"invalidateQueries"],[57,37,35,35],[57,38,35,36],[58,10,35,38,"queryKey"],[58,18,35,46],[58,20,35,48,"feedKeys"],[58,34,35,56],[58,35,35,56,"feedKeys"],[58,43,35,56],[58,44,35,57,"all"],[59,8,35,61],[59,9,35,62],[59,10,35,63],[60,8,36,6,"queryClient"],[60,19,36,17],[60,20,36,18,"invalidateQueries"],[60,37,36,35],[60,38,36,36],[61,10,36,38,"queryKey"],[61,18,36,46],[61,20,36,48],[61,21,36,49],[61,36,36,64],[62,8,36,66],[62,9,36,67],[62,10,36,68],[63,6,37,4],[63,7,37,5],[64,6,38,4,"onError"],[64,13,38,11],[64,15,38,14,"error"],[64,20,38,26],[64,24,38,31],[65,8,39,6,"Alert"],[65,20,39,11],[65,21,39,11,"Alert"],[65,26,39,11],[65,27,39,12,"alert"],[65,32,39,17],[65,33,39,18],[65,40,39,25],[65,42,39,27,"error"],[65,47,39,32],[65,48,39,33,"message"],[65,55,39,40],[65,59,39,44],[65,81,39,66],[65,82,39,67],[66,6,40,4],[67,4,41,2],[67,5,41,3],[67,6,41,4],[68,4,43,2],[68,8,43,8,"blockWithConfirmation"],[68,29,43,29],[68,32,43,32,"_ref3"],[68,37,43,32],[68,41,43,81],[69,6,43,81],[69,10,43,35,"blockedId"],[69,19,43,44],[69,22,43,44,"_ref3"],[69,27,43,44],[69,28,43,35,"blockedId"],[69,37,43,44],[70,8,43,46,"displayName"],[70,19,43,57],[70,22,43,57,"_ref3"],[70,27,43,57],[70,28,43,46,"displayName"],[70,39,43,57],[71,6,44,4,"Alert"],[71,18,44,9],[71,19,44,9,"Alert"],[71,24,44,9],[71,25,44,10,"alert"],[71,30,44,15],[71,31,45,6],[71,43,45,18],[71,45,46,6],[71,79,46,40,"displayName"],[71,90,46,51],[71,149,46,110],[71,151,47,6],[71,152,48,8],[72,8,48,10,"text"],[72,12,48,14],[72,14,48,16],[72,22,48,24],[73,8,48,26,"style"],[73,13,48,31],[73,15,48,33],[74,6,48,42],[74,7,48,43],[74,9,49,8],[75,8,50,10,"text"],[75,12,50,14],[75,14,50,16],[75,21,50,23],[76,8,51,10,"style"],[76,13,51,15],[76,15,51,17],[76,28,51,30],[77,8,52,10,"onPress"],[77,15,52,17],[77,17,52,19,"onPress"],[77,18,52,19],[77,23,52,25,"mutation"],[77,31,52,33],[77,32,52,34,"mutate"],[77,38,52,40],[77,39,52,41],[78,10,52,43,"blockedId"],[78,19,52,52],[79,10,52,54,"displayName"],[80,8,52,66],[80,9,52,67],[81,6,53,8],[81,7,53,9],[81,8,55,4],[81,9,55,5],[82,4,56,2],[82,5,56,3],[83,4,58,2],[83,11,58,9],[84,6,59,4],[84,9,59,7,"mutation"],[84,17,59,15],[85,6,60,4,"blockWithConfirmation"],[86,4,61,2],[86,5,61,3],[87,2,62,0],[87,3,62,1],[88,2,62,2,"_s"],[88,4,62,2],[88,5,18,6,"useBlockUser"],[88,17,18,18],[89,4,18,18],[89,12,19,22,"useQueryClient"],[89,31,19,36],[89,32,19,36,"useQueryClient"],[89,46,19,36],[89,48,20,19,"useAuth"],[89,68,20,26],[89,69,20,26,"useAuth"],[89,76,20,26],[89,78,22,19,"useMutation"],[89,97,22,30],[89,98,22,30,"useMutation"],[89,109,22,30],[90,2,22,30],[91,2,64,0],[91,6,64,0,"_default"],[91,14,64,0],[91,17,64,15,"useBlockUser"],[91,29,64,27],[92,0,64,28],[92,3]],"functionMap":{"names":["<global>","useBlockUser","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError","blockWithConfirmation","onPress"],"mappings":"AAA;qBCiB;gBCK;KDU;eEC;KFG;aGC;KHE;gCIG;mBCS,iDD;GJI;CDM"},"hasCjsExports":false},"type":"js/module"}]}