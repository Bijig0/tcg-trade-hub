{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":42,"index":95}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":49,"index":145}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[3], \"@/context/AuthProvider\");\n  /**\n   * Hook that records a swipe action (like/pass) on a listing.\n   *\n   * Inserts directly into the swipes table. On success, invalidates feed queries\n   * so already-swiped listings are excluded.\n   */\n  var useRecordSwipe = function useRecordSwipe() {\n    _s();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _mutationFn = (0, _asyncToGenerator.default)(function* (_ref) {\n          var listingId = _ref.listingId,\n            direction = _ref.direction;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('swipes').insert({\n              user_id: user.id,\n              listing_id: listingId,\n              direction: direction\n            }).select('id').single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) {\n            console.error('[useRecordSwipe] Error recording swipe:', error);\n            throw error;\n          }\n          console.log(`[useRecordSwipe] Recorded ${direction} on ${listingId}`);\n\n          // Match detection is handled server-side (triggers/functions).\n          // For now, return no match â€” matches are created through offers.\n          return {\n            swipe_id: data.id,\n            match: null\n          };\n        });\n        function mutationFn(_x) {\n          return _mutationFn.apply(this, arguments);\n        }\n        return mutationFn;\n      }()\n    });\n  };\n  _s(useRecordSwipe, \"+F9KD/mzabEgWRv3/fn0V/Yp/38=\", false, function () {\n    return [_contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useRecordSwipe;\n});","lineCount":71,"map":[[13,2,56,0,"Object"],[13,8,56,0],[13,9,56,0,"defineProperty"],[13,23,56,0],[13,24,56,0,"exports"],[13,31,56,0],[14,4,56,0,"enumerable"],[14,14,56,0],[15,4,56,0,"get"],[15,7,56,0],[15,18,56,0,"get"],[15,19,56,0],[16,6,56,0],[16,13,56,0,"_default"],[16,21,56,0],[17,4,56,0],[18,2,56,0],[19,2,56,30],[19,6,56,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,56,30],[19,45,56,30,"require"],[19,52,56,30],[19,53,56,30,"_dependencyMap"],[19,67,56,30],[20,2,56,30],[20,6,56,30,"_asyncToGenerator"],[20,23,56,30],[20,26,56,30,"_interopDefault"],[20,41,56,30],[20,42,56,30,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,56,30],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_contextAuthProvider"],[23,26,3,0],[23,29,3,0,"require"],[23,36,3,0],[23,37,3,0,"_dependencyMap"],[23,51,3,0],[24,2,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,2,22,0],[30,6,22,6,"useRecordSwipe"],[30,20,22,20],[30,23,22,23],[30,32,22,6,"useRecordSwipe"],[30,46,22,20,"useRecordSwipe"],[30,47,22,20],[30,49,22,29],[31,4,22,29,"_s"],[31,6,22,29],[32,4,23,2],[32,8,23,2,"_useAuth"],[32,16,23,2],[32,19,23,19],[32,23,23,19,"useAuth"],[32,43,23,26],[32,44,23,26,"useAuth"],[32,51,23,26],[32,53,23,27],[32,54,23,28],[33,6,23,10,"user"],[33,10,23,14],[33,13,23,14,"_useAuth"],[33,21,23,14],[33,22,23,10,"user"],[33,26,23,14],[34,4,25,2],[34,11,25,9],[34,15,25,9,"useMutation"],[34,34,25,20],[34,35,25,20,"useMutation"],[34,46,25,20],[34,48,25,67],[35,6,26,4,"mutationFn"],[35,16,26,14],[36,8,26,14],[36,12,26,14,"_mutationFn"],[36,23,26,14],[36,30,26,14,"_asyncToGenerator"],[36,47,26,14],[36,48,26,14,"default"],[36,55,26,14],[36,57,26,16],[36,68,26,16,"_ref"],[36,72,26,16],[36,74,26,52],[37,10,26,52],[37,14,26,25,"listingId"],[37,23,26,34],[37,26,26,34,"_ref"],[37,30,26,34],[37,31,26,25,"listingId"],[37,40,26,34],[38,12,26,36,"direction"],[38,21,26,45],[38,24,26,45,"_ref"],[38,28,26,45],[38,29,26,36,"direction"],[38,38,26,45],[39,10,27,6],[39,14,27,10],[39,15,27,11,"user"],[39,19,27,15],[39,21,27,17],[39,27,27,23],[39,31,27,27,"Error"],[39,36,27,32],[39,37,27,33],[39,56,27,52],[39,57,27,53],[40,10,29,6],[40,14,29,6,"_yield$supabase$from$"],[40,35,29,6],[40,44,29,36,"supabase"],[40,56,29,44],[40,57,29,44,"supabase"],[40,65,29,44],[40,66,30,9,"from"],[40,70,30,13],[40,71,30,14],[40,79,30,22],[40,80,30,23],[40,81,31,9,"insert"],[40,87,31,15],[40,88,31,16],[41,14,32,10,"user_id"],[41,21,32,17],[41,23,32,19,"user"],[41,27,32,23],[41,28,32,24,"id"],[41,30,32,26],[42,14,33,10,"listing_id"],[42,24,33,20],[42,26,33,22,"listingId"],[42,35,33,31],[43,14,34,10,"direction"],[43,23,34,19],[43,25,34,10,"direction"],[44,12,35,8],[44,13,35,9],[44,14,35,10],[44,15,36,9,"select"],[44,21,36,15],[44,22,36,16],[44,26,36,20],[44,27,36,21],[44,28,37,9,"single"],[44,34,37,15],[44,35,37,16],[44,36,37,17],[45,12,29,14,"data"],[45,16,29,18],[45,19,29,18,"_yield$supabase$from$"],[45,40,29,18],[45,41,29,14,"data"],[45,45,29,18],[46,12,29,20,"error"],[46,17,29,25],[46,20,29,25,"_yield$supabase$from$"],[46,41,29,25],[46,42,29,20,"error"],[46,47,29,25],[47,10,39,6],[47,14,39,10,"error"],[47,19,39,15],[47,21,39,17],[48,12,40,8,"console"],[48,19,40,15],[48,20,40,16,"error"],[48,25,40,21],[48,26,40,22],[48,67,40,63],[48,69,40,65,"error"],[48,74,40,70],[48,75,40,71],[49,12,41,8],[49,18,41,14,"error"],[49,23,41,19],[50,10,42,6],[51,10,44,6,"console"],[51,17,44,13],[51,18,44,14,"log"],[51,21,44,17],[51,22,44,18],[51,51,44,47,"direction"],[51,60,44,56],[51,67,44,63,"listingId"],[51,76,44,72],[51,78,44,74],[51,79,44,75],[53,10,46,6],[54,10,47,6],[55,10,48,6],[55,17,48,13],[56,12,49,8,"swipe_id"],[56,20,49,16],[56,22,49,18,"data"],[56,26,49,22],[56,27,49,23,"id"],[56,29,49,25],[57,12,50,8,"match"],[57,17,50,13],[57,19,50,15],[58,10,51,6],[58,11,51,7],[59,8,52,4],[59,9,52,5],[60,8,52,5],[60,17,26,4,"mutationFn"],[60,27,26,14,"mutationFn"],[60,28,26,14,"_x"],[60,30,26,14],[61,10,26,14],[61,17,26,14,"_mutationFn"],[61,28,26,14],[61,29,26,14,"apply"],[61,34,26,14],[61,41,26,14,"arguments"],[61,50,26,14],[62,8,26,14],[63,8,26,14],[63,15,26,4,"mutationFn"],[63,25,26,14],[64,6,26,14],[65,4,53,2],[65,5,53,3],[65,6,53,4],[66,2,54,0],[66,3,54,1],[67,2,54,2,"_s"],[67,4,54,2],[67,5,22,6,"useRecordSwipe"],[67,19,22,20],[68,4,22,20],[68,12,23,19,"useAuth"],[68,32,23,26],[68,33,23,26,"useAuth"],[68,40,23,26],[68,42,25,9,"useMutation"],[68,61,25,20],[68,62,25,20,"useMutation"],[68,73,25,20],[69,2,25,20],[70,2,56,0],[70,6,56,0,"_default"],[70,14,56,0],[70,17,56,15,"useRecordSwipe"],[70,31,56,29],[71,0,56,30],[71,3]],"functionMap":{"names":["<global>","useRecordSwipe","useMutation$argument_0.mutationFn"],"mappings":"AAA;uBCqB;gBCI;KD0B;CDE"},"hasCjsExports":false},"type":"js/module"}]}