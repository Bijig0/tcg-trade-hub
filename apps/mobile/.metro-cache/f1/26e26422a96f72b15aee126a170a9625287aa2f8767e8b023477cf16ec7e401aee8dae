{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":42,"index":111}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":112},"end":{"line":3,"column":49,"index":161}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":162},"end":{"line":4,"column":43,"index":205}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[3], \"@/context/AuthProvider\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  /**\n   * Hook that records a swipe action (like/pass) on a listing.\n   *\n   * Inserts directly into the swipes table. On success, invalidates feed queries\n   * so already-swiped listings are excluded.\n   */\n  var useRecordSwipe = () => {\n    _s();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var listingId = _ref.listingId,\n            direction = _ref.direction;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('swipes').insert({\n              user_id: user.id,\n              listing_id: listingId,\n              direction\n            }).select('id').single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) {\n            console.error('[useRecordSwipe] Error recording swipe:', error);\n            throw error;\n          }\n          console.log(`[useRecordSwipe] Recorded ${direction} on ${listingId}`);\n\n          // Match detection is handled server-side (triggers/functions).\n          // For now, return no match â€” matches are created through offers.\n          return {\n            swipe_id: data.id,\n            match: null\n          };\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.feedKeys.lists()\n        });\n      }\n    });\n  };\n  _s(useRecordSwipe, \"dnbh6EEK3obsACI89MEmdRnG9p0=\", false, function () {\n    return [_contextAuthProvider.useAuth, _tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  var _default = useRecordSwipe;\n});","lineCount":77,"map":[[13,2,61,0,"Object"],[13,8,61,0],[13,9,61,0,"defineProperty"],[13,23,61,0],[13,24,61,0,"exports"],[13,31,61,0],[14,4,61,0,"enumerable"],[14,14,61,0],[15,4,61,0,"get"],[15,7,61,0],[15,18,61,0,"get"],[15,19,61,0],[16,6,61,0],[16,13,61,0,"_default"],[16,21,61,0],[17,4,61,0],[18,2,61,0],[19,2,61,30],[19,6,61,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,61,30],[19,45,61,30,"require"],[19,52,61,30],[19,53,61,30,"_dependencyMap"],[19,67,61,30],[20,2,61,30],[20,6,61,30,"_asyncToGenerator"],[20,23,61,30],[20,26,61,30,"_interopDefault"],[20,41,61,30],[20,42,61,30,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,61,30],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_contextAuthProvider"],[23,26,3,0],[23,29,3,0,"require"],[23,36,3,0],[23,37,3,0,"_dependencyMap"],[23,51,3,0],[24,2,4,0],[24,6,4,0,"_queryKeys"],[24,16,4,0],[24,19,4,0,"require"],[24,26,4,0],[24,27,4,0,"_dependencyMap"],[24,41,4,0],[25,2,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,2,23,0],[31,6,23,6,"useRecordSwipe"],[31,20,23,20],[31,23,23,23,"useRecordSwipe"],[31,24,23,23],[31,29,23,29],[32,4,23,29,"_s"],[32,6,23,29],[33,4,24,2],[33,8,24,2,"_useAuth"],[33,16,24,2],[33,19,24,19],[33,23,24,19,"useAuth"],[33,43,24,26],[33,44,24,26,"useAuth"],[33,51,24,26],[33,53,24,27],[33,54,24,28],[34,6,24,10,"user"],[34,10,24,14],[34,13,24,14,"_useAuth"],[34,21,24,14],[34,22,24,10,"user"],[34,26,24,14],[35,4,25,2],[35,8,25,8,"queryClient"],[35,19,25,19],[35,22,25,22],[35,26,25,22,"useQueryClient"],[35,45,25,36],[35,46,25,36,"useQueryClient"],[35,60,25,36],[35,62,25,37],[35,63,25,38],[36,4,27,2],[36,11,27,9],[36,15,27,9,"useMutation"],[36,34,27,20],[36,35,27,20,"useMutation"],[36,46,27,20],[36,48,27,67],[37,6,28,4,"mutationFn"],[37,16,28,14],[38,8,28,14],[38,12,28,14,"_ref2"],[38,17,28,14],[38,24,28,14,"_asyncToGenerator"],[38,41,28,14],[38,42,28,14,"default"],[38,49,28,14],[38,51,28,16],[38,62,28,16,"_ref"],[38,66,28,16],[38,68,28,52],[39,10,28,52],[39,14,28,25,"listingId"],[39,23,28,34],[39,26,28,34,"_ref"],[39,30,28,34],[39,31,28,25,"listingId"],[39,40,28,34],[40,12,28,36,"direction"],[40,21,28,45],[40,24,28,45,"_ref"],[40,28,28,45],[40,29,28,36,"direction"],[40,38,28,45],[41,10,29,6],[41,14,29,10],[41,15,29,11,"user"],[41,19,29,15],[41,21,29,17],[41,27,29,23],[41,31,29,27,"Error"],[41,36,29,32],[41,37,29,33],[41,56,29,52],[41,57,29,53],[42,10,31,6],[42,14,31,6,"_yield$supabase$from$"],[42,35,31,6],[42,44,31,36,"supabase"],[42,56,31,44],[42,57,31,44,"supabase"],[42,65,31,44],[42,66,32,9,"from"],[42,70,32,13],[42,71,32,14],[42,79,32,22],[42,80,32,23],[42,81,33,9,"insert"],[42,87,33,15],[42,88,33,16],[43,14,34,10,"user_id"],[43,21,34,17],[43,23,34,19,"user"],[43,27,34,23],[43,28,34,24,"id"],[43,30,34,26],[44,14,35,10,"listing_id"],[44,24,35,20],[44,26,35,22,"listingId"],[44,35,35,31],[45,14,36,10,"direction"],[46,12,37,8],[46,13,37,9],[46,14,37,10],[46,15,38,9,"select"],[46,21,38,15],[46,22,38,16],[46,26,38,20],[46,27,38,21],[46,28,39,9,"single"],[46,34,39,15],[46,35,39,16],[46,36,39,17],[47,12,31,14,"data"],[47,16,31,18],[47,19,31,18,"_yield$supabase$from$"],[47,40,31,18],[47,41,31,14,"data"],[47,45,31,18],[48,12,31,20,"error"],[48,17,31,25],[48,20,31,25,"_yield$supabase$from$"],[48,41,31,25],[48,42,31,20,"error"],[48,47,31,25],[49,10,41,6],[49,14,41,10,"error"],[49,19,41,15],[49,21,41,17],[50,12,42,8,"console"],[50,19,42,15],[50,20,42,16,"error"],[50,25,42,21],[50,26,42,22],[50,67,42,63],[50,69,42,65,"error"],[50,74,42,70],[50,75,42,71],[51,12,43,8],[51,18,43,14,"error"],[51,23,43,19],[52,10,44,6],[53,10,46,6,"console"],[53,17,46,13],[53,18,46,14,"log"],[53,21,46,17],[53,22,46,18],[53,51,46,47,"direction"],[53,60,46,56],[53,67,46,63,"listingId"],[53,76,46,72],[53,78,46,74],[53,79,46,75],[55,10,48,6],[56,10,49,6],[57,10,50,6],[57,17,50,13],[58,12,51,8,"swipe_id"],[58,20,51,16],[58,22,51,18,"data"],[58,26,51,22],[58,27,51,23,"id"],[58,29,51,25],[59,12,52,8,"match"],[59,17,52,13],[59,19,52,15],[60,10,53,6],[60,11,53,7],[61,8,54,4],[61,9,54,5],[62,8,54,5],[62,24,28,4,"mutationFn"],[62,34,28,14,"mutationFn"],[62,35,28,14,"_x"],[62,37,28,14],[63,10,28,14],[63,17,28,14,"_ref2"],[63,22,28,14],[63,23,28,14,"apply"],[63,28,28,14],[63,35,28,14,"arguments"],[63,44,28,14],[64,8,28,14],[65,6,28,14],[65,9,54,5],[66,6,55,4,"onSuccess"],[66,15,55,13],[66,17,55,15,"onSuccess"],[66,18,55,15],[66,23,55,21],[67,8,56,6,"queryClient"],[67,19,56,17],[67,20,56,18,"invalidateQueries"],[67,37,56,35],[67,38,56,36],[68,10,56,38,"queryKey"],[68,18,56,46],[68,20,56,48,"feedKeys"],[68,30,56,56],[68,31,56,56,"feedKeys"],[68,39,56,56],[68,40,56,57,"lists"],[68,45,56,62],[68,46,56,63],[69,8,56,65],[69,9,56,66],[69,10,56,67],[70,6,57,4],[71,4,58,2],[71,5,58,3],[71,6,58,4],[72,2,59,0],[72,3,59,1],[73,2,59,2,"_s"],[73,4,59,2],[73,5,23,6,"useRecordSwipe"],[73,19,23,20],[74,4,23,20],[74,12,24,19,"useAuth"],[74,32,24,26],[74,33,24,26,"useAuth"],[74,40,24,26],[74,42,25,22,"useQueryClient"],[74,61,25,36],[74,62,25,36,"useQueryClient"],[74,76,25,36],[74,78,27,9,"useMutation"],[74,97,27,20],[74,98,27,20,"useMutation"],[74,109,27,20],[75,2,27,20],[76,2,61,0],[76,6,61,0,"_default"],[76,14,61,0],[76,17,61,15,"useRecordSwipe"],[76,31,61,29],[77,0,61,30],[77,3]],"functionMap":{"names":["<global>","useRecordSwipe","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess"],"mappings":"AAA;uBCsB;gBCK;KD0B;eEC;KFE;CDE"},"hasCjsExports":false},"type":"js/module"}]}