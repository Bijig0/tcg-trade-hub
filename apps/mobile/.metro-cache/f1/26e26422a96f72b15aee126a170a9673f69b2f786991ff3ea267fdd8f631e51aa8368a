{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":42,"index":95}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":49,"index":145}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[3], \"@/context/AuthProvider\");\n  /**\n   * Hook that records a swipe action (like/pass) on a listing.\n   *\n   * Inserts directly into the swipes table. On success, invalidates feed queries\n   * so already-swiped listings are excluded.\n   */\n  var useRecordSwipe = () => {\n    _s();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var queryClient = useQueryClient();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var listingId = _ref.listingId,\n            direction = _ref.direction;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('swipes').insert({\n              user_id: user.id,\n              listing_id: listingId,\n              direction\n            }).select('id').single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) {\n            console.error('[useRecordSwipe] Error recording swipe:', error);\n            throw error;\n          }\n          console.log(`[useRecordSwipe] Recorded ${direction} on ${listingId}`);\n\n          // Match detection is handled server-side (triggers/functions).\n          // For now, return no match â€” matches are created through offers.\n          return {\n            swipe_id: data.id,\n            match: null\n          };\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: feedKeys.lists()\n        });\n      }\n    });\n  };\n  _s(useRecordSwipe, \"dnbh6EEK3obsACI89MEmdRnG9p0=\", true, function () {\n    return [_contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useRecordSwipe;\n});","lineCount":76,"map":[[13,2,60,0,"Object"],[13,8,60,0],[13,9,60,0,"defineProperty"],[13,23,60,0],[13,24,60,0,"exports"],[13,31,60,0],[14,4,60,0,"enumerable"],[14,14,60,0],[15,4,60,0,"get"],[15,7,60,0],[15,18,60,0,"get"],[15,19,60,0],[16,6,60,0],[16,13,60,0,"_default"],[16,21,60,0],[17,4,60,0],[18,2,60,0],[19,2,60,30],[19,6,60,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,60,30],[19,45,60,30,"require"],[19,52,60,30],[19,53,60,30,"_dependencyMap"],[19,67,60,30],[20,2,60,30],[20,6,60,30,"_asyncToGenerator"],[20,23,60,30],[20,26,60,30,"_interopDefault"],[20,41,60,30],[20,42,60,30,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,60,30],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_contextAuthProvider"],[23,26,3,0],[23,29,3,0,"require"],[23,36,3,0],[23,37,3,0,"_dependencyMap"],[23,51,3,0],[24,2,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,2,22,0],[30,6,22,6,"useRecordSwipe"],[30,20,22,20],[30,23,22,23,"useRecordSwipe"],[30,24,22,23],[30,29,22,29],[31,4,22,29,"_s"],[31,6,22,29],[32,4,23,2],[32,8,23,2,"_useAuth"],[32,16,23,2],[32,19,23,19],[32,23,23,19,"useAuth"],[32,43,23,26],[32,44,23,26,"useAuth"],[32,51,23,26],[32,53,23,27],[32,54,23,28],[33,6,23,10,"user"],[33,10,23,14],[33,13,23,14,"_useAuth"],[33,21,23,14],[33,22,23,10,"user"],[33,26,23,14],[34,4,24,2],[34,8,24,8,"queryClient"],[34,19,24,19],[34,22,24,22,"useQueryClient"],[34,36,24,36],[34,37,24,37],[34,38,24,38],[35,4,26,2],[35,11,26,9],[35,15,26,9,"useMutation"],[35,34,26,20],[35,35,26,20,"useMutation"],[35,46,26,20],[35,48,26,67],[36,6,27,4,"mutationFn"],[36,16,27,14],[37,8,27,14],[37,12,27,14,"_ref2"],[37,17,27,14],[37,24,27,14,"_asyncToGenerator"],[37,41,27,14],[37,42,27,14,"default"],[37,49,27,14],[37,51,27,16],[37,62,27,16,"_ref"],[37,66,27,16],[37,68,27,52],[38,10,27,52],[38,14,27,25,"listingId"],[38,23,27,34],[38,26,27,34,"_ref"],[38,30,27,34],[38,31,27,25,"listingId"],[38,40,27,34],[39,12,27,36,"direction"],[39,21,27,45],[39,24,27,45,"_ref"],[39,28,27,45],[39,29,27,36,"direction"],[39,38,27,45],[40,10,28,6],[40,14,28,10],[40,15,28,11,"user"],[40,19,28,15],[40,21,28,17],[40,27,28,23],[40,31,28,27,"Error"],[40,36,28,32],[40,37,28,33],[40,56,28,52],[40,57,28,53],[41,10,30,6],[41,14,30,6,"_yield$supabase$from$"],[41,35,30,6],[41,44,30,36,"supabase"],[41,56,30,44],[41,57,30,44,"supabase"],[41,65,30,44],[41,66,31,9,"from"],[41,70,31,13],[41,71,31,14],[41,79,31,22],[41,80,31,23],[41,81,32,9,"insert"],[41,87,32,15],[41,88,32,16],[42,14,33,10,"user_id"],[42,21,33,17],[42,23,33,19,"user"],[42,27,33,23],[42,28,33,24,"id"],[42,30,33,26],[43,14,34,10,"listing_id"],[43,24,34,20],[43,26,34,22,"listingId"],[43,35,34,31],[44,14,35,10,"direction"],[45,12,36,8],[45,13,36,9],[45,14,36,10],[45,15,37,9,"select"],[45,21,37,15],[45,22,37,16],[45,26,37,20],[45,27,37,21],[45,28,38,9,"single"],[45,34,38,15],[45,35,38,16],[45,36,38,17],[46,12,30,14,"data"],[46,16,30,18],[46,19,30,18,"_yield$supabase$from$"],[46,40,30,18],[46,41,30,14,"data"],[46,45,30,18],[47,12,30,20,"error"],[47,17,30,25],[47,20,30,25,"_yield$supabase$from$"],[47,41,30,25],[47,42,30,20,"error"],[47,47,30,25],[48,10,40,6],[48,14,40,10,"error"],[48,19,40,15],[48,21,40,17],[49,12,41,8,"console"],[49,19,41,15],[49,20,41,16,"error"],[49,25,41,21],[49,26,41,22],[49,67,41,63],[49,69,41,65,"error"],[49,74,41,70],[49,75,41,71],[50,12,42,8],[50,18,42,14,"error"],[50,23,42,19],[51,10,43,6],[52,10,45,6,"console"],[52,17,45,13],[52,18,45,14,"log"],[52,21,45,17],[52,22,45,18],[52,51,45,47,"direction"],[52,60,45,56],[52,67,45,63,"listingId"],[52,76,45,72],[52,78,45,74],[52,79,45,75],[54,10,47,6],[55,10,48,6],[56,10,49,6],[56,17,49,13],[57,12,50,8,"swipe_id"],[57,20,50,16],[57,22,50,18,"data"],[57,26,50,22],[57,27,50,23,"id"],[57,29,50,25],[58,12,51,8,"match"],[58,17,51,13],[58,19,51,15],[59,10,52,6],[59,11,52,7],[60,8,53,4],[60,9,53,5],[61,8,53,5],[61,24,27,4,"mutationFn"],[61,34,27,14,"mutationFn"],[61,35,27,14,"_x"],[61,37,27,14],[62,10,27,14],[62,17,27,14,"_ref2"],[62,22,27,14],[62,23,27,14,"apply"],[62,28,27,14],[62,35,27,14,"arguments"],[62,44,27,14],[63,8,27,14],[64,6,27,14],[64,9,53,5],[65,6,54,4,"onSuccess"],[65,15,54,13],[65,17,54,15,"onSuccess"],[65,18,54,15],[65,23,54,21],[66,8,55,6,"queryClient"],[66,19,55,17],[66,20,55,18,"invalidateQueries"],[66,37,55,35],[66,38,55,36],[67,10,55,38,"queryKey"],[67,18,55,46],[67,20,55,48,"feedKeys"],[67,28,55,56],[67,29,55,57,"lists"],[67,34,55,62],[67,35,55,63],[68,8,55,65],[68,9,55,66],[68,10,55,67],[69,6,56,4],[70,4,57,2],[70,5,57,3],[70,6,57,4],[71,2,58,0],[71,3,58,1],[72,2,58,2,"_s"],[72,4,58,2],[72,5,22,6,"useRecordSwipe"],[72,19,22,20],[73,4,22,20],[73,12,23,19,"useAuth"],[73,32,23,26],[73,33,23,26,"useAuth"],[73,40,23,26],[73,42,26,9,"useMutation"],[73,61,26,20],[73,62,26,20,"useMutation"],[73,73,26,20],[74,2,26,20],[75,2,60,0],[75,6,60,0,"_default"],[75,14,60,0],[75,17,60,15,"useRecordSwipe"],[75,31,60,29],[76,0,60,30],[76,3]],"functionMap":{"names":["<global>","useRecordSwipe","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess"],"mappings":"AAA;uBCqB;gBCK;KD0B;eEC;KFE;CDE"},"hasCjsExports":false},"type":"js/module"}]}