{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":49,"index":142}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[3], \"@/context/AuthProvider\");\n  /**\n   * Lightweight check for whether the current user has any active listings.\n   *\n   * Uses a head-only count query (fetches zero row data) so it's as cheap as\n   * possible. Returns `{ hasListings, isLoading }`.\n   */\n  var useHasActiveListings = function useHasActiveListings() {\n    _s();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var _useQuery = (0, _tanstackReactQuery.useQuery)({\n        queryKey: ['user-has-active-listings', user == null ? void 0 : user.id],\n        queryFn: function () {\n          var _queryFn = (0, _asyncToGenerator.default)(function* () {\n            if (!user) return 0;\n            var _yield$supabase$from$ = yield _libSupabase.supabase.from('listings').select('id', {\n                count: 'exact',\n                head: true\n              }).eq('user_id', user.id).eq('status', 'active'),\n              count = _yield$supabase$from$.count,\n              error = _yield$supabase$from$.error;\n            if (error) throw error;\n            return count != null ? count : 0;\n          });\n          function queryFn() {\n            return _queryFn.apply(this, arguments);\n          }\n          return queryFn;\n        }(),\n        enabled: !!user\n      }),\n      data = _useQuery.data,\n      isLoading = _useQuery.isLoading;\n    return {\n      hasListings: (data != null ? data : 0) > 0,\n      isLoading: isLoading\n    };\n  };\n  _s(useHasActiveListings, \"Snw5yRP/ErDbOMbJJqBPvnVkaEs=\", false, function () {\n    return [_contextAuthProvider.useAuth, _tanstackReactQuery.useQuery];\n  });\n  var _default = useHasActiveListings;\n});","lineCount":66,"map":[[13,2,36,0,"Object"],[13,8,36,0],[13,9,36,0,"defineProperty"],[13,23,36,0],[13,24,36,0,"exports"],[13,31,36,0],[14,4,36,0,"enumerable"],[14,14,36,0],[15,4,36,0,"get"],[15,7,36,0],[15,18,36,0,"get"],[15,19,36,0],[16,6,36,0],[16,13,36,0,"_default"],[16,21,36,0],[17,4,36,0],[18,2,36,0],[19,2,36,36],[19,6,36,36,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,36,36],[19,45,36,36,"require"],[19,52,36,36],[19,53,36,36,"_dependencyMap"],[19,67,36,36],[20,2,36,36],[20,6,36,36,"_asyncToGenerator"],[20,23,36,36],[20,26,36,36,"_interopDefault"],[20,41,36,36],[20,42,36,36,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,36,36],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_contextAuthProvider"],[23,26,3,0],[23,29,3,0,"require"],[23,36,3,0],[23,37,3,0,"_dependencyMap"],[23,51,3,0],[24,2,5,0],[25,0,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[29,0,10,0],[30,2,11,0],[30,6,11,6,"useHasActiveListings"],[30,26,11,26],[30,29,11,29],[30,38,11,6,"useHasActiveListings"],[30,58,11,26,"useHasActiveListings"],[30,59,11,26],[30,61,11,35],[31,4,11,35,"_s"],[31,6,11,35],[32,4,12,2],[32,8,12,2,"_useAuth"],[32,16,12,2],[32,19,12,19],[32,23,12,19,"useAuth"],[32,43,12,26],[32,44,12,26,"useAuth"],[32,51,12,26],[32,53,12,27],[32,54,12,28],[33,6,12,10,"user"],[33,10,12,14],[33,13,12,14,"_useAuth"],[33,21,12,14],[33,22,12,10,"user"],[33,26,12,14],[34,4,14,2],[34,8,14,2,"_useQuery"],[34,17,14,2],[34,20,14,30],[34,24,14,30,"useQuery"],[34,43,14,38],[34,44,14,38,"useQuery"],[34,52,14,38],[34,54,14,39],[35,8,15,4,"queryKey"],[35,16,15,12],[35,18,15,14],[35,19,15,15],[35,45,15,41],[35,47,15,43,"user"],[35,51,15,47],[35,71,15,43,"user"],[35,75,15,47],[35,76,15,49,"id"],[35,78,15,51],[35,79,15,52],[36,8,16,4,"queryFn"],[36,15,16,11],[37,10,16,11],[37,14,16,11,"_queryFn"],[37,22,16,11],[37,29,16,11,"_asyncToGenerator"],[37,46,16,11],[37,47,16,11,"default"],[37,54,16,11],[37,56,16,13],[37,69,16,25],[38,12,17,6],[38,16,17,10],[38,17,17,11,"user"],[38,21,17,15],[38,23,17,17],[38,30,17,24],[38,31,17,25],[39,12,18,6],[39,16,18,6,"_yield$supabase$from$"],[39,37,18,6],[39,46,18,37,"supabase"],[39,58,18,45],[39,59,18,45,"supabase"],[39,67,18,45],[39,68,19,9,"from"],[39,72,19,13],[39,73,19,14],[39,83,19,24],[39,84,19,25],[39,85,20,9,"select"],[39,91,20,15],[39,92,20,16],[39,96,20,20],[39,98,20,22],[40,16,20,24,"count"],[40,21,20,29],[40,23,20,31],[40,30,20,38],[41,16,20,40,"head"],[41,20,20,44],[41,22,20,46],[42,14,20,51],[42,15,20,52],[42,16,20,53],[42,17,21,9,"eq"],[42,19,21,11],[42,20,21,12],[42,29,21,21],[42,31,21,23,"user"],[42,35,21,27],[42,36,21,28,"id"],[42,38,21,30],[42,39,21,31],[42,40,22,9,"eq"],[42,42,22,11],[42,43,22,12],[42,51,22,20],[42,53,22,22],[42,61,22,30],[42,62,22,31],[43,14,18,14,"count"],[43,19,18,19],[43,22,18,19,"_yield$supabase$from$"],[43,43,18,19],[43,44,18,14,"count"],[43,49,18,19],[44,14,18,21,"error"],[44,19,18,26],[44,22,18,26,"_yield$supabase$from$"],[44,43,18,26],[44,44,18,21,"error"],[44,49,18,26],[45,12,24,6],[45,16,24,10,"error"],[45,21,24,15],[45,23,24,17],[45,29,24,23,"error"],[45,34,24,28],[46,12,25,6],[46,19,25,13,"count"],[46,24,25,18],[46,35,25,13,"count"],[46,40,25,18],[46,43,25,22],[46,44,25,23],[47,10,26,4],[47,11,26,5],[48,10,26,5],[48,19,16,4,"queryFn"],[48,26,16,11,"queryFn"],[48,27,16,11],[49,12,16,11],[49,19,16,11,"_queryFn"],[49,27,16,11],[49,28,16,11,"apply"],[49,33,16,11],[49,40,16,11,"arguments"],[49,49,16,11],[50,10,16,11],[51,10,16,11],[51,17,16,4,"queryFn"],[51,24,16,11],[52,8,16,11],[52,11,26,5],[53,8,27,4,"enabled"],[53,15,27,11],[53,17,27,13],[53,18,27,14],[53,19,27,15,"user"],[54,6,28,2],[54,7,28,3],[54,8,28,4],[55,6,14,10,"data"],[55,10,14,14],[55,13,14,14,"_useQuery"],[55,22,14,14],[55,23,14,10,"data"],[55,27,14,14],[56,6,14,16,"isLoading"],[56,15,14,25],[56,18,14,25,"_useQuery"],[56,27,14,25],[56,28,14,16,"isLoading"],[56,37,14,25],[57,4,30,2],[57,11,30,9],[58,6,31,4,"hasListings"],[58,17,31,15],[58,19,31,17],[58,20,31,18,"data"],[58,24,31,22],[58,35,31,18,"data"],[58,39,31,22],[58,42,31,26],[58,43,31,27],[58,47,31,31],[58,48,31,32],[59,6,32,4,"isLoading"],[59,15,32,13],[59,17,32,4,"isLoading"],[60,4,33,2],[60,5,33,3],[61,2,34,0],[61,3,34,1],[62,2,34,2,"_s"],[62,4,34,2],[62,5,11,6,"useHasActiveListings"],[62,25,11,26],[63,4,11,26],[63,12,12,19,"useAuth"],[63,32,12,26],[63,33,12,26,"useAuth"],[63,40,12,26],[63,42,14,30,"useQuery"],[63,61,14,38],[63,62,14,38,"useQuery"],[63,70,14,38],[64,2,14,38],[65,2,36,0],[65,6,36,0,"_default"],[65,14,36,0],[65,17,36,15,"useHasActiveListings"],[65,37,36,35],[66,0,36,36],[66,3]],"functionMap":{"names":["<global>","useHasActiveListings","useQuery$argument_0.queryFn"],"mappings":"AAA;6BCU;aCK;KDU;CDQ"},"hasCjsExports":false},"type":"js/module"}]}