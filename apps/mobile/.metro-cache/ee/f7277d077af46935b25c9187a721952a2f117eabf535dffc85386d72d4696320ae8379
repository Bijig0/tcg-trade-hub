{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":46,"index":139}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _queryKeys = require(_dependencyMap[3]);\n  /**\n   * Hook that fetches all ratings for a given user.\n   *\n   * Returns each rating with the rater's display name, score,\n   * optional comment, and date.\n   */\n  var useUserRatings = userId => {\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.profileKeys.ratings(userId),\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('ratings').select('id, score, comment, created_at, rater_id').eq('ratee_id', userId).order('created_at', {\n              ascending: false\n            }),\n            ratings = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!ratings || ratings.length === 0) return [];\n\n          // Resolve rater display names\n          var raterIds = [...new Set(ratings.map(r => r.rater_id))];\n          var _yield$supabase$from$2 = yield _libSupabase.supabase.from('users').select('id, display_name').in('id', raterIds),\n            raters = _yield$supabase$from$2.data;\n          var ratersMap = new Map((raters ?? []).map(r => [r.id, r.display_name]));\n          return ratings.map(r => ({\n            id: r.id,\n            score: r.score,\n            comment: r.comment,\n            created_at: r.created_at,\n            rater_display_name: ratersMap.get(r.rater_id) ?? 'Unknown'\n          }));\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      enabled: !!userId\n    });\n  };\n  var _default = useUserRatings;\n});","lineCount":63,"map":[[12,2,53,0,"Object"],[12,8,53,0],[12,9,53,0,"defineProperty"],[12,23,53,0],[12,24,53,0,"exports"],[12,31,53,0],[13,4,53,0,"enumerable"],[13,14,53,0],[14,4,53,0,"get"],[14,7,53,0],[14,18,53,0,"get"],[14,19,53,0],[15,6,53,0],[15,13,53,0,"_default"],[15,21,53,0],[16,4,53,0],[17,2,53,0],[18,2,53,30],[18,6,53,30,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,53,30],[18,45,53,30,"require"],[18,52,53,30],[18,53,53,30,"_dependencyMap"],[18,67,53,30],[19,2,53,30],[19,6,53,30,"_asyncToGenerator"],[19,23,53,30],[19,26,53,30,"_interopDefault"],[19,41,53,30],[19,42,53,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,53,30],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_queryKeys"],[22,16,3,0],[22,19,3,0,"require"],[22,26,3,0],[22,27,3,0,"_dependencyMap"],[22,41,3,0],[23,2,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,2,19,0],[29,6,19,6,"useUserRatings"],[29,20,19,20],[29,23,19,24,"userId"],[29,29,19,38],[29,33,19,43],[30,4,20,2],[30,11,20,9],[30,15,20,9,"useQuery"],[30,34,20,17],[30,35,20,17,"useQuery"],[30,43,20,17],[30,45,20,39],[31,6,21,4,"queryKey"],[31,14,21,12],[31,16,21,14,"profileKeys"],[31,26,21,25],[31,27,21,25,"profileKeys"],[31,38,21,25],[31,39,21,26,"ratings"],[31,46,21,33],[31,47,21,34,"userId"],[31,53,21,40],[31,54,21,41],[32,6,22,4,"queryFn"],[32,13,22,11],[33,8,22,11],[33,12,22,11,"_ref"],[33,16,22,11],[33,23,22,11,"_asyncToGenerator"],[33,40,22,11],[33,41,22,11,"default"],[33,48,22,11],[33,50,22,13],[33,63,22,25],[34,10,23,6],[34,14,23,6,"_yield$supabase$from$"],[34,35,23,6],[34,44,23,45,"supabase"],[34,56,23,53],[34,57,23,53,"supabase"],[34,65,23,53],[34,66,24,9,"from"],[34,70,24,13],[34,71,24,14],[34,80,24,23],[34,81,24,24],[34,82,25,9,"select"],[34,88,25,15],[34,89,25,16],[34,131,25,58],[34,132,25,59],[34,133,26,9,"eq"],[34,135,26,11],[34,136,26,12],[34,146,26,22],[34,148,26,24,"userId"],[34,154,26,30],[34,155,26,31],[34,156,27,9,"order"],[34,161,27,14],[34,162,27,15],[34,174,27,27],[34,176,27,29],[35,14,27,31,"ascending"],[35,23,27,40],[35,25,27,42],[36,12,27,48],[36,13,27,49],[36,14,27,50],[37,12,23,20,"ratings"],[37,19,23,27],[37,22,23,27,"_yield$supabase$from$"],[37,43,23,27],[37,44,23,14,"data"],[37,48,23,18],[38,12,23,29,"error"],[38,17,23,34],[38,20,23,34,"_yield$supabase$from$"],[38,41,23,34],[38,42,23,29,"error"],[38,47,23,34],[39,10,29,6],[39,14,29,10,"error"],[39,19,29,15],[39,21,29,17],[39,27,29,23,"error"],[39,32,29,28],[40,10,30,6],[40,14,30,10],[40,15,30,11,"ratings"],[40,22,30,18],[40,26,30,22,"ratings"],[40,33,30,29],[40,34,30,30,"length"],[40,40,30,36],[40,45,30,41],[40,46,30,42],[40,48,30,44],[40,55,30,51],[40,57,30,53],[42,10,32,6],[43,10,33,6],[43,14,33,12,"raterIds"],[43,22,33,20],[43,25,33,23],[43,26,33,24],[43,29,33,27],[43,33,33,31,"Set"],[43,36,33,34],[43,37,33,35,"ratings"],[43,44,33,42],[43,45,33,43,"map"],[43,48,33,46],[43,49,33,48,"r"],[43,50,33,49],[43,54,33,54,"r"],[43,55,33,55],[43,56,33,56,"rater_id"],[43,64,33,64],[43,65,33,65],[43,66,33,66],[43,67,33,67],[44,10,34,6],[44,14,34,6,"_yield$supabase$from$2"],[44,36,34,6],[44,45,34,37,"supabase"],[44,57,34,45],[44,58,34,45,"supabase"],[44,66,34,45],[44,67,35,9,"from"],[44,71,35,13],[44,72,35,14],[44,79,35,21],[44,80,35,22],[44,81,36,9,"select"],[44,87,36,15],[44,88,36,16],[44,106,36,34],[44,107,36,35],[44,108,37,9,"in"],[44,110,37,11],[44,111,37,12],[44,115,37,16],[44,117,37,18,"raterIds"],[44,125,37,26],[44,126,37,27],[45,12,34,20,"raters"],[45,18,34,26],[45,21,34,26,"_yield$supabase$from$2"],[45,43,34,26],[45,44,34,14,"data"],[45,48,34,18],[46,10,39,6],[46,14,39,12,"ratersMap"],[46,23,39,21],[46,26,39,24],[46,30,39,28,"Map"],[46,33,39,31],[46,34,39,32],[46,35,39,33,"raters"],[46,41,39,39],[46,45,39,43],[46,47,39,45],[46,49,39,47,"map"],[46,52,39,50],[46,53,39,52,"r"],[46,54,39,53],[46,58,39,58],[46,59,39,59,"r"],[46,60,39,60],[46,61,39,61,"id"],[46,63,39,63],[46,65,39,65,"r"],[46,66,39,66],[46,67,39,67,"display_name"],[46,79,39,79],[46,80,39,80],[46,81,39,81],[46,82,39,82],[47,10,41,6],[47,17,41,13,"ratings"],[47,24,41,20],[47,25,41,21,"map"],[47,28,41,24],[47,29,41,26,"r"],[47,30,41,27],[47,35,41,33],[48,12,42,8,"id"],[48,14,42,10],[48,16,42,12,"r"],[48,17,42,13],[48,18,42,14,"id"],[48,20,42,16],[49,12,43,8,"score"],[49,17,43,13],[49,19,43,15,"r"],[49,20,43,16],[49,21,43,17,"score"],[49,26,43,22],[50,12,44,8,"comment"],[50,19,44,15],[50,21,44,17,"r"],[50,22,44,18],[50,23,44,19,"comment"],[50,30,44,26],[51,12,45,8,"created_at"],[51,22,45,18],[51,24,45,20,"r"],[51,25,45,21],[51,26,45,22,"created_at"],[51,36,45,32],[52,12,46,8,"rater_display_name"],[52,30,46,26],[52,32,46,28,"ratersMap"],[52,41,46,37],[52,42,46,38,"get"],[52,45,46,41],[52,46,46,42,"r"],[52,47,46,43],[52,48,46,44,"rater_id"],[52,56,46,52],[52,57,46,53],[52,61,46,57],[53,10,47,6],[53,11,47,7],[53,12,47,8],[53,13,47,9],[54,8,48,4],[54,9,48,5],[55,8,48,5],[55,24,22,4,"queryFn"],[55,31,22,11,"queryFn"],[55,32,22,11],[56,10,22,11],[56,17,22,11,"_ref"],[56,21,22,11],[56,22,22,11,"apply"],[56,27,22,11],[56,34,22,11,"arguments"],[56,43,22,11],[57,8,22,11],[58,6,22,11],[58,9,48,5],[59,6,49,4,"enabled"],[59,13,49,11],[59,15,49,13],[59,16,49,14],[59,17,49,15,"userId"],[60,4,50,2],[60,5,50,3],[60,6,50,4],[61,2,51,0],[61,3,51,1],[62,2,53,0],[62,6,53,0,"_default"],[62,14,53,0],[62,17,53,15,"useUserRatings"],[62,31,53,29],[63,0,53,30],[63,3]],"functionMap":{"names":["<global>","useUserRatings","useQuery$argument_0.queryFn","ratings.map$argument_0","map$argument_0"],"mappings":"AAA;uBCkB;aCG;+CCW,iBD;mDEM,6BF;yBCE;QDM;KDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}