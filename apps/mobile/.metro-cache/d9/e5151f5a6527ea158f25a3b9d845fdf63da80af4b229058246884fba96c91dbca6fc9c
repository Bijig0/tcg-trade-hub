{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-updates","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":22,"column":16,"index":727},"end":{"line":22,"column":39,"index":750}}],"key":"sQsauHA5DNzHLms5+mQxP53QDg8=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var POLL_INTERVAL_MS = 10_000;\n\n  /**\n   * Polls for OTA updates and auto-reloads the app when one is found.\n   * Designed for live development: Claude pushes an EAS update via a stop hook,\n   * and this hook picks it up within seconds and seamlessly reloads.\n   *\n   * Returns `{ isUpdating }` so the layout can show a visual overlay.\n   * Only active in non-dev mode (i.e., preview/production builds not connected to Metro).\n   */\n  var useAutoUpdate = () => {\n    var checking = (0, _react.useRef)(false);\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isUpdating = _useState2[0],\n      setIsUpdating = _useState2[1];\n    (0, _react.useEffect)(() => {\n      var Updates = null;\n      try {\n        Updates = require(_dependencyMap[3], \"expo-updates\");\n      } catch {\n        return;\n      }\n      var poll = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          if (checking.current || !Updates) return;\n          checking.current = true;\n          try {\n            var result = yield Updates.checkForUpdateAsync();\n            if (!result.isAvailable) {\n              checking.current = false;\n              return;\n            }\n            console.log('[AutoUpdate] Update found, downloading...');\n            yield Updates.fetchUpdateAsync();\n            console.log('[AutoUpdate] Downloaded, reloading...');\n            setIsUpdating(true);\n            // Brief delay so the overlay renders before reload\n            yield new Promise(resolve => setTimeout(resolve, 400));\n            yield Updates.reloadAsync();\n          } catch (error) {\n            // Silent fail â€” will retry on next poll\n            console.warn('[AutoUpdate] Check failed:', error);\n            checking.current = false;\n            setIsUpdating(false);\n          }\n        });\n        return function poll() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      // Initial check after a short delay\n      var initialTimeout = setTimeout(poll, 3_000);\n      // Then poll on interval\n      var interval = setInterval(poll, POLL_INTERVAL_MS);\n      return () => {\n        clearTimeout(initialTimeout);\n        clearInterval(interval);\n      };\n    }, []);\n    return {\n      isUpdating\n    };\n  };\n  var _default = useAutoUpdate;\n});","lineCount":89,"map":[[12,2,68,0,"Object"],[12,8,68,0],[12,9,68,0,"defineProperty"],[12,23,68,0],[12,24,68,0,"exports"],[12,31,68,0],[13,4,68,0,"enumerable"],[13,14,68,0],[14,4,68,0,"get"],[14,7,68,0],[14,18,68,0,"get"],[14,19,68,0],[15,6,68,0],[15,13,68,0,"_default"],[15,21,68,0],[16,4,68,0],[17,2,68,0],[18,2,68,29],[18,6,68,29,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,68,29],[18,45,68,29,"require"],[18,52,68,29],[18,53,68,29,"_dependencyMap"],[18,67,68,29],[19,2,68,29],[19,6,68,29,"_asyncToGenerator"],[19,23,68,29],[19,26,68,29,"_interopDefault"],[19,41,68,29],[19,42,68,29,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,68,29],[20,2,68,29],[20,6,68,29,"_babelRuntimeHelpersSlicedToArray"],[20,39,68,29],[20,42,68,29,"require"],[20,49,68,29],[20,50,68,29,"_dependencyMap"],[20,64,68,29],[21,2,68,29],[21,6,68,29,"_slicedToArray"],[21,20,68,29],[21,23,68,29,"_interopDefault"],[21,38,68,29],[21,39,68,29,"_babelRuntimeHelpersSlicedToArray"],[21,72,68,29],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,3,0],[23,6,3,6,"POLL_INTERVAL_MS"],[23,22,3,22],[23,25,3,25],[23,31,3,31],[25,2,5,0],[26,0,6,0],[27,0,7,0],[28,0,8,0],[29,0,9,0],[30,0,10,0],[31,0,11,0],[32,0,12,0],[33,2,13,0],[33,6,13,6,"useAutoUpdate"],[33,19,13,19],[33,22,13,22,"useAutoUpdate"],[33,23,13,22],[33,28,13,28],[34,4,14,2],[34,8,14,8,"checking"],[34,16,14,16],[34,19,14,19],[34,23,14,19,"useRef"],[34,29,14,25],[34,30,14,25,"useRef"],[34,36,14,25],[34,38,14,26],[34,43,14,31],[34,44,14,32],[35,4,15,2],[35,8,15,2,"_useState"],[35,17,15,2],[35,20,15,38],[35,24,15,38,"useState"],[35,30,15,46],[35,31,15,46,"useState"],[35,39,15,46],[35,41,15,47],[35,46,15,52],[35,47,15,53],[36,6,15,53,"_useState2"],[36,16,15,53],[36,23,15,53,"_slicedToArray"],[36,37,15,53],[36,38,15,53,"default"],[36,45,15,53],[36,47,15,53,"_useState"],[36,56,15,53],[37,6,15,9,"isUpdating"],[37,16,15,19],[37,19,15,19,"_useState2"],[37,29,15,19],[38,6,15,21,"setIsUpdating"],[38,19,15,34],[38,22,15,34,"_useState2"],[38,32,15,34],[39,4,17,2],[39,8,17,2,"useEffect"],[39,14,17,11],[39,15,17,11,"useEffect"],[39,24,17,11],[39,26,17,12],[39,32,17,18],[40,6,20,4],[40,10,20,8,"Updates"],[40,17,20,53],[40,20,20,56],[40,24,20,60],[41,6,21,4],[41,10,21,8],[42,8,22,6,"Updates"],[42,15,22,13],[42,18,22,16,"require"],[42,25,22,23],[42,26,22,23,"_dependencyMap"],[42,40,22,23],[42,59,22,38],[42,60,22,72],[43,6,23,4],[43,7,23,5],[43,8,23,6],[43,14,23,12],[44,8,24,6],[45,6,25,4],[46,6,27,4],[46,10,27,10,"poll"],[46,14,27,14],[47,8,27,14],[47,12,27,14,"_ref"],[47,16,27,14],[47,23,27,14,"_asyncToGenerator"],[47,40,27,14],[47,41,27,14,"default"],[47,48,27,14],[47,50,27,17],[47,63,27,29],[48,10,28,6],[48,14,28,10,"checking"],[48,22,28,18],[48,23,28,19,"current"],[48,30,28,26],[48,34,28,30],[48,35,28,31,"Updates"],[48,42,28,38],[48,44,28,40],[49,10,29,6,"checking"],[49,18,29,14],[49,19,29,15,"current"],[49,26,29,22],[49,29,29,25],[49,33,29,29],[50,10,31,6],[50,14,31,10],[51,12,32,8],[51,16,32,14,"result"],[51,22,32,20],[51,31,32,29,"Updates"],[51,38,32,36],[51,39,32,37,"checkForUpdateAsync"],[51,58,32,56],[51,59,32,57],[51,60,32,58],[52,12,33,8],[52,16,33,12],[52,17,33,13,"result"],[52,23,33,19],[52,24,33,20,"isAvailable"],[52,35,33,31],[52,37,33,33],[53,14,34,10,"checking"],[53,22,34,18],[53,23,34,19,"current"],[53,30,34,26],[53,33,34,29],[53,38,34,34],[54,14,35,10],[55,12,36,8],[56,12,38,8,"console"],[56,19,38,15],[56,20,38,16,"log"],[56,23,38,19],[56,24,38,20],[56,67,38,63],[56,68,38,64],[57,12,39,8],[57,18,39,14,"Updates"],[57,25,39,21],[57,26,39,22,"fetchUpdateAsync"],[57,42,39,38],[57,43,39,39],[57,44,39,40],[58,12,40,8,"console"],[58,19,40,15],[58,20,40,16,"log"],[58,23,40,19],[58,24,40,20],[58,63,40,59],[58,64,40,60],[59,12,42,8,"setIsUpdating"],[59,25,42,21],[59,26,42,22],[59,30,42,26],[59,31,42,27],[60,12,43,8],[61,12,44,8],[61,18,44,14],[61,22,44,18,"Promise"],[61,29,44,25],[61,30,44,27,"resolve"],[61,37,44,34],[61,41,44,39,"setTimeout"],[61,51,44,49],[61,52,44,50,"resolve"],[61,59,44,57],[61,61,44,59],[61,64,44,62],[61,65,44,63],[61,66,44,64],[62,12,45,8],[62,18,45,14,"Updates"],[62,25,45,21],[62,26,45,22,"reloadAsync"],[62,37,45,33],[62,38,45,34],[62,39,45,35],[63,10,46,6],[63,11,46,7],[63,12,46,8],[63,19,46,15,"error"],[63,24,46,20],[63,26,46,22],[64,12,47,8],[65,12,48,8,"console"],[65,19,48,15],[65,20,48,16,"warn"],[65,24,48,20],[65,25,48,21],[65,53,48,49],[65,55,48,51,"error"],[65,60,48,56],[65,61,48,57],[66,12,49,8,"checking"],[66,20,49,16],[66,21,49,17,"current"],[66,28,49,24],[66,31,49,27],[66,36,49,32],[67,12,50,8,"setIsUpdating"],[67,25,50,21],[67,26,50,22],[67,31,50,27],[67,32,50,28],[68,10,51,6],[69,8,52,4],[69,9,52,5],[70,8,52,5],[70,24,27,10,"poll"],[70,28,27,14,"poll"],[70,29,27,14],[71,10,27,14],[71,17,27,14,"_ref"],[71,21,27,14],[71,22,27,14,"apply"],[71,27,27,14],[71,34,27,14,"arguments"],[71,43,27,14],[72,8,27,14],[73,6,27,14],[73,9,52,5],[75,6,54,4],[76,6,55,4],[76,10,55,10,"initialTimeout"],[76,24,55,24],[76,27,55,27,"setTimeout"],[76,37,55,37],[76,38,55,38,"poll"],[76,42,55,42],[76,44,55,44],[76,49,55,49],[76,50,55,50],[77,6,56,4],[78,6,57,4],[78,10,57,10,"interval"],[78,18,57,18],[78,21,57,21,"setInterval"],[78,32,57,32],[78,33,57,33,"poll"],[78,37,57,37],[78,39,57,39,"POLL_INTERVAL_MS"],[78,55,57,55],[78,56,57,56],[79,6,59,4],[79,13,59,11],[79,19,59,17],[80,8,60,6,"clearTimeout"],[80,20,60,18],[80,21,60,19,"initialTimeout"],[80,35,60,33],[80,36,60,34],[81,8,61,6,"clearInterval"],[81,21,61,19],[81,22,61,20,"interval"],[81,30,61,28],[81,31,61,29],[82,6,62,4],[82,7,62,5],[83,4,63,2],[83,5,63,3],[83,7,63,5],[83,9,63,7],[83,10,63,8],[84,4,65,2],[84,11,65,9],[85,6,65,11,"isUpdating"],[86,4,65,22],[86,5,65,23],[87,2,66,0],[87,3,66,1],[88,2,68,0],[88,6,68,0,"_default"],[88,14,68,0],[88,17,68,15,"useAutoUpdate"],[88,30,68,28],[89,0,68,29],[89,3]],"functionMap":{"names":["<global>","useAutoUpdate","useEffect$argument_0","poll","Promise$argument_0","<anonymous>"],"mappings":"AAA;sBCY;YCI;iBCU;0BCiB,qCD;KDQ;WGO;KHG;GDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}