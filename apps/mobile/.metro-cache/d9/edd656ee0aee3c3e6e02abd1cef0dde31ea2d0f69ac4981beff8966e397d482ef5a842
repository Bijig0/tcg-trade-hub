{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":43,"index":136}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _queryKeys = require(_dependencyMap[3]);\n  /**\n   * Fetches all shops from the shops table for display on the browse map.\n   * Transforms PostGIS geography/geometry point to { lat, lng }.\n   */\n  var useBrowseShops = () => {\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.feedKeys.shops(),\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('shops').select('id, name, address, location, supported_tcgs, verified'),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!data) return [];\n          return data.map(shop => {\n            var lat = 0;\n            var lng = 0;\n\n            // Parse PostGIS point â€” could be GeoJSON or WKT string\n            var loc = shop.location;\n            if (loc && typeof loc === 'object') {\n              var geo = loc;\n              if (geo.coordinates) {\n                // GeoJSON: [lng, lat]\n                lng = geo.coordinates[0];\n                lat = geo.coordinates[1];\n              }\n            } else if (typeof loc === 'string') {\n              // WKT: POINT(lng lat)\n              var match = /POINT\\(([^ ]+) ([^ ]+)\\)/.exec(loc);\n              if (match && match[1] && match[2]) {\n                lng = parseFloat(match[1]);\n                lat = parseFloat(match[2]);\n              }\n            }\n            return {\n              id: shop.id,\n              name: shop.name,\n              address: shop.address ?? '',\n              lat,\n              lng,\n              supported_tcgs: shop.supported_tcgs ?? [],\n              verified: shop.verified ?? false\n            };\n          });\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    });\n  };\n  var _default = useBrowseShops;\n});","lineCount":76,"map":[[12,2,57,0,"Object"],[12,8,57,0],[12,9,57,0,"defineProperty"],[12,23,57,0],[12,24,57,0,"exports"],[12,31,57,0],[13,4,57,0,"enumerable"],[13,14,57,0],[14,4,57,0,"get"],[14,7,57,0],[14,18,57,0,"get"],[14,19,57,0],[15,6,57,0],[15,13,57,0,"_default"],[15,21,57,0],[16,4,57,0],[17,2,57,0],[18,2,57,30],[18,6,57,30,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,57,30],[18,45,57,30,"require"],[18,52,57,30],[18,53,57,30,"_dependencyMap"],[18,67,57,30],[19,2,57,30],[19,6,57,30,"_asyncToGenerator"],[19,23,57,30],[19,26,57,30,"_interopDefault"],[19,41,57,30],[19,42,57,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,57,30],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_queryKeys"],[22,16,3,0],[22,19,3,0,"require"],[22,26,3,0],[22,27,3,0,"_dependencyMap"],[22,41,3,0],[23,2,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,2,10,0],[27,6,10,6,"useBrowseShops"],[27,20,10,20],[27,23,10,23,"useBrowseShops"],[27,24,10,23],[27,29,10,29],[28,4,11,2],[28,11,11,9],[28,15,11,9,"useQuery"],[28,34,11,17],[28,35,11,17,"useQuery"],[28,43,11,17],[28,45,11,34],[29,6,12,4,"queryKey"],[29,14,12,12],[29,16,12,14,"feedKeys"],[29,26,12,22],[29,27,12,22,"feedKeys"],[29,35,12,22],[29,36,12,23,"shops"],[29,41,12,28],[29,42,12,29],[29,43,12,30],[30,6,13,4,"queryFn"],[30,13,13,11],[31,8,13,11],[31,12,13,11,"_ref"],[31,16,13,11],[31,23,13,11,"_asyncToGenerator"],[31,40,13,11],[31,41,13,11,"default"],[31,48,13,11],[31,50,13,13],[31,63,13,25],[32,10,14,6],[32,14,14,6,"_yield$supabase$from$"],[32,35,14,6],[32,44,14,36,"supabase"],[32,56,14,44],[32,57,14,44,"supabase"],[32,65,14,44],[32,66,15,9,"from"],[32,70,15,13],[32,71,15,14],[32,78,15,21],[32,79,15,22],[32,80,16,9,"select"],[32,86,16,15],[32,87,16,16],[32,142,16,71],[32,143,16,72],[33,12,14,14,"data"],[33,16,14,18],[33,19,14,18,"_yield$supabase$from$"],[33,40,14,18],[33,41,14,14,"data"],[33,45,14,18],[34,12,14,20,"error"],[34,17,14,25],[34,20,14,25,"_yield$supabase$from$"],[34,41,14,25],[34,42,14,20,"error"],[34,47,14,25],[35,10,18,6],[35,14,18,10,"error"],[35,19,18,15],[35,21,18,17],[35,27,18,23,"error"],[35,32,18,28],[36,10,19,6],[36,14,19,10],[36,15,19,11,"data"],[36,19,19,15],[36,21,19,17],[36,28,19,24],[36,30,19,26],[37,10,21,6],[37,17,21,13,"data"],[37,21,21,17],[37,22,21,18,"map"],[37,25,21,21],[37,26,21,23,"shop"],[37,30,21,52],[37,34,21,57],[38,12,22,8],[38,16,22,12,"lat"],[38,19,22,15],[38,22,22,18],[38,23,22,19],[39,12,23,8],[39,16,23,12,"lng"],[39,19,23,15],[39,22,23,18],[39,23,23,19],[41,12,25,8],[42,12,26,8],[42,16,26,14,"loc"],[42,19,26,17],[42,22,26,20,"shop"],[42,26,26,24],[42,27,26,25,"location"],[42,35,26,33],[43,12,27,8],[43,16,27,12,"loc"],[43,19,27,15],[43,23,27,19],[43,30,27,26,"loc"],[43,33,27,29],[43,38,27,34],[43,46,27,42],[43,48,27,44],[44,14,28,10],[44,18,28,16,"geo"],[44,21,28,19],[44,24,28,22,"loc"],[44,27,28,63],[45,14,29,10],[45,18,29,14,"geo"],[45,21,29,17],[45,22,29,18,"coordinates"],[45,33,29,29],[45,35,29,31],[46,16,30,12],[47,16,31,12,"lng"],[47,19,31,15],[47,22,31,18,"geo"],[47,25,31,21],[47,26,31,22,"coordinates"],[47,37,31,33],[47,38,31,34],[47,39,31,35],[47,40,31,36],[48,16,32,12,"lat"],[48,19,32,15],[48,22,32,18,"geo"],[48,25,32,21],[48,26,32,22,"coordinates"],[48,37,32,33],[48,38,32,34],[48,39,32,35],[48,40,32,36],[49,14,33,10],[50,12,34,8],[50,13,34,9],[50,19,34,15],[50,23,34,19],[50,30,34,26,"loc"],[50,33,34,29],[50,38,34,34],[50,46,34,42],[50,48,34,44],[51,14,35,10],[52,14,36,10],[52,18,36,16,"match"],[52,23,36,21],[52,26,36,24],[52,52,36,50],[52,53,36,51,"exec"],[52,57,36,55],[52,58,36,56,"loc"],[52,61,36,59],[52,62,36,60],[53,14,37,10],[53,18,37,14,"match"],[53,23,37,19],[53,27,37,23,"match"],[53,32,37,28],[53,33,37,29],[53,34,37,30],[53,35,37,31],[53,39,37,35,"match"],[53,44,37,40],[53,45,37,41],[53,46,37,42],[53,47,37,43],[53,49,37,45],[54,16,38,12,"lng"],[54,19,38,15],[54,22,38,18,"parseFloat"],[54,32,38,28],[54,33,38,29,"match"],[54,38,38,34],[54,39,38,35],[54,40,38,36],[54,41,38,37],[54,42,38,38],[55,16,39,12,"lat"],[55,19,39,15],[55,22,39,18,"parseFloat"],[55,32,39,28],[55,33,39,29,"match"],[55,38,39,34],[55,39,39,35],[55,40,39,36],[55,41,39,37],[55,42,39,38],[56,14,40,10],[57,12,41,8],[58,12,43,8],[58,19,43,15],[59,14,44,10,"id"],[59,16,44,12],[59,18,44,14,"shop"],[59,22,44,18],[59,23,44,19,"id"],[59,25,44,31],[60,14,45,10,"name"],[60,18,45,14],[60,20,45,16,"shop"],[60,24,45,20],[60,25,45,21,"name"],[60,29,45,35],[61,14,46,10,"address"],[61,21,46,17],[61,23,46,20,"shop"],[61,27,46,24],[61,28,46,25,"address"],[61,35,46,32],[61,39,46,47],[61,41,46,49],[62,14,47,10,"lat"],[62,17,47,13],[63,14,48,10,"lng"],[63,17,48,13],[64,14,49,10,"supported_tcgs"],[64,28,49,24],[64,30,49,27,"shop"],[64,34,49,31],[64,35,49,32,"supported_tcgs"],[64,49,49,46],[64,53,49,63],[64,55,49,65],[65,14,50,10,"verified"],[65,22,50,18],[65,24,50,21,"shop"],[65,28,50,25],[65,29,50,26,"verified"],[65,37,50,34],[65,41,50,50],[66,12,51,8],[66,13,51,9],[67,10,52,6],[67,11,52,7],[67,12,52,8],[68,8,53,4],[68,9,53,5],[69,8,53,5],[69,24,13,4,"queryFn"],[69,31,13,11,"queryFn"],[69,32,13,11],[70,10,13,11],[70,17,13,11,"_ref"],[70,21,13,11],[70,22,13,11,"apply"],[70,27,13,11],[70,34,13,11,"arguments"],[70,43,13,11],[71,8,13,11],[72,6,13,11],[73,4,54,2],[73,5,54,3],[73,6,54,4],[74,2,55,0],[74,3,55,1],[75,2,57,0],[75,6,57,0,"_default"],[75,14,57,0],[75,17,57,15,"useBrowseShops"],[75,31,57,29],[76,0,57,30],[76,3]],"functionMap":{"names":["<global>","useBrowseShops","useQuery$argument_0.queryFn","data.map$argument_0"],"mappings":"AAA;uBCS;aCG;sBCQ;OD+B;KDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}