{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":42,"index":111}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":112},"end":{"line":3,"column":46,"index":158}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":159},"end":{"line":4,"column":51,"index":210}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[3], \"../../queryKeys\");\n  var _feedQueryKeys = require(_dependencyMap[4], \"../../../feed/queryKeys\");\n  /**\n   * Hook that soft-deletes a listing by updating its status to 'expired'.\n   *\n   * Invalidates myListings and feed queries on success.\n   */\n  var useDeleteListing = function useDeleteListing() {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _mutationFn = (0, _asyncToGenerator.default)(function* (listingId) {\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('listings').update({\n              status: 'expired'\n            }).eq('id', listingId),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n        });\n        function mutationFn(_x) {\n          return _mutationFn.apply(this, arguments);\n        }\n        return mutationFn;\n      }(),\n      onSuccess: function onSuccess() {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.listingKeys.myListings()\n        });\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.lists()\n        });\n      }\n    });\n  };\n  _s(useDeleteListing, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  var _default = useDeleteListing;\n});","lineCount":61,"map":[[13,2,30,0,"Object"],[13,8,30,0],[13,9,30,0,"defineProperty"],[13,23,30,0],[13,24,30,0,"exports"],[13,31,30,0],[14,4,30,0,"enumerable"],[14,14,30,0],[15,4,30,0,"get"],[15,7,30,0],[15,18,30,0,"get"],[15,19,30,0],[16,6,30,0],[16,13,30,0,"_default"],[16,21,30,0],[17,4,30,0],[18,2,30,0],[19,2,30,32],[19,6,30,32,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,30,32],[19,45,30,32,"require"],[19,52,30,32],[19,53,30,32,"_dependencyMap"],[19,67,30,32],[20,2,30,32],[20,6,30,32,"_asyncToGenerator"],[20,23,30,32],[20,26,30,32,"_interopDefault"],[20,41,30,32],[20,42,30,32,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,30,32],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_queryKeys"],[23,16,3,0],[23,19,3,0,"require"],[23,26,3,0],[23,27,3,0,"_dependencyMap"],[23,41,3,0],[24,2,4,0],[24,6,4,0,"_feedQueryKeys"],[24,20,4,0],[24,23,4,0,"require"],[24,30,4,0],[24,31,4,0,"_dependencyMap"],[24,45,4,0],[25,2,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[29,0,10,0],[30,2,11,0],[30,6,11,6,"useDeleteListing"],[30,22,11,22],[30,25,11,25],[30,34,11,6,"useDeleteListing"],[30,50,11,22,"useDeleteListing"],[30,51,11,22],[30,53,11,31],[31,4,11,31,"_s"],[31,6,11,31],[32,4,12,2],[32,8,12,8,"queryClient"],[32,19,12,19],[32,22,12,22],[32,26,12,22,"useQueryClient"],[32,45,12,36],[32,46,12,36,"useQueryClient"],[32,60,12,36],[32,62,12,37],[32,63,12,38],[33,4,14,2],[33,11,14,9],[33,15,14,9,"useMutation"],[33,34,14,20],[33,35,14,20,"useMutation"],[33,46,14,20],[33,48,14,42],[34,6,15,4,"mutationFn"],[34,16,15,14],[35,8,15,14],[35,12,15,14,"_mutationFn"],[35,23,15,14],[35,30,15,14,"_asyncToGenerator"],[35,47,15,14],[35,48,15,14,"default"],[35,55,15,14],[35,57,15,16],[35,68,15,23,"listingId"],[35,77,15,32],[35,79,15,37],[36,10,16,6],[36,14,16,6,"_yield$supabase$from$"],[36,35,16,6],[36,44,16,30,"supabase"],[36,56,16,38],[36,57,16,38,"supabase"],[36,65,16,38],[36,66,17,9,"from"],[36,70,17,13],[36,71,17,14],[36,81,17,24],[36,82,17,25],[36,83,18,9,"update"],[36,89,18,15],[36,90,18,16],[37,14,18,18,"status"],[37,20,18,24],[37,22,18,26],[38,12,18,36],[38,13,18,37],[38,14,18,38],[38,15,19,9,"eq"],[38,17,19,11],[38,18,19,12],[38,22,19,16],[38,24,19,18,"listingId"],[38,33,19,27],[38,34,19,28],[39,12,16,14,"error"],[39,17,16,19],[39,20,16,19,"_yield$supabase$from$"],[39,41,16,19],[39,42,16,14,"error"],[39,47,16,19],[40,10,21,6],[40,14,21,10,"error"],[40,19,21,15],[40,21,21,17],[40,27,21,23,"error"],[40,32,21,28],[41,8,22,4],[41,9,22,5],[42,8,22,5],[42,17,15,4,"mutationFn"],[42,27,15,14,"mutationFn"],[42,28,15,14,"_x"],[42,30,15,14],[43,10,15,14],[43,17,15,14,"_mutationFn"],[43,28,15,14],[43,29,15,14,"apply"],[43,34,15,14],[43,41,15,14,"arguments"],[43,50,15,14],[44,8,15,14],[45,8,15,14],[45,15,15,4,"mutationFn"],[45,25,15,14],[46,6,15,14],[46,9,22,5],[47,6,23,4,"onSuccess"],[47,15,23,13],[47,17,23,15],[47,26,23,4,"onSuccess"],[47,35,23,13,"onSuccess"],[47,36,23,13],[47,38,23,21],[48,8,24,6,"queryClient"],[48,19,24,17],[48,20,24,18,"invalidateQueries"],[48,37,24,35],[48,38,24,36],[49,10,24,38,"queryKey"],[49,18,24,46],[49,20,24,48,"listingKeys"],[49,30,24,59],[49,31,24,59,"listingKeys"],[49,42,24,59],[49,43,24,60,"myListings"],[49,53,24,70],[49,54,24,71],[50,8,24,73],[50,9,24,74],[50,10,24,75],[51,8,25,6,"queryClient"],[51,19,25,17],[51,20,25,18,"invalidateQueries"],[51,37,25,35],[51,38,25,36],[52,10,25,38,"queryKey"],[52,18,25,46],[52,20,25,48,"feedKeys"],[52,34,25,56],[52,35,25,56,"feedKeys"],[52,43,25,56],[52,44,25,57,"lists"],[52,49,25,62],[52,50,25,63],[53,8,25,65],[53,9,25,66],[53,10,25,67],[54,6,26,4],[55,4,27,2],[55,5,27,3],[55,6,27,4],[56,2,28,0],[56,3,28,1],[57,2,28,2,"_s"],[57,4,28,2],[57,5,11,6,"useDeleteListing"],[57,21,11,22],[58,4,11,22],[58,12,12,22,"useQueryClient"],[58,31,12,36],[58,32,12,36,"useQueryClient"],[58,46,12,36],[58,48,14,9,"useMutation"],[58,67,14,20],[58,68,14,20,"useMutation"],[58,79,14,20],[59,2,14,20],[60,2,30,0],[60,6,30,0,"_default"],[60,14,30,0],[60,17,30,15,"useDeleteListing"],[60,33,30,31],[61,0,30,32],[61,3]],"functionMap":{"names":["<global>","useDeleteListing","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess"],"mappings":"AAA;yBCU;gBCI;KDO;eEC;KFG;CDE"},"hasCjsExports":false},"type":"js/module"}]}