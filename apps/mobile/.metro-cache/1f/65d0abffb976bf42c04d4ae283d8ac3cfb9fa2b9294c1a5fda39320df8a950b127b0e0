{"dependencies":[{"name":"./Updates","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"dHmtn1izBCeSkZ/2BgK9eSyi8a8=","exportNames":["*"],"imports":1}},{"name":"./UseUpdates.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":53,"index":91}}],"key":"c/0dTIDFMt3vtNcWYCgpJC9RQHM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _Updates$updateId, _Updates$channel, _Updates$createdAt, _Updates$launchDurati, _Updates$manifest, _Updates$runtimeVersi;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"currentlyRunning\", {\n    enumerable: true,\n    get: function () {\n      return currentlyRunning;\n    }\n  });\n  Object.defineProperty(exports, \"updateFromManifest\", {\n    enumerable: true,\n    get: function () {\n      return updateFromManifest;\n    }\n  });\n  Object.defineProperty(exports, \"updateFromRollback\", {\n    enumerable: true,\n    get: function () {\n      return updateFromRollback;\n    }\n  });\n  Object.defineProperty(exports, \"updatesStateFromContext\", {\n    enumerable: true,\n    get: function () {\n      return updatesStateFromContext;\n    }\n  });\n  var _Updates = require(_dependencyMap[0], \"./Updates\");\n  var Updates = _interopNamespace(_Updates);\n  var _UseUpdatesTypes = require(_dependencyMap[1], \"./UseUpdates.types\");\n  // The currently running info, constructed from Updates constants\n  var currentlyRunning = {\n    updateId: (_Updates$updateId = Updates.updateId) != null ? _Updates$updateId : undefined,\n    channel: (_Updates$channel = Updates.channel) != null ? _Updates$channel : undefined,\n    createdAt: (_Updates$createdAt = Updates.createdAt) != null ? _Updates$createdAt : undefined,\n    launchDuration: (_Updates$launchDurati = Updates.launchDuration) != null ? _Updates$launchDurati : undefined,\n    isEmbeddedLaunch: Updates.isEmbeddedLaunch,\n    isEmergencyLaunch: Updates.isEmergencyLaunch,\n    emergencyLaunchReason: Updates.emergencyLaunchReason,\n    manifest: (_Updates$manifest = Updates.manifest) != null ? _Updates$manifest : undefined,\n    runtimeVersion: (_Updates$runtimeVersi = Updates.runtimeVersion) != null ? _Updates$runtimeVersi : undefined\n  };\n  // Constructs an UpdateInfo from a manifest\n  var updateFromManifest = function updateFromManifest(manifest) {\n    var _manifest$id;\n    return {\n      type: _UseUpdatesTypes.UpdateInfoType.NEW,\n      updateId: (_manifest$id = manifest.id) != null ? _manifest$id : '',\n      createdAt: manifest && 'createdAt' in manifest && manifest.createdAt ? new Date(manifest.createdAt) :\n      // We should never reach this if the manifest is valid and has a commit time,\n      // but leave this in so that createdAt is always defined\n      new Date(0),\n      manifest: manifest\n    };\n  };\n  var updateFromRollback = function updateFromRollback(rollback) {\n    return {\n      type: _UseUpdatesTypes.UpdateInfoType.ROLLBACK,\n      createdAt: new Date(rollback.commitTime),\n      manifest: undefined,\n      updateId: undefined\n    };\n  };\n  // Transform the useUpdates() state based on native state machine context\n  var updatesStateFromContext = function updatesStateFromContext(context) {\n    var availableUpdate = context != null && context.latestManifest ? updateFromManifest(context == null ? void 0 : context.latestManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    var downloadedUpdate = context != null && context.downloadedManifest ? updateFromManifest(context == null ? void 0 : context.downloadedManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    return {\n      isStartupProcedureRunning: context.isStartupProcedureRunning,\n      isUpdateAvailable: context.isUpdateAvailable,\n      isUpdatePending: context.isUpdatePending,\n      isChecking: context.isChecking,\n      isDownloading: context.isDownloading,\n      isRestarting: context.isRestarting,\n      restartCount: context.restartCount,\n      availableUpdate: availableUpdate,\n      downloadedUpdate: downloadedUpdate,\n      checkError: context.checkError,\n      downloadError: context.downloadError,\n      downloadProgress: context.downloadProgress,\n      lastCheckForUpdateTimeSinceRestart: context.lastCheckForUpdateTime\n    };\n  };\n});","lineCount":103,"map":[[23,2,4,0,"Object"],[23,8,4,0],[23,9,4,0,"defineProperty"],[23,23,4,0],[23,24,4,0,"exports"],[23,31,4,0],[24,4,4,0,"enumerable"],[24,14,4,0],[25,4,4,0,"get"],[25,7,4,0],[25,18,4,0,"get"],[25,19,4,0],[26,6,4,0],[26,13,4,0,"currentlyRunning"],[26,29,4,0],[27,4,4,0],[28,2,4,0],[29,2,16,0,"Object"],[29,8,16,0],[29,9,16,0,"defineProperty"],[29,23,16,0],[29,24,16,0,"exports"],[29,31,16,0],[30,4,16,0,"enumerable"],[30,14,16,0],[31,4,16,0,"get"],[31,7,16,0],[31,18,16,0,"get"],[31,19,16,0],[32,6,16,0],[32,13,16,0,"updateFromManifest"],[32,31,16,0],[33,4,16,0],[34,2,16,0],[35,2,28,0,"Object"],[35,8,28,0],[35,9,28,0,"defineProperty"],[35,23,28,0],[35,24,28,0,"exports"],[35,31,28,0],[36,4,28,0,"enumerable"],[36,14,28,0],[37,4,28,0,"get"],[37,7,28,0],[37,18,28,0,"get"],[37,19,28,0],[38,6,28,0],[38,13,28,0,"updateFromRollback"],[38,31,28,0],[39,4,28,0],[40,2,28,0],[41,2,35,0,"Object"],[41,8,35,0],[41,9,35,0,"defineProperty"],[41,23,35,0],[41,24,35,0,"exports"],[41,31,35,0],[42,4,35,0,"enumerable"],[42,14,35,0],[43,4,35,0,"get"],[43,7,35,0],[43,18,35,0,"get"],[43,19,35,0],[44,6,35,0],[44,13,35,0,"updatesStateFromContext"],[44,36,35,0],[45,4,35,0],[46,2,35,0],[47,2,1,0],[47,6,1,0,"_Updates"],[47,14,1,0],[47,17,1,0,"require"],[47,24,1,0],[47,25,1,0,"_dependencyMap"],[47,39,1,0],[48,2,1,0],[48,6,1,0,"Updates"],[48,13,1,0],[48,16,1,0,"_interopNamespace"],[48,33,1,0],[48,34,1,0,"_Updates"],[48,42,1,0],[49,2,2,0],[49,6,2,0,"_UseUpdatesTypes"],[49,22,2,0],[49,25,2,0,"require"],[49,32,2,0],[49,33,2,0,"_dependencyMap"],[49,47,2,0],[50,2,3,0],[51,2,4,7],[51,6,4,13,"currentlyRunning"],[51,22,4,29],[51,25,4,32],[52,4,5,4,"updateId"],[52,12,5,12],[52,15,5,12,"_Updates$updateId"],[52,32,5,12],[52,35,5,14,"Updates"],[52,42,5,21],[52,43,5,22,"updateId"],[52,51,5,30],[52,63,5,30,"_Updates$updateId"],[52,80,5,30],[52,83,5,34,"undefined"],[52,92,5,43],[53,4,6,4,"channel"],[53,11,6,11],[53,14,6,11,"_Updates$channel"],[53,30,6,11],[53,33,6,13,"Updates"],[53,40,6,20],[53,41,6,21,"channel"],[53,48,6,28],[53,60,6,28,"_Updates$channel"],[53,76,6,28],[53,79,6,32,"undefined"],[53,88,6,41],[54,4,7,4,"createdAt"],[54,13,7,13],[54,16,7,13,"_Updates$createdAt"],[54,34,7,13],[54,37,7,15,"Updates"],[54,44,7,22],[54,45,7,23,"createdAt"],[54,54,7,32],[54,66,7,32,"_Updates$createdAt"],[54,84,7,32],[54,87,7,36,"undefined"],[54,96,7,45],[55,4,8,4,"launchDuration"],[55,18,8,18],[55,21,8,18,"_Updates$launchDurati"],[55,42,8,18],[55,45,8,20,"Updates"],[55,52,8,27],[55,53,8,28,"launchDuration"],[55,67,8,42],[55,79,8,42,"_Updates$launchDurati"],[55,100,8,42],[55,103,8,46,"undefined"],[55,112,8,55],[56,4,9,4,"isEmbeddedLaunch"],[56,20,9,20],[56,22,9,22,"Updates"],[56,29,9,29],[56,30,9,30,"isEmbeddedLaunch"],[56,46,9,46],[57,4,10,4,"isEmergencyLaunch"],[57,21,10,21],[57,23,10,23,"Updates"],[57,30,10,30],[57,31,10,31,"isEmergencyLaunch"],[57,48,10,48],[58,4,11,4,"emergencyLaunchReason"],[58,25,11,25],[58,27,11,27,"Updates"],[58,34,11,34],[58,35,11,35,"emergencyLaunchReason"],[58,56,11,56],[59,4,12,4,"manifest"],[59,12,12,12],[59,15,12,12,"_Updates$manifest"],[59,32,12,12],[59,35,12,14,"Updates"],[59,42,12,21],[59,43,12,22,"manifest"],[59,51,12,30],[59,63,12,30,"_Updates$manifest"],[59,80,12,30],[59,83,12,34,"undefined"],[59,92,12,43],[60,4,13,4,"runtimeVersion"],[60,18,13,18],[60,21,13,18,"_Updates$runtimeVersi"],[60,42,13,18],[60,45,13,20,"Updates"],[60,52,13,27],[60,53,13,28,"runtimeVersion"],[60,67,13,42],[60,79,13,42,"_Updates$runtimeVersi"],[60,100,13,42],[60,103,13,46,"undefined"],[61,2,14,0],[61,3,14,1],[62,2,15,0],[63,2,16,7],[63,6,16,13,"updateFromManifest"],[63,24,16,31],[63,27,16,34],[63,36,16,13,"updateFromManifest"],[63,54,16,31,"updateFromManifest"],[63,55,16,35,"manifest"],[63,63,16,43],[63,65,16,48],[64,4,16,48],[64,8,16,48,"_manifest$id"],[64,20,16,48],[65,4,17,4],[65,11,17,11],[66,6,18,8,"type"],[66,10,18,12],[66,12,18,14,"UpdateInfoType"],[66,28,18,28],[66,29,18,28,"UpdateInfoType"],[66,43,18,28],[66,44,18,29,"NEW"],[66,47,18,32],[67,6,19,8,"updateId"],[67,14,19,16],[67,17,19,16,"_manifest$id"],[67,29,19,16],[67,32,19,18,"manifest"],[67,40,19,26],[67,41,19,27,"id"],[67,43,19,29],[67,55,19,29,"_manifest$id"],[67,67,19,29],[67,70,19,33],[67,72,19,35],[68,6,20,8,"createdAt"],[68,15,20,17],[68,17,20,19,"manifest"],[68,25,20,27],[68,29,20,31],[68,40,20,42],[68,44,20,46,"manifest"],[68,52,20,54],[68,56,20,58,"manifest"],[68,64,20,66],[68,65,20,67,"createdAt"],[68,74,20,76],[68,77,21,14],[68,81,21,18,"Date"],[68,85,21,22],[68,86,21,23,"manifest"],[68,94,21,31],[68,95,21,32,"createdAt"],[68,104,21,41],[68,105,21,42],[69,6,22,14],[70,6,23,16],[71,6,24,16],[71,10,24,20,"Date"],[71,14,24,24],[71,15,24,25],[71,16,24,26],[71,17,24,27],[72,6,25,8,"manifest"],[72,14,25,16],[72,16,25,8,"manifest"],[73,4,26,4],[73,5,26,5],[74,2,27,0],[74,3,27,1],[75,2,28,7],[75,6,28,13,"updateFromRollback"],[75,24,28,31],[75,27,28,34],[75,36,28,13,"updateFromRollback"],[75,54,28,31,"updateFromRollback"],[75,55,28,35,"rollback"],[75,63,28,43],[76,4,28,43],[76,11,28,49],[77,6,29,4,"type"],[77,10,29,8],[77,12,29,10,"UpdateInfoType"],[77,28,29,24],[77,29,29,24,"UpdateInfoType"],[77,43,29,24],[77,44,29,25,"ROLLBACK"],[77,52,29,33],[78,6,30,4,"createdAt"],[78,15,30,13],[78,17,30,15],[78,21,30,19,"Date"],[78,25,30,23],[78,26,30,24,"rollback"],[78,34,30,32],[78,35,30,33,"commitTime"],[78,45,30,43],[78,46,30,44],[79,6,31,4,"manifest"],[79,14,31,12],[79,16,31,14,"undefined"],[79,25,31,23],[80,6,32,4,"updateId"],[80,14,32,12],[80,16,32,14,"undefined"],[81,4,33,0],[81,5,33,1],[82,2,33,1],[82,3,33,2],[83,2,34,0],[84,2,35,7],[84,6,35,13,"updatesStateFromContext"],[84,29,35,36],[84,32,35,39],[84,41,35,13,"updatesStateFromContext"],[84,64,35,36,"updatesStateFromContext"],[84,65,35,40,"context"],[84,72,35,47],[84,74,35,52],[85,4,36,4],[85,8,36,10,"availableUpdate"],[85,23,36,25],[85,26,36,28,"context"],[85,33,36,35],[85,45,36,28,"context"],[85,52,36,35],[85,53,36,37,"latestManifest"],[85,67,36,51],[85,70,37,10,"updateFromManifest"],[85,88,37,28],[85,89,37,29,"context"],[85,96,37,36],[85,116,37,29,"context"],[85,123,37,36],[85,124,37,38,"latestManifest"],[85,138,37,52],[85,139,37,53],[85,142,38,10,"context"],[85,149,38,17],[85,150,38,18,"rollback"],[85,158,38,26],[85,161,39,14,"updateFromRollback"],[85,179,39,32],[85,180,39,33,"context"],[85,187,39,40],[85,188,39,41,"rollback"],[85,196,39,49],[85,197,39,50],[85,200,40,14,"undefined"],[85,209,40,23],[86,4,41,4],[86,8,41,10,"downloadedUpdate"],[86,24,41,26],[86,27,41,29,"context"],[86,34,41,36],[86,46,41,29,"context"],[86,53,41,36],[86,54,41,38,"downloadedManifest"],[86,72,41,56],[86,75,42,10,"updateFromManifest"],[86,93,42,28],[86,94,42,29,"context"],[86,101,42,36],[86,121,42,29,"context"],[86,128,42,36],[86,129,42,38,"downloadedManifest"],[86,147,42,56],[86,148,42,57],[86,151,43,10,"context"],[86,158,43,17],[86,159,43,18,"rollback"],[86,167,43,26],[86,170,44,14,"updateFromRollback"],[86,188,44,32],[86,189,44,33,"context"],[86,196,44,40],[86,197,44,41,"rollback"],[86,205,44,49],[86,206,44,50],[86,209,45,14,"undefined"],[86,218,45,23],[87,4,46,4],[87,11,46,11],[88,6,47,8,"isStartupProcedureRunning"],[88,31,47,33],[88,33,47,35,"context"],[88,40,47,42],[88,41,47,43,"isStartupProcedureRunning"],[88,66,47,68],[89,6,48,8,"isUpdateAvailable"],[89,23,48,25],[89,25,48,27,"context"],[89,32,48,34],[89,33,48,35,"isUpdateAvailable"],[89,50,48,52],[90,6,49,8,"isUpdatePending"],[90,21,49,23],[90,23,49,25,"context"],[90,30,49,32],[90,31,49,33,"isUpdatePending"],[90,46,49,48],[91,6,50,8,"isChecking"],[91,16,50,18],[91,18,50,20,"context"],[91,25,50,27],[91,26,50,28,"isChecking"],[91,36,50,38],[92,6,51,8,"isDownloading"],[92,19,51,21],[92,21,51,23,"context"],[92,28,51,30],[92,29,51,31,"isDownloading"],[92,42,51,44],[93,6,52,8,"isRestarting"],[93,18,52,20],[93,20,52,22,"context"],[93,27,52,29],[93,28,52,30,"isRestarting"],[93,40,52,42],[94,6,53,8,"restartCount"],[94,18,53,20],[94,20,53,22,"context"],[94,27,53,29],[94,28,53,30,"restartCount"],[94,40,53,42],[95,6,54,8,"availableUpdate"],[95,21,54,23],[95,23,54,8,"availableUpdate"],[95,38,54,23],[96,6,55,8,"downloadedUpdate"],[96,22,55,24],[96,24,55,8,"downloadedUpdate"],[96,40,55,24],[97,6,56,8,"checkError"],[97,16,56,18],[97,18,56,20,"context"],[97,25,56,27],[97,26,56,28,"checkError"],[97,36,56,38],[98,6,57,8,"downloadError"],[98,19,57,21],[98,21,57,23,"context"],[98,28,57,30],[98,29,57,31,"downloadError"],[98,42,57,44],[99,6,58,8,"downloadProgress"],[99,22,58,24],[99,24,58,26,"context"],[99,31,58,33],[99,32,58,34,"downloadProgress"],[99,48,58,50],[100,6,59,8,"lastCheckForUpdateTimeSinceRestart"],[100,40,59,42],[100,42,59,44,"context"],[100,49,59,51],[100,50,59,52,"lastCheckForUpdateTime"],[101,4,60,4],[101,5,60,5],[102,2,61,0],[102,3,61,1],[103,0,61,2],[103,3]],"functionMap":{"names":["<global>","updateFromManifest","updateFromRollback","updatesStateFromContext"],"mappings":"AAA;kCCe;CDW;kCEC;EFK;uCGE;CH0B"},"hasCjsExports":false},"type":"js/module"}]}