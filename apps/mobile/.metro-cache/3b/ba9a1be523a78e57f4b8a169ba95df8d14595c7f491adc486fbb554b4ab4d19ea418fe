{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":51,"index":251}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _feedQueryKeys = require(_dependencyMap[5], \"../../../feed/queryKeys\");\n  /**\n   * Hook that blocks a user by inserting into the blocks table.\n   *\n   * Shows a confirmation dialog before blocking. On success, invalidates\n   * feed queries to remove the blocked user's listings from the feed.\n   */\n  var useBlockUser = function useBlockUser() {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var mutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _mutationFn = (0, _asyncToGenerator.default)(function* (_ref) {\n          var blockedId = _ref.blockedId;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('blocks').insert({\n              blocker_id: user.id,\n              blocked_id: blockedId\n            }),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return {\n            blockedId: blockedId\n          };\n        });\n        function mutationFn(_x) {\n          return _mutationFn.apply(this, arguments);\n        }\n        return mutationFn;\n      }(),\n      onSuccess: function onSuccess() {\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: ['blocked-users']\n        });\n      },\n      onError: function onError(error) {\n        var _error$message;\n        _reactNative.Alert.alert('Error', (_error$message = error.message) != null ? _error$message : 'Failed to block user');\n      }\n    });\n    var blockWithConfirmation = function blockWithConfirmation(_ref2) {\n      var blockedId = _ref2.blockedId,\n        displayName = _ref2.displayName;\n      _reactNative.Alert.alert('Block User', `Are you sure you want to block ${displayName}? They won't be able to see your listings or message you.`, [{\n        text: 'Cancel',\n        style: 'cancel'\n      }, {\n        text: 'Block',\n        style: 'destructive',\n        onPress: function onPress() {\n          return mutation.mutate({\n            blockedId: blockedId,\n            displayName: displayName\n          });\n        }\n      }]);\n    };\n    return Object.assign({}, mutation, {\n      blockWithConfirmation: blockWithConfirmation\n    });\n  };\n  _s(useBlockUser, \"RQ0PlcUFIMgRZdBPHYTypyNUWyw=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useBlockUser;\n});","lineCount":95,"map":[[13,2,64,0,"Object"],[13,8,64,0],[13,9,64,0,"defineProperty"],[13,23,64,0],[13,24,64,0,"exports"],[13,31,64,0],[14,4,64,0,"enumerable"],[14,14,64,0],[15,4,64,0,"get"],[15,7,64,0],[15,18,64,0,"get"],[15,19,64,0],[16,6,64,0],[16,13,64,0,"_default"],[16,21,64,0],[17,4,64,0],[18,2,64,0],[19,2,64,28],[19,6,64,28,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,64,28],[19,45,64,28,"require"],[19,52,64,28],[19,53,64,28,"_dependencyMap"],[19,67,64,28],[20,2,64,28],[20,6,64,28,"_asyncToGenerator"],[20,23,64,28],[20,26,64,28,"_interopDefault"],[20,41,64,28],[20,42,64,28,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,64,28],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_contextAuthProvider"],[24,26,4,0],[24,29,4,0,"require"],[24,36,4,0],[24,37,4,0,"_dependencyMap"],[24,51,4,0],[25,2,5,0],[25,6,5,0,"_feedQueryKeys"],[25,20,5,0],[25,23,5,0,"require"],[25,30,5,0],[25,31,5,0,"_dependencyMap"],[25,45,5,0],[26,2,12,0],[27,0,13,0],[28,0,14,0],[29,0,15,0],[30,0,16,0],[31,0,17,0],[32,2,18,0],[32,6,18,6,"useBlockUser"],[32,18,18,18],[32,21,18,21],[32,30,18,6,"useBlockUser"],[32,42,18,18,"useBlockUser"],[32,43,18,18],[32,45,18,27],[33,4,18,27,"_s"],[33,6,18,27],[34,4,19,2],[34,8,19,8,"queryClient"],[34,19,19,19],[34,22,19,22],[34,26,19,22,"useQueryClient"],[34,45,19,36],[34,46,19,36,"useQueryClient"],[34,60,19,36],[34,62,19,37],[34,63,19,38],[35,4,20,2],[35,8,20,2,"_useAuth"],[35,16,20,2],[35,19,20,19],[35,23,20,19,"useAuth"],[35,43,20,26],[35,44,20,26,"useAuth"],[35,51,20,26],[35,53,20,27],[35,54,20,28],[36,6,20,10,"user"],[36,10,20,14],[36,13,20,14,"_useAuth"],[36,21,20,14],[36,22,20,10,"user"],[36,26,20,14],[37,4,22,2],[37,8,22,8,"mutation"],[37,16,22,16],[37,19,22,19],[37,23,22,19,"useMutation"],[37,42,22,30],[37,43,22,30,"useMutation"],[37,54,22,30],[37,56,22,31],[38,6,23,4,"mutationFn"],[38,16,23,14],[39,8,23,14],[39,12,23,14,"_mutationFn"],[39,23,23,14],[39,30,23,14,"_asyncToGenerator"],[39,47,23,14],[39,48,23,14,"default"],[39,55,23,14],[39,57,23,16],[39,68,23,16,"_ref"],[39,72,23,16],[39,74,23,58],[40,10,23,58],[40,14,23,25,"blockedId"],[40,23,23,34],[40,26,23,34,"_ref"],[40,30,23,34],[40,31,23,25,"blockedId"],[40,40,23,34],[41,10,24,6],[41,14,24,10],[41,15,24,11,"user"],[41,19,24,15],[41,21,24,17],[41,27,24,23],[41,31,24,27,"Error"],[41,36,24,32],[41,37,24,33],[41,56,24,52],[41,57,24,53],[42,10,26,6],[42,14,26,6,"_yield$supabase$from$"],[42,35,26,6],[42,44,26,30,"supabase"],[42,56,26,38],[42,57,26,38,"supabase"],[42,65,26,38],[42,66,26,39,"from"],[42,70,26,43],[42,71,26,44],[42,79,26,52],[42,80,26,53],[42,81,26,54,"insert"],[42,87,26,60],[42,88,26,61],[43,14,27,8,"blocker_id"],[43,24,27,18],[43,26,27,20,"user"],[43,30,27,24],[43,31,27,25,"id"],[43,33,27,27],[44,14,28,8,"blocked_id"],[44,24,28,18],[44,26,28,20,"blockedId"],[45,12,29,6],[45,13,29,7],[45,14,29,8],[46,12,26,14,"error"],[46,17,26,19],[46,20,26,19,"_yield$supabase$from$"],[46,41,26,19],[46,42,26,14,"error"],[46,47,26,19],[47,10,31,6],[47,14,31,10,"error"],[47,19,31,15],[47,21,31,17],[47,27,31,23,"error"],[47,32,31,28],[48,10,32,6],[48,17,32,13],[49,12,32,15,"blockedId"],[49,21,32,24],[49,23,32,15,"blockedId"],[50,10,32,25],[50,11,32,26],[51,8,33,4],[51,9,33,5],[52,8,33,5],[52,17,23,4,"mutationFn"],[52,27,23,14,"mutationFn"],[52,28,23,14,"_x"],[52,30,23,14],[53,10,23,14],[53,17,23,14,"_mutationFn"],[53,28,23,14],[53,29,23,14,"apply"],[53,34,23,14],[53,41,23,14,"arguments"],[53,50,23,14],[54,8,23,14],[55,8,23,14],[55,15,23,4,"mutationFn"],[55,25,23,14],[56,6,23,14],[56,9,33,5],[57,6,34,4,"onSuccess"],[57,15,34,13],[57,17,34,15],[57,26,34,4,"onSuccess"],[57,35,34,13,"onSuccess"],[57,36,34,13],[57,38,34,21],[58,8,35,6,"queryClient"],[58,19,35,17],[58,20,35,18,"invalidateQueries"],[58,37,35,35],[58,38,35,36],[59,10,35,38,"queryKey"],[59,18,35,46],[59,20,35,48,"feedKeys"],[59,34,35,56],[59,35,35,56,"feedKeys"],[59,43,35,56],[59,44,35,57,"all"],[60,8,35,61],[60,9,35,62],[60,10,35,63],[61,8,36,6,"queryClient"],[61,19,36,17],[61,20,36,18,"invalidateQueries"],[61,37,36,35],[61,38,36,36],[62,10,36,38,"queryKey"],[62,18,36,46],[62,20,36,48],[62,21,36,49],[62,36,36,64],[63,8,36,66],[63,9,36,67],[63,10,36,68],[64,6,37,4],[64,7,37,5],[65,6,38,4,"onError"],[65,13,38,11],[65,15,38,13],[65,24,38,4,"onError"],[65,31,38,11,"onError"],[65,32,38,14,"error"],[65,37,38,26],[65,39,38,31],[66,8,38,31],[66,12,38,31,"_error$message"],[66,26,38,31],[67,8,39,6,"Alert"],[67,20,39,11],[67,21,39,11,"Alert"],[67,26,39,11],[67,27,39,12,"alert"],[67,32,39,17],[67,33,39,18],[67,40,39,25],[67,43,39,25,"_error$message"],[67,57,39,25],[67,60,39,27,"error"],[67,65,39,32],[67,66,39,33,"message"],[67,73,39,40],[67,85,39,40,"_error$message"],[67,99,39,40],[67,102,39,44],[67,124,39,66],[67,125,39,67],[68,6,40,4],[69,4,41,2],[69,5,41,3],[69,6,41,4],[70,4,43,2],[70,8,43,8,"blockWithConfirmation"],[70,29,43,29],[70,32,43,32],[70,41,43,8,"blockWithConfirmation"],[70,62,43,29,"blockWithConfirmation"],[70,63,43,29,"_ref2"],[70,68,43,29],[70,70,43,81],[71,6,43,81],[71,10,43,35,"blockedId"],[71,19,43,44],[71,22,43,44,"_ref2"],[71,27,43,44],[71,28,43,35,"blockedId"],[71,37,43,44],[72,8,43,46,"displayName"],[72,19,43,57],[72,22,43,57,"_ref2"],[72,27,43,57],[72,28,43,46,"displayName"],[72,39,43,57],[73,6,44,4,"Alert"],[73,18,44,9],[73,19,44,9,"Alert"],[73,24,44,9],[73,25,44,10,"alert"],[73,30,44,15],[73,31,45,6],[73,43,45,18],[73,45,46,6],[73,79,46,40,"displayName"],[73,90,46,51],[73,149,46,110],[73,151,47,6],[73,152,48,8],[74,8,48,10,"text"],[74,12,48,14],[74,14,48,16],[74,22,48,24],[75,8,48,26,"style"],[75,13,48,31],[75,15,48,33],[76,6,48,42],[76,7,48,43],[76,9,49,8],[77,8,50,10,"text"],[77,12,50,14],[77,14,50,16],[77,21,50,23],[78,8,51,10,"style"],[78,13,51,15],[78,15,51,17],[78,28,51,30],[79,8,52,10,"onPress"],[79,15,52,17],[79,17,52,19],[79,26,52,10,"onPress"],[79,33,52,17,"onPress"],[79,34,52,17],[80,10,52,17],[80,17,52,25,"mutation"],[80,25,52,33],[80,26,52,34,"mutate"],[80,32,52,40],[80,33,52,41],[81,12,52,43,"blockedId"],[81,21,52,52],[81,23,52,43,"blockedId"],[81,32,52,52],[82,12,52,54,"displayName"],[82,23,52,65],[82,25,52,54,"displayName"],[83,10,52,66],[83,11,52,67],[83,12,52,68],[84,8,52,68],[85,6,53,8],[85,7,53,9],[85,8,55,4],[85,9,55,5],[86,4,56,2],[86,5,56,3],[87,4,58,2],[87,11,58,2,"Object"],[87,17,58,2],[87,18,58,2,"assign"],[87,24,58,2],[87,29,59,7,"mutation"],[87,37,59,15],[88,6,60,4,"blockWithConfirmation"],[88,27,60,25],[88,29,60,4,"blockWithConfirmation"],[89,4,60,25],[90,2,62,0],[90,3,62,1],[91,2,62,2,"_s"],[91,4,62,2],[91,5,18,6,"useBlockUser"],[91,17,18,18],[92,4,18,18],[92,12,19,22,"useQueryClient"],[92,31,19,36],[92,32,19,36,"useQueryClient"],[92,46,19,36],[92,48,20,19,"useAuth"],[92,68,20,26],[92,69,20,26,"useAuth"],[92,76,20,26],[92,78,22,19,"useMutation"],[92,97,22,30],[92,98,22,30,"useMutation"],[92,109,22,30],[93,2,22,30],[94,2,64,0],[94,6,64,0,"_default"],[94,14,64,0],[94,17,64,15,"useBlockUser"],[94,29,64,27],[95,0,64,28],[95,3]],"functionMap":{"names":["<global>","useBlockUser","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError","blockWithConfirmation","onPress"],"mappings":"AAA;qBCiB;gBCK;KDU;eEC;KFG;aGC;KHE;gCIG;mBCS,iDD;GJI;CDM"},"hasCjsExports":false},"type":"js/module"}]}