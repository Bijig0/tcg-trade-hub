{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":51,"index":251}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}},{"name":"../../../chat/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":252},"end":{"line":6,"column":51,"index":303}}],"key":"9xbGolTXFRFrLIidk7OzN6u8Uq4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _feedQueryKeys = require(_dependencyMap[5], \"../../../feed/queryKeys\");\n  var _chatQueryKeys = require(_dependencyMap[6], \"../../../chat/queryKeys\");\n  /**\n   * Hook that blocks a user by inserting into the blocks table.\n   *\n   * Shows a confirmation dialog before blocking. On success, invalidates\n   * feed queries to remove the blocked user's listings from the feed.\n   */\n  var useBlockUser = function useBlockUser() {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var mutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _mutationFn = (0, _asyncToGenerator.default)(function* (_ref) {\n          var blockedId = _ref.blockedId;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('blocks').insert({\n              blocker_id: user.id,\n              blocked_id: blockedId\n            }),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return {\n            blockedId: blockedId\n          };\n        });\n        function mutationFn(_x) {\n          return _mutationFn.apply(this, arguments);\n        }\n        return mutationFn;\n      }(),\n      onSuccess: function onSuccess() {\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: ['blocked-users']\n        });\n        queryClient.invalidateQueries({\n          queryKey: _chatQueryKeys.chatKeys.conversations()\n        });\n      },\n      onError: function onError(error) {\n        var _error$message;\n        _reactNative.Alert.alert('Error', (_error$message = error.message) != null ? _error$message : 'Failed to block user');\n      }\n    });\n    var blockWithConfirmation = function blockWithConfirmation(_ref2) {\n      var blockedId = _ref2.blockedId,\n        displayName = _ref2.displayName;\n      _reactNative.Alert.alert('Block User', `Are you sure you want to block ${displayName}? They won't be able to see your listings or message you.`, [{\n        text: 'Cancel',\n        style: 'cancel'\n      }, {\n        text: 'Block',\n        style: 'destructive',\n        onPress: function onPress() {\n          return mutation.mutate({\n            blockedId: blockedId,\n            displayName: displayName\n          });\n        }\n      }]);\n    };\n    return Object.assign({}, mutation, {\n      blockWithConfirmation: blockWithConfirmation\n    });\n  };\n  _s(useBlockUser, \"RQ0PlcUFIMgRZdBPHYTypyNUWyw=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useBlockUser;\n});","lineCount":99,"map":[[13,2,66,0,"Object"],[13,8,66,0],[13,9,66,0,"defineProperty"],[13,23,66,0],[13,24,66,0,"exports"],[13,31,66,0],[14,4,66,0,"enumerable"],[14,14,66,0],[15,4,66,0,"get"],[15,7,66,0],[15,18,66,0,"get"],[15,19,66,0],[16,6,66,0],[16,13,66,0,"_default"],[16,21,66,0],[17,4,66,0],[18,2,66,0],[19,2,66,28],[19,6,66,28,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,66,28],[19,45,66,28,"require"],[19,52,66,28],[19,53,66,28,"_dependencyMap"],[19,67,66,28],[20,2,66,28],[20,6,66,28,"_asyncToGenerator"],[20,23,66,28],[20,26,66,28,"_interopDefault"],[20,41,66,28],[20,42,66,28,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,66,28],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_contextAuthProvider"],[24,26,4,0],[24,29,4,0,"require"],[24,36,4,0],[24,37,4,0,"_dependencyMap"],[24,51,4,0],[25,2,5,0],[25,6,5,0,"_feedQueryKeys"],[25,20,5,0],[25,23,5,0,"require"],[25,30,5,0],[25,31,5,0,"_dependencyMap"],[25,45,5,0],[26,2,6,0],[26,6,6,0,"_chatQueryKeys"],[26,20,6,0],[26,23,6,0,"require"],[26,30,6,0],[26,31,6,0,"_dependencyMap"],[26,45,6,0],[27,2,13,0],[28,0,14,0],[29,0,15,0],[30,0,16,0],[31,0,17,0],[32,0,18,0],[33,2,19,0],[33,6,19,6,"useBlockUser"],[33,18,19,18],[33,21,19,21],[33,30,19,6,"useBlockUser"],[33,42,19,18,"useBlockUser"],[33,43,19,18],[33,45,19,27],[34,4,19,27,"_s"],[34,6,19,27],[35,4,20,2],[35,8,20,8,"queryClient"],[35,19,20,19],[35,22,20,22],[35,26,20,22,"useQueryClient"],[35,45,20,36],[35,46,20,36,"useQueryClient"],[35,60,20,36],[35,62,20,37],[35,63,20,38],[36,4,21,2],[36,8,21,2,"_useAuth"],[36,16,21,2],[36,19,21,19],[36,23,21,19,"useAuth"],[36,43,21,26],[36,44,21,26,"useAuth"],[36,51,21,26],[36,53,21,27],[36,54,21,28],[37,6,21,10,"user"],[37,10,21,14],[37,13,21,14,"_useAuth"],[37,21,21,14],[37,22,21,10,"user"],[37,26,21,14],[38,4,23,2],[38,8,23,8,"mutation"],[38,16,23,16],[38,19,23,19],[38,23,23,19,"useMutation"],[38,42,23,30],[38,43,23,30,"useMutation"],[38,54,23,30],[38,56,23,31],[39,6,24,4,"mutationFn"],[39,16,24,14],[40,8,24,14],[40,12,24,14,"_mutationFn"],[40,23,24,14],[40,30,24,14,"_asyncToGenerator"],[40,47,24,14],[40,48,24,14,"default"],[40,55,24,14],[40,57,24,16],[40,68,24,16,"_ref"],[40,72,24,16],[40,74,24,58],[41,10,24,58],[41,14,24,25,"blockedId"],[41,23,24,34],[41,26,24,34,"_ref"],[41,30,24,34],[41,31,24,25,"blockedId"],[41,40,24,34],[42,10,25,6],[42,14,25,10],[42,15,25,11,"user"],[42,19,25,15],[42,21,25,17],[42,27,25,23],[42,31,25,27,"Error"],[42,36,25,32],[42,37,25,33],[42,56,25,52],[42,57,25,53],[43,10,27,6],[43,14,27,6,"_yield$supabase$from$"],[43,35,27,6],[43,44,27,30,"supabase"],[43,56,27,38],[43,57,27,38,"supabase"],[43,65,27,38],[43,66,27,39,"from"],[43,70,27,43],[43,71,27,44],[43,79,27,52],[43,80,27,53],[43,81,27,54,"insert"],[43,87,27,60],[43,88,27,61],[44,14,28,8,"blocker_id"],[44,24,28,18],[44,26,28,20,"user"],[44,30,28,24],[44,31,28,25,"id"],[44,33,28,27],[45,14,29,8,"blocked_id"],[45,24,29,18],[45,26,29,20,"blockedId"],[46,12,30,6],[46,13,30,7],[46,14,30,8],[47,12,27,14,"error"],[47,17,27,19],[47,20,27,19,"_yield$supabase$from$"],[47,41,27,19],[47,42,27,14,"error"],[47,47,27,19],[48,10,32,6],[48,14,32,10,"error"],[48,19,32,15],[48,21,32,17],[48,27,32,23,"error"],[48,32,32,28],[49,10,33,6],[49,17,33,13],[50,12,33,15,"blockedId"],[50,21,33,24],[50,23,33,15,"blockedId"],[51,10,33,25],[51,11,33,26],[52,8,34,4],[52,9,34,5],[53,8,34,5],[53,17,24,4,"mutationFn"],[53,27,24,14,"mutationFn"],[53,28,24,14,"_x"],[53,30,24,14],[54,10,24,14],[54,17,24,14,"_mutationFn"],[54,28,24,14],[54,29,24,14,"apply"],[54,34,24,14],[54,41,24,14,"arguments"],[54,50,24,14],[55,8,24,14],[56,8,24,14],[56,15,24,4,"mutationFn"],[56,25,24,14],[57,6,24,14],[57,9,34,5],[58,6,35,4,"onSuccess"],[58,15,35,13],[58,17,35,15],[58,26,35,4,"onSuccess"],[58,35,35,13,"onSuccess"],[58,36,35,13],[58,38,35,21],[59,8,36,6,"queryClient"],[59,19,36,17],[59,20,36,18,"invalidateQueries"],[59,37,36,35],[59,38,36,36],[60,10,36,38,"queryKey"],[60,18,36,46],[60,20,36,48,"feedKeys"],[60,34,36,56],[60,35,36,56,"feedKeys"],[60,43,36,56],[60,44,36,57,"all"],[61,8,36,61],[61,9,36,62],[61,10,36,63],[62,8,37,6,"queryClient"],[62,19,37,17],[62,20,37,18,"invalidateQueries"],[62,37,37,35],[62,38,37,36],[63,10,37,38,"queryKey"],[63,18,37,46],[63,20,37,48],[63,21,37,49],[63,36,37,64],[64,8,37,66],[64,9,37,67],[64,10,37,68],[65,8,38,6,"queryClient"],[65,19,38,17],[65,20,38,18,"invalidateQueries"],[65,37,38,35],[65,38,38,36],[66,10,38,38,"queryKey"],[66,18,38,46],[66,20,38,48,"chatKeys"],[66,34,38,56],[66,35,38,56,"chatKeys"],[66,43,38,56],[66,44,38,57,"conversations"],[66,57,38,70],[66,58,38,71],[67,8,38,73],[67,9,38,74],[67,10,38,75],[68,6,39,4],[68,7,39,5],[69,6,40,4,"onError"],[69,13,40,11],[69,15,40,13],[69,24,40,4,"onError"],[69,31,40,11,"onError"],[69,32,40,14,"error"],[69,37,40,26],[69,39,40,31],[70,8,40,31],[70,12,40,31,"_error$message"],[70,26,40,31],[71,8,41,6,"Alert"],[71,20,41,11],[71,21,41,11,"Alert"],[71,26,41,11],[71,27,41,12,"alert"],[71,32,41,17],[71,33,41,18],[71,40,41,25],[71,43,41,25,"_error$message"],[71,57,41,25],[71,60,41,27,"error"],[71,65,41,32],[71,66,41,33,"message"],[71,73,41,40],[71,85,41,40,"_error$message"],[71,99,41,40],[71,102,41,44],[71,124,41,66],[71,125,41,67],[72,6,42,4],[73,4,43,2],[73,5,43,3],[73,6,43,4],[74,4,45,2],[74,8,45,8,"blockWithConfirmation"],[74,29,45,29],[74,32,45,32],[74,41,45,8,"blockWithConfirmation"],[74,62,45,29,"blockWithConfirmation"],[74,63,45,29,"_ref2"],[74,68,45,29],[74,70,45,81],[75,6,45,81],[75,10,45,35,"blockedId"],[75,19,45,44],[75,22,45,44,"_ref2"],[75,27,45,44],[75,28,45,35,"blockedId"],[75,37,45,44],[76,8,45,46,"displayName"],[76,19,45,57],[76,22,45,57,"_ref2"],[76,27,45,57],[76,28,45,46,"displayName"],[76,39,45,57],[77,6,46,4,"Alert"],[77,18,46,9],[77,19,46,9,"Alert"],[77,24,46,9],[77,25,46,10,"alert"],[77,30,46,15],[77,31,47,6],[77,43,47,18],[77,45,48,6],[77,79,48,40,"displayName"],[77,90,48,51],[77,149,48,110],[77,151,49,6],[77,152,50,8],[78,8,50,10,"text"],[78,12,50,14],[78,14,50,16],[78,22,50,24],[79,8,50,26,"style"],[79,13,50,31],[79,15,50,33],[80,6,50,42],[80,7,50,43],[80,9,51,8],[81,8,52,10,"text"],[81,12,52,14],[81,14,52,16],[81,21,52,23],[82,8,53,10,"style"],[82,13,53,15],[82,15,53,17],[82,28,53,30],[83,8,54,10,"onPress"],[83,15,54,17],[83,17,54,19],[83,26,54,10,"onPress"],[83,33,54,17,"onPress"],[83,34,54,17],[84,10,54,17],[84,17,54,25,"mutation"],[84,25,54,33],[84,26,54,34,"mutate"],[84,32,54,40],[84,33,54,41],[85,12,54,43,"blockedId"],[85,21,54,52],[85,23,54,43,"blockedId"],[85,32,54,52],[86,12,54,54,"displayName"],[86,23,54,65],[86,25,54,54,"displayName"],[87,10,54,66],[87,11,54,67],[87,12,54,68],[88,8,54,68],[89,6,55,8],[89,7,55,9],[89,8,57,4],[89,9,57,5],[90,4,58,2],[90,5,58,3],[91,4,60,2],[91,11,60,2,"Object"],[91,17,60,2],[91,18,60,2,"assign"],[91,24,60,2],[91,29,61,7,"mutation"],[91,37,61,15],[92,6,62,4,"blockWithConfirmation"],[92,27,62,25],[92,29,62,4,"blockWithConfirmation"],[93,4,62,25],[94,2,64,0],[94,3,64,1],[95,2,64,2,"_s"],[95,4,64,2],[95,5,19,6,"useBlockUser"],[95,17,19,18],[96,4,19,18],[96,12,20,22,"useQueryClient"],[96,31,20,36],[96,32,20,36,"useQueryClient"],[96,46,20,36],[96,48,21,19,"useAuth"],[96,68,21,26],[96,69,21,26,"useAuth"],[96,76,21,26],[96,78,23,19,"useMutation"],[96,97,23,30],[96,98,23,30,"useMutation"],[96,109,23,30],[97,2,23,30],[98,2,66,0],[98,6,66,0,"_default"],[98,14,66,0],[98,17,66,15,"useBlockUser"],[98,29,66,27],[99,0,66,28],[99,3]],"functionMap":{"names":["<global>","useBlockUser","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError","blockWithConfirmation","onPress"],"mappings":"AAA;qBCkB;gBCK;KDU;eEC;KFI;aGC;KHE;gCIG;mBCS,iDD;GJI;CDM"},"hasCjsExports":false},"type":"js/module"}]}