{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":45,"index":195}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  /**\n   * Hook that calls the complete-meetup edge function.\n   *\n   * Marks the current user's side as completed. When both users have\n   * completed, the response indicates `both_completed: true` which\n   * triggers the rating prompt via the onBothCompleted callback.\n   */\n  var useCompleteMeetup = function useCompleteMeetup(onBothCompleted) {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _mutationFn = (0, _asyncToGenerator.default)(function* (_ref) {\n          var meetupId = _ref.meetupId;\n          var _yield$supabase$funct = yield _libSupabase.supabase.functions.invoke('complete-meetup', {\n              body: {\n                meetup_id: meetupId\n              }\n            }),\n            data = _yield$supabase$funct.data,\n            error = _yield$supabase$funct.error;\n          if (error) throw error;\n          if (!data) throw new Error('No response from complete-meetup');\n          return data;\n        });\n        function mutationFn(_x) {\n          return _mutationFn.apply(this, arguments);\n        }\n        return mutationFn;\n      }(),\n      onSuccess: function onSuccess(data) {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.detail(data.meetup_id)\n        });\n        if (data.both_completed && onBothCompleted) {\n          onBothCompleted(data.meetup_id);\n        }\n      },\n      onError: function onError(error) {\n        var _error$message;\n        _reactNative.Alert.alert('Error', (_error$message = error.message) != null ? _error$message : 'Failed to complete meetup');\n      }\n    });\n  };\n  _s(useCompleteMeetup, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  var _default = useCompleteMeetup;\n});","lineCount":76,"map":[[13,2,51,0,"Object"],[13,8,51,0],[13,9,51,0,"defineProperty"],[13,23,51,0],[13,24,51,0,"exports"],[13,31,51,0],[14,4,51,0,"enumerable"],[14,14,51,0],[15,4,51,0,"get"],[15,7,51,0],[15,18,51,0,"get"],[15,19,51,0],[16,6,51,0],[16,13,51,0,"_default"],[16,21,51,0],[17,4,51,0],[18,2,51,0],[19,2,51,33],[19,6,51,33,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,51,33],[19,45,51,33,"require"],[19,52,51,33],[19,53,51,33,"_dependencyMap"],[19,67,51,33],[20,2,51,33],[20,6,51,33,"_asyncToGenerator"],[20,23,51,33],[20,26,51,33,"_interopDefault"],[20,41,51,33],[20,42,51,33,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,51,33],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_queryKeys"],[24,16,4,0],[24,19,4,0,"require"],[24,26,4,0],[24,27,4,0,"_dependencyMap"],[24,41,4,0],[25,2,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,2,22,0],[32,6,22,6,"useCompleteMeetup"],[32,23,22,23],[32,26,22,26],[32,35,22,6,"useCompleteMeetup"],[32,52,22,23,"useCompleteMeetup"],[32,53,22,27,"onBothCompleted"],[32,68,22,71],[32,70,22,76],[33,4,22,76,"_s"],[33,6,22,76],[34,4,23,2],[34,8,23,8,"queryClient"],[34,19,23,19],[34,22,23,22],[34,26,23,22,"useQueryClient"],[34,45,23,36],[34,46,23,36,"useQueryClient"],[34,60,23,36],[34,62,23,37],[34,63,23,38],[35,4,25,2],[35,11,25,9],[35,15,25,9,"useMutation"],[35,34,25,20],[35,35,25,20,"useMutation"],[35,46,25,20],[35,48,25,21],[36,6,26,4,"mutationFn"],[36,16,26,14],[37,8,26,14],[37,12,26,14,"_mutationFn"],[37,23,26,14],[37,30,26,14,"_asyncToGenerator"],[37,47,26,14],[37,48,26,14,"default"],[37,55,26,14],[37,57,26,16],[37,68,26,16,"_ref"],[37,72,26,16],[37,74,26,62],[38,10,26,62],[38,14,26,25,"meetupId"],[38,22,26,33],[38,25,26,33,"_ref"],[38,29,26,33],[38,30,26,25,"meetupId"],[38,38,26,33],[39,10,27,6],[39,14,27,6,"_yield$supabase$funct"],[39,35,27,6],[39,44,27,36,"supabase"],[39,56,27,44],[39,57,27,44,"supabase"],[39,65,27,44],[39,66,27,45,"functions"],[39,75,27,54],[39,76,27,55,"invoke"],[39,82,27,61],[39,83,28,8],[39,100,28,25],[39,102,29,8],[40,14,29,10,"body"],[40,18,29,14],[40,20,29,16],[41,16,29,18,"meetup_id"],[41,25,29,27],[41,27,29,29,"meetupId"],[42,14,29,38],[43,12,29,40],[43,13,30,6],[43,14,30,7],[44,12,27,14,"data"],[44,16,27,18],[44,19,27,18,"_yield$supabase$funct"],[44,40,27,18],[44,41,27,14,"data"],[44,45,27,18],[45,12,27,20,"error"],[45,17,27,25],[45,20,27,25,"_yield$supabase$funct"],[45,41,27,25],[45,42,27,20,"error"],[45,47,27,25],[46,10,32,6],[46,14,32,10,"error"],[46,19,32,15],[46,21,32,17],[46,27,32,23,"error"],[46,32,32,28],[47,10,33,6],[47,14,33,10],[47,15,33,11,"data"],[47,19,33,15],[47,21,33,17],[47,27,33,23],[47,31,33,27,"Error"],[47,36,33,32],[47,37,33,33],[47,71,33,67],[47,72,33,68],[48,10,35,6],[48,17,35,13,"data"],[48,21,35,17],[49,8,36,4],[49,9,36,5],[50,8,36,5],[50,17,26,4,"mutationFn"],[50,27,26,14,"mutationFn"],[50,28,26,14,"_x"],[50,30,26,14],[51,10,26,14],[51,17,26,14,"_mutationFn"],[51,28,26,14],[51,29,26,14,"apply"],[51,34,26,14],[51,41,26,14,"arguments"],[51,50,26,14],[52,8,26,14],[53,8,26,14],[53,15,26,4,"mutationFn"],[53,25,26,14],[54,6,26,14],[54,9,36,5],[55,6,37,4,"onSuccess"],[55,15,37,13],[55,17,37,15],[55,26,37,4,"onSuccess"],[55,35,37,13,"onSuccess"],[55,36,37,16,"data"],[55,40,37,20],[55,42,37,25],[56,8,38,6,"queryClient"],[56,19,38,17],[56,20,38,18,"invalidateQueries"],[56,37,38,35],[56,38,38,36],[57,10,38,38,"queryKey"],[57,18,38,46],[57,20,38,48,"meetupKeys"],[57,30,38,58],[57,31,38,58,"meetupKeys"],[57,41,38,58],[57,42,38,59,"all"],[58,8,38,63],[58,9,38,64],[58,10,38,65],[59,8,39,6,"queryClient"],[59,19,39,17],[59,20,39,18,"invalidateQueries"],[59,37,39,35],[59,38,39,36],[60,10,39,38,"queryKey"],[60,18,39,46],[60,20,39,48,"meetupKeys"],[60,30,39,58],[60,31,39,58,"meetupKeys"],[60,41,39,58],[60,42,39,59,"detail"],[60,48,39,65],[60,49,39,66,"data"],[60,53,39,70],[60,54,39,71,"meetup_id"],[60,63,39,80],[61,8,39,82],[61,9,39,83],[61,10,39,84],[62,8,41,6],[62,12,41,10,"data"],[62,16,41,14],[62,17,41,15,"both_completed"],[62,31,41,29],[62,35,41,33,"onBothCompleted"],[62,50,41,48],[62,52,41,50],[63,10,42,8,"onBothCompleted"],[63,25,42,23],[63,26,42,24,"data"],[63,30,42,28],[63,31,42,29,"meetup_id"],[63,40,42,38],[63,41,42,39],[64,8,43,6],[65,6,44,4],[65,7,44,5],[66,6,45,4,"onError"],[66,13,45,11],[66,15,45,13],[66,24,45,4,"onError"],[66,31,45,11,"onError"],[66,32,45,14,"error"],[66,37,45,26],[66,39,45,31],[67,8,45,31],[67,12,45,31,"_error$message"],[67,26,45,31],[68,8,46,6,"Alert"],[68,20,46,11],[68,21,46,11,"Alert"],[68,26,46,11],[68,27,46,12,"alert"],[68,32,46,17],[68,33,46,18],[68,40,46,25],[68,43,46,25,"_error$message"],[68,57,46,25],[68,60,46,27,"error"],[68,65,46,32],[68,66,46,33,"message"],[68,73,46,40],[68,85,46,40,"_error$message"],[68,99,46,40],[68,102,46,44],[68,129,46,71],[68,130,46,72],[69,6,47,4],[70,4,48,2],[70,5,48,3],[70,6,48,4],[71,2,49,0],[71,3,49,1],[72,2,49,2,"_s"],[72,4,49,2],[72,5,22,6,"useCompleteMeetup"],[72,22,22,23],[73,4,22,23],[73,12,23,22,"useQueryClient"],[73,31,23,36],[73,32,23,36,"useQueryClient"],[73,46,23,36],[73,48,25,9,"useMutation"],[73,67,25,20],[73,68,25,20,"useMutation"],[73,79,25,20],[74,2,25,20],[75,2,51,0],[75,6,51,0,"_default"],[75,14,51,0],[75,17,51,15,"useCompleteMeetup"],[75,34,51,32],[76,0,51,33],[76,3]],"functionMap":{"names":["<global>","useCompleteMeetup","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;0BCqB;gBCI;KDU;eEC;KFO;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}