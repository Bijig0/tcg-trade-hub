{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":45,"index":138}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _queryKeys = require(_dependencyMap[3]);\n  /**\n   * Hook that fetches all meetups for the current user.\n   *\n   * Joins matches to resolve both user IDs, then filters where the\n   * current user is either user_a or user_b. Also joins shops for\n   * location details. Returns meetups split into upcoming and past.\n   */\n  var useMeetups = () => {\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.meetupKeys.all,\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$auth$ = yield _libSupabase.supabase.auth.getSession(),\n            session = _yield$supabase$auth$.data.session;\n          var user = session?.user ?? null;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('meetups').select(`\n          id,\n          match_id,\n          proposal_message_id,\n          shop_id,\n          location_name,\n          proposed_time,\n          status,\n          user_a_completed,\n          user_b_completed,\n          created_at,\n          updated_at,\n          match:matches (\n            id,\n            user_a_id,\n            user_b_id\n          ),\n          shop:shops (\n            id,\n            name,\n            address\n          )\n        `).order('created_at', {\n              ascending: false\n            }),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!data || data.length === 0) return {\n            upcoming: [],\n            past: []\n          };\n\n          // Filter meetups where current user is participant and resolve other user\n          var userMeetups = data.filter(meetup => {\n            var match = meetup.match;\n            return match && (match.user_a_id === user.id || match.user_b_id === user.id);\n          });\n          if (userMeetups.length === 0) return {\n            upcoming: [],\n            past: []\n          };\n\n          // Collect other user IDs to batch-fetch their profiles\n          var otherUserIds = userMeetups.map(meetup => {\n            var match = meetup.match;\n            return match.user_a_id === user.id ? match.user_b_id : match.user_a_id;\n          });\n          var uniqueUserIds = [...new Set(otherUserIds)];\n          var _yield$supabase$from$2 = yield _libSupabase.supabase.from('users').select('id, display_name, avatar_url, rating_score').in('id', uniqueUserIds),\n            usersData = _yield$supabase$from$2.data;\n          var usersMap = new Map((usersData ?? []).map(u => [u.id, u]));\n          var enriched = userMeetups.map(meetup => {\n            var match = meetup.match;\n            var otherUserId = match.user_a_id === user.id ? match.user_b_id : match.user_a_id;\n            var otherUser = usersMap.get(otherUserId) ?? {\n              id: otherUserId,\n              display_name: 'Unknown',\n              avatar_url: null,\n              rating_score: 0\n            };\n            return {\n              ...meetup,\n              match,\n              shop: meetup.shop,\n              other_user: otherUser\n            };\n          });\n          var now = new Date().toISOString();\n          var upcoming = enriched.filter(m => (m.status === 'proposed' || m.status === 'confirmed') && (m.proposed_time === null || m.proposed_time >= now));\n          var past = enriched.filter(m => m.status === 'completed' || m.status === 'cancelled' || (m.status === 'proposed' || m.status === 'confirmed') && m.proposed_time !== null && m.proposed_time < now);\n          return {\n            upcoming,\n            past\n          };\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    });\n  };\n  var _default = useMeetups;\n});","lineCount":122,"map":[[12,2,136,0,"Object"],[12,8,136,0],[12,9,136,0,"defineProperty"],[12,23,136,0],[12,24,136,0,"exports"],[12,31,136,0],[13,4,136,0,"enumerable"],[13,14,136,0],[14,4,136,0,"get"],[14,7,136,0],[14,18,136,0,"get"],[14,19,136,0],[15,6,136,0],[15,13,136,0,"_default"],[15,21,136,0],[16,4,136,0],[17,2,136,0],[18,2,136,26],[18,6,136,26,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,136,26],[18,45,136,26,"require"],[18,52,136,26],[18,53,136,26,"_dependencyMap"],[18,67,136,26],[19,2,136,26],[19,6,136,26,"_asyncToGenerator"],[19,23,136,26],[19,26,136,26,"_interopDefault"],[19,41,136,26],[19,42,136,26,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,136,26],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_queryKeys"],[22,16,3,0],[22,19,3,0,"require"],[22,26,3,0],[22,27,3,0,"_dependencyMap"],[22,41,3,0],[23,2,21,0],[24,0,22,0],[25,0,23,0],[26,0,24,0],[27,0,25,0],[28,0,26,0],[29,0,27,0],[30,2,28,0],[30,6,28,6,"useMeetups"],[30,16,28,16],[30,19,28,19,"useMeetups"],[30,20,28,19],[30,25,28,25],[31,4,29,2],[31,11,29,9],[31,15,29,9,"useQuery"],[31,34,29,17],[31,35,29,17,"useQuery"],[31,43,29,17],[31,45,29,43],[32,6,30,4,"queryKey"],[32,14,30,12],[32,16,30,14,"meetupKeys"],[32,26,30,24],[32,27,30,24,"meetupKeys"],[32,37,30,24],[32,38,30,25,"all"],[32,41,30,28],[33,6,31,4,"queryFn"],[33,13,31,11],[34,8,31,11],[34,12,31,11,"_ref"],[34,16,31,11],[34,23,31,11,"_asyncToGenerator"],[34,40,31,11],[34,41,31,11,"default"],[34,48,31,11],[34,50,31,13],[34,63,31,25],[35,10,32,6],[35,14,32,6,"_yield$supabase$auth$"],[35,35,32,6],[35,44,34,16,"supabase"],[35,56,34,24],[35,57,34,24,"supabase"],[35,65,34,24],[35,66,34,25,"auth"],[35,70,34,29],[35,71,34,30,"getSession"],[35,81,34,40],[35,82,34,41],[35,83,34,42],[36,12,33,16,"session"],[36,19,33,23],[36,22,33,23,"_yield$supabase$auth$"],[36,43,33,23],[36,44,33,8,"data"],[36,48,33,12],[36,49,33,16,"session"],[36,56,33,23],[37,10,35,6],[37,14,35,12,"user"],[37,18,35,16],[37,21,35,19,"session"],[37,28,35,26],[37,30,35,28,"user"],[37,34,35,32],[37,38,35,36],[37,42,35,40],[38,10,37,6],[38,14,37,10],[38,15,37,11,"user"],[38,19,37,15],[38,21,37,17],[38,27,37,23],[38,31,37,27,"Error"],[38,36,37,32],[38,37,37,33],[38,56,37,52],[38,57,37,53],[39,10,39,6],[39,14,39,6,"_yield$supabase$from$"],[39,35,39,6],[39,44,39,36,"supabase"],[39,56,39,44],[39,57,39,44,"supabase"],[39,65,39,44],[39,66,40,9,"from"],[39,70,40,13],[39,71,40,14],[39,80,40,23],[39,81,40,24],[39,82,41,9,"select"],[39,88,41,15],[39,89,42,10],[40,0,43,0],[41,0,44,0],[42,0,45,0],[43,0,46,0],[44,0,47,0],[45,0,48,0],[46,0,49,0],[47,0,50,0],[48,0,51,0],[49,0,52,0],[50,0,53,0],[51,0,54,0],[52,0,55,0],[53,0,56,0],[54,0,57,0],[55,0,58,0],[56,0,59,0],[57,0,60,0],[58,0,61,0],[59,0,62,0],[60,0,63,0],[61,0,64,0],[61,9,65,8],[61,10,65,9],[61,11,66,9,"order"],[61,16,66,14],[61,17,66,15],[61,29,66,27],[61,31,66,29],[62,14,66,31,"ascending"],[62,23,66,40],[62,25,66,42],[63,12,66,48],[63,13,66,49],[63,14,66,50],[64,12,39,14,"data"],[64,16,39,18],[64,19,39,18,"_yield$supabase$from$"],[64,40,39,18],[64,41,39,14,"data"],[64,45,39,18],[65,12,39,20,"error"],[65,17,39,25],[65,20,39,25,"_yield$supabase$from$"],[65,41,39,25],[65,42,39,20,"error"],[65,47,39,25],[66,10,68,6],[66,14,68,10,"error"],[66,19,68,15],[66,21,68,17],[66,27,68,23,"error"],[66,32,68,28],[67,10,69,6],[67,14,69,10],[67,15,69,11,"data"],[67,19,69,15],[67,23,69,19,"data"],[67,27,69,23],[67,28,69,24,"length"],[67,34,69,30],[67,39,69,35],[67,40,69,36],[67,42,69,38],[67,49,69,45],[68,12,69,47,"upcoming"],[68,20,69,55],[68,22,69,57],[68,24,69,59],[69,12,69,61,"past"],[69,16,69,65],[69,18,69,67],[70,10,69,70],[70,11,69,71],[72,10,71,6],[73,10,72,6],[73,14,72,12,"userMeetups"],[73,25,72,23],[73,28,72,26,"data"],[73,32,72,30],[73,33,72,31,"filter"],[73,39,72,37],[73,40,72,39,"meetup"],[73,46,72,70],[73,50,72,75],[74,12,73,8],[74,16,73,14,"match"],[74,21,73,19],[74,24,73,22,"meetup"],[74,30,73,28],[74,31,73,29,"match"],[74,36,73,85],[75,12,74,8],[75,19,74,15,"match"],[75,24,74,20],[75,29,74,25,"match"],[75,34,74,30],[75,35,74,31,"user_a_id"],[75,44,74,40],[75,49,74,45,"user"],[75,53,74,49],[75,54,74,50,"id"],[75,56,74,52],[75,60,74,56,"match"],[75,65,74,61],[75,66,74,62,"user_b_id"],[75,75,74,71],[75,80,74,76,"user"],[75,84,74,80],[75,85,74,81,"id"],[75,87,74,83],[75,88,74,84],[76,10,75,6],[76,11,75,7],[76,12,75,8],[77,10,77,6],[77,14,77,10,"userMeetups"],[77,25,77,21],[77,26,77,22,"length"],[77,32,77,28],[77,37,77,33],[77,38,77,34],[77,40,77,36],[77,47,77,43],[78,12,77,45,"upcoming"],[78,20,77,53],[78,22,77,55],[78,24,77,57],[79,12,77,59,"past"],[79,16,77,63],[79,18,77,65],[80,10,77,68],[80,11,77,69],[82,10,79,6],[83,10,80,6],[83,14,80,12,"otherUserIds"],[83,26,80,24],[83,29,80,27,"userMeetups"],[83,40,80,38],[83,41,80,39,"map"],[83,44,80,42],[83,45,80,44,"meetup"],[83,51,80,75],[83,55,80,80],[84,12,81,8],[84,16,81,14,"match"],[84,21,81,19],[84,24,81,22,"meetup"],[84,30,81,28],[84,31,81,29,"match"],[84,36,81,78],[85,12,82,8],[85,19,82,15,"match"],[85,24,82,20],[85,25,82,21,"user_a_id"],[85,34,82,30],[85,39,82,35,"user"],[85,43,82,39],[85,44,82,40,"id"],[85,46,82,42],[85,49,82,45,"match"],[85,54,82,50],[85,55,82,51,"user_b_id"],[85,64,82,60],[85,67,82,63,"match"],[85,72,82,68],[85,73,82,69,"user_a_id"],[85,82,82,78],[86,10,83,6],[86,11,83,7],[86,12,83,8],[87,10,85,6],[87,14,85,12,"uniqueUserIds"],[87,27,85,25],[87,30,85,28],[87,31,85,29],[87,34,85,32],[87,38,85,36,"Set"],[87,41,85,39],[87,42,85,40,"otherUserIds"],[87,54,85,52],[87,55,85,53],[87,56,85,54],[88,10,87,6],[88,14,87,6,"_yield$supabase$from$2"],[88,36,87,6],[88,45,87,40,"supabase"],[88,57,87,48],[88,58,87,48,"supabase"],[88,66,87,48],[88,67,88,9,"from"],[88,71,88,13],[88,72,88,14],[88,79,88,21],[88,80,88,22],[88,81,89,9,"select"],[88,87,89,15],[88,88,89,16],[88,132,89,60],[88,133,89,61],[88,134,90,9,"in"],[88,136,90,11],[88,137,90,12],[88,141,90,16],[88,143,90,18,"uniqueUserIds"],[88,156,90,31],[88,157,90,32],[89,12,87,20,"usersData"],[89,21,87,29],[89,24,87,29,"_yield$supabase$from$2"],[89,46,87,29],[89,47,87,14,"data"],[89,51,87,18],[90,10,92,6],[90,14,92,12,"usersMap"],[90,22,92,20],[90,25,92,23],[90,29,92,27,"Map"],[90,32,92,30],[90,33,93,8],[90,34,93,9,"usersData"],[90,43,93,18],[90,47,93,22],[90,49,93,24],[90,51,93,26,"map"],[90,54,93,29],[90,55,93,31,"u"],[90,56,93,32],[90,60,93,37],[90,61,93,38,"u"],[90,62,93,39],[90,63,93,40,"id"],[90,65,93,42],[90,67,93,44,"u"],[90,68,93,45],[90,69,93,46],[90,70,94,6],[90,71,94,7],[91,10,96,6],[91,14,96,12,"enriched"],[91,22,96,41],[91,25,96,44,"userMeetups"],[91,36,96,55],[91,37,96,56,"map"],[91,40,96,59],[91,41,96,61,"meetup"],[91,47,96,92],[91,51,96,97],[92,12,97,8],[92,16,97,14,"match"],[92,21,97,19],[92,24,97,22,"meetup"],[92,30,97,28],[92,31,97,29,"match"],[92,36,97,90],[93,12,98,8],[93,16,98,14,"otherUserId"],[93,27,98,25],[93,30,98,28,"match"],[93,35,98,33],[93,36,98,34,"user_a_id"],[93,45,98,43],[93,50,98,48,"user"],[93,54,98,52],[93,55,98,53,"id"],[93,57,98,55],[93,60,98,58,"match"],[93,65,98,63],[93,66,98,64,"user_b_id"],[93,75,98,73],[93,78,98,76,"match"],[93,83,98,81],[93,84,98,82,"user_a_id"],[93,93,98,91],[94,12,99,8],[94,16,99,14,"otherUser"],[94,25,99,23],[94,28,99,26,"usersMap"],[94,36,99,34],[94,37,99,35,"get"],[94,40,99,38],[94,41,99,39,"otherUserId"],[94,52,99,50],[94,53,99,51],[94,57,99,55],[95,14,100,10,"id"],[95,16,100,12],[95,18,100,14,"otherUserId"],[95,29,100,25],[96,14,101,10,"display_name"],[96,26,101,22],[96,28,101,24],[96,37,101,33],[97,14,102,10,"avatar_url"],[97,24,102,20],[97,26,102,22],[97,30,102,26],[98,14,103,10,"rating_score"],[98,26,103,22],[98,28,103,24],[99,12,104,8],[99,13,104,9],[100,12,106,8],[100,19,106,15],[101,14,107,10],[101,17,107,14,"meetup"],[101,23,107,34],[102,14,108,10,"match"],[102,19,108,15],[103,14,109,10,"shop"],[103,18,109,14],[103,20,109,16,"meetup"],[103,26,109,22],[103,27,109,23,"shop"],[103,31,109,56],[104,14,110,10,"other_user"],[104,24,110,20],[104,26,110,22,"otherUser"],[105,12,111,8],[105,13,111,9],[106,10,112,6],[106,11,112,7],[106,12,112,8],[107,10,114,6],[107,14,114,12,"now"],[107,17,114,15],[107,20,114,18],[107,24,114,22,"Date"],[107,28,114,26],[107,29,114,27],[107,30,114,28],[107,31,114,29,"toISOString"],[107,42,114,40],[107,43,114,41],[107,44,114,42],[108,10,116,6],[108,14,116,12,"upcoming"],[108,22,116,20],[108,25,116,23,"enriched"],[108,33,116,31],[108,34,116,32,"filter"],[108,40,116,38],[108,41,117,9,"m"],[108,42,117,10],[108,46,118,10],[108,47,118,11,"m"],[108,48,118,12],[108,49,118,13,"status"],[108,55,118,19],[108,60,118,24],[108,70,118,34],[108,74,118,38,"m"],[108,75,118,39],[108,76,118,40,"status"],[108,82,118,46],[108,87,118,51],[108,98,118,62],[108,104,119,11,"m"],[108,105,119,12],[108,106,119,13,"proposed_time"],[108,119,119,26],[108,124,119,31],[108,128,119,35],[108,132,119,39,"m"],[108,133,119,40],[108,134,119,41,"proposed_time"],[108,147,119,54],[108,151,119,58,"now"],[108,154,119,61],[108,155,120,6],[108,156,120,7],[109,10,122,6],[109,14,122,12,"past"],[109,18,122,16],[109,21,122,19,"enriched"],[109,29,122,27],[109,30,122,28,"filter"],[109,36,122,34],[109,37,123,9,"m"],[109,38,123,10],[109,42,124,10,"m"],[109,43,124,11],[109,44,124,12,"status"],[109,50,124,18],[109,55,124,23],[109,66,124,34],[109,70,125,10,"m"],[109,71,125,11],[109,72,125,12,"status"],[109,78,125,18],[109,83,125,23],[109,94,125,34],[109,98,126,11],[109,99,126,12,"m"],[109,100,126,13],[109,101,126,14,"status"],[109,107,126,20],[109,112,126,25],[109,122,126,35],[109,126,126,39,"m"],[109,127,126,40],[109,128,126,41,"status"],[109,134,126,47],[109,139,126,52],[109,150,126,63],[109,155,127,12,"m"],[109,156,127,13],[109,157,127,14,"proposed_time"],[109,170,127,27],[109,175,127,32],[109,179,127,36],[109,183,128,12,"m"],[109,184,128,13],[109,185,128,14,"proposed_time"],[109,198,128,27],[109,201,128,30,"now"],[109,204,129,6],[109,205,129,7],[110,10,131,6],[110,17,131,13],[111,12,131,15,"upcoming"],[111,20,131,23],[112,12,131,25,"past"],[113,10,131,30],[113,11,131,31],[114,8,132,4],[114,9,132,5],[115,8,132,5],[115,24,31,4,"queryFn"],[115,31,31,11,"queryFn"],[115,32,31,11],[116,10,31,11],[116,17,31,11,"_ref"],[116,21,31,11],[116,22,31,11,"apply"],[116,27,31,11],[116,34,31,11,"arguments"],[116,43,31,11],[117,8,31,11],[118,6,31,11],[119,4,133,2],[119,5,133,3],[119,6,133,4],[120,2,134,0],[120,3,134,1],[121,2,136,0],[121,6,136,0,"_default"],[121,14,136,0],[121,17,136,15,"useMeetups"],[121,27,136,25],[122,0,136,26],[122,3]],"functionMap":{"names":["<global>","useMeetups","useQuery$argument_0.queryFn","data.filter$argument_0","userMeetups.map$argument_0","map$argument_0","enriched.filter$argument_0"],"mappings":"AAA;mBC2B;aCG;sCCyC;ODG;2CEK;OFG;8BGU,gBH;4DEG;OFgB;QIK;8DJE;QII;kCJK;KDI;CDE"},"hasCjsExports":false},"type":"js/module"}]}