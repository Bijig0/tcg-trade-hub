{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":42,"index":111}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":112},"end":{"line":3,"column":46,"index":158}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":159},"end":{"line":4,"column":51,"index":210}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[3], \"../../queryKeys\");\n  var _feedQueryKeys = require(_dependencyMap[4], \"../../../feed/queryKeys\");\n  /**\n   * Mutation hook that updates a listing's location and location_name.\n   * Invalidates listing detail and feed queries on success.\n   */\n  var useUpdateListingLocation = () => {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var listingId = _ref.listingId,\n            coords = _ref.coords,\n            locationName = _ref.locationName;\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('listings').update({\n              location: `POINT(${coords.longitude} ${coords.latitude})`,\n              location_name: locationName\n            }).eq('id', listingId),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.listingKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.lists()\n        });\n      }\n    });\n  };\n  _s(useUpdateListingLocation, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  var _default = useUpdateListingLocation;\n});","lineCount":63,"map":[[13,2,38,0,"Object"],[13,8,38,0],[13,9,38,0,"defineProperty"],[13,23,38,0],[13,24,38,0,"exports"],[13,31,38,0],[14,4,38,0,"enumerable"],[14,14,38,0],[15,4,38,0,"get"],[15,7,38,0],[15,18,38,0,"get"],[15,19,38,0],[16,6,38,0],[16,13,38,0,"_default"],[16,21,38,0],[17,4,38,0],[18,2,38,0],[19,2,38,40],[19,6,38,40,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,38,40],[19,45,38,40,"require"],[19,52,38,40],[19,53,38,40,"_dependencyMap"],[19,67,38,40],[20,2,38,40],[20,6,38,40,"_asyncToGenerator"],[20,23,38,40],[20,26,38,40,"_interopDefault"],[20,41,38,40],[20,42,38,40,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,38,40],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_queryKeys"],[23,16,3,0],[23,19,3,0,"require"],[23,26,3,0],[23,27,3,0,"_dependencyMap"],[23,41,3,0],[24,2,4,0],[24,6,4,0,"_feedQueryKeys"],[24,20,4,0],[24,23,4,0,"require"],[24,30,4,0],[24,31,4,0,"_dependencyMap"],[24,45,4,0],[25,2,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,2,16,0],[29,6,16,6,"useUpdateListingLocation"],[29,30,16,30],[29,33,16,33,"useUpdateListingLocation"],[29,34,16,33],[29,39,16,39],[30,4,16,39,"_s"],[30,6,16,39],[31,4,17,2],[31,8,17,8,"queryClient"],[31,19,17,19],[31,22,17,22],[31,26,17,22,"useQueryClient"],[31,45,17,36],[31,46,17,36,"useQueryClient"],[31,60,17,36],[31,62,17,37],[31,63,17,38],[32,4,19,2],[32,11,19,9],[32,15,19,9,"useMutation"],[32,34,19,20],[32,35,19,20,"useMutation"],[32,46,19,20],[32,48,19,21],[33,6,20,4,"mutationFn"],[33,16,20,14],[34,8,20,14],[34,12,20,14,"_ref2"],[34,17,20,14],[34,24,20,14,"_asyncToGenerator"],[34,41,20,14],[34,42,20,14,"default"],[34,49,20,14],[34,51,20,16],[34,62,20,16,"_ref"],[34,66,20,16],[34,68,20,84],[35,10,20,84],[35,14,20,25,"listingId"],[35,23,20,34],[35,26,20,34,"_ref"],[35,30,20,34],[35,31,20,25,"listingId"],[35,40,20,34],[36,12,20,36,"coords"],[36,18,20,42],[36,21,20,42,"_ref"],[36,25,20,42],[36,26,20,36,"coords"],[36,32,20,42],[37,12,20,44,"locationName"],[37,24,20,56],[37,27,20,56,"_ref"],[37,31,20,56],[37,32,20,44,"locationName"],[37,44,20,56],[38,10,21,6],[38,14,21,6,"_yield$supabase$from$"],[38,35,21,6],[38,44,21,30,"supabase"],[38,56,21,38],[38,57,21,38,"supabase"],[38,65,21,38],[38,66,22,9,"from"],[38,70,22,13],[38,71,22,14],[38,81,22,24],[38,82,22,25],[38,83,23,9,"update"],[38,89,23,15],[38,90,23,16],[39,14,24,10,"location"],[39,22,24,18],[39,24,24,20],[39,33,24,29,"coords"],[39,39,24,35],[39,40,24,36,"longitude"],[39,49,24,45],[39,53,24,49,"coords"],[39,59,24,55],[39,60,24,56,"latitude"],[39,68,24,64],[39,71,24,67],[40,14,25,10,"location_name"],[40,27,25,23],[40,29,25,25,"locationName"],[41,12,26,8],[41,13,26,9],[41,14,26,10],[41,15,27,9,"eq"],[41,17,27,11],[41,18,27,12],[41,22,27,16],[41,24,27,18,"listingId"],[41,33,27,27],[41,34,27,28],[42,12,21,14,"error"],[42,17,21,19],[42,20,21,19,"_yield$supabase$from$"],[42,41,21,19],[42,42,21,14,"error"],[42,47,21,19],[43,10,29,6],[43,14,29,10,"error"],[43,19,29,15],[43,21,29,17],[43,27,29,23,"error"],[43,32,29,28],[44,8,30,4],[44,9,30,5],[45,8,30,5],[45,24,20,4,"mutationFn"],[45,34,20,14,"mutationFn"],[45,35,20,14,"_x"],[45,37,20,14],[46,10,20,14],[46,17,20,14,"_ref2"],[46,22,20,14],[46,23,20,14,"apply"],[46,28,20,14],[46,35,20,14,"arguments"],[46,44,20,14],[47,8,20,14],[48,6,20,14],[48,9,30,5],[49,6,31,4,"onSuccess"],[49,15,31,13],[49,17,31,15,"onSuccess"],[49,18,31,15],[49,23,31,21],[50,8,32,6,"queryClient"],[50,19,32,17],[50,20,32,18,"invalidateQueries"],[50,37,32,35],[50,38,32,36],[51,10,32,38,"queryKey"],[51,18,32,46],[51,20,32,48,"listingKeys"],[51,30,32,59],[51,31,32,59,"listingKeys"],[51,42,32,59],[51,43,32,60,"all"],[52,8,32,64],[52,9,32,65],[52,10,32,66],[53,8,33,6,"queryClient"],[53,19,33,17],[53,20,33,18,"invalidateQueries"],[53,37,33,35],[53,38,33,36],[54,10,33,38,"queryKey"],[54,18,33,46],[54,20,33,48,"feedKeys"],[54,34,33,56],[54,35,33,56,"feedKeys"],[54,43,33,56],[54,44,33,57,"lists"],[54,49,33,62],[54,50,33,63],[55,8,33,65],[55,9,33,66],[55,10,33,67],[56,6,34,4],[57,4,35,2],[57,5,35,3],[57,6,35,4],[58,2,36,0],[58,3,36,1],[59,2,36,2,"_s"],[59,4,36,2],[59,5,16,6,"useUpdateListingLocation"],[59,29,16,30],[60,4,16,30],[60,12,17,22,"useQueryClient"],[60,31,17,36],[60,32,17,36,"useQueryClient"],[60,46,17,36],[60,48,19,9,"useMutation"],[60,67,19,20],[60,68,19,20,"useMutation"],[60,79,19,20],[61,2,19,20],[62,2,38,0],[62,6,38,0,"_default"],[62,14,38,0],[62,17,38,15,"useUpdateListingLocation"],[62,41,38,39],[63,0,38,40],[63,3]],"functionMap":{"names":["<global>","useUpdateListingLocation","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess"],"mappings":"AAA;iCCe;gBCI;KDU;eEC;KFG;CDE"},"hasCjsExports":false},"type":"js/module"}]}