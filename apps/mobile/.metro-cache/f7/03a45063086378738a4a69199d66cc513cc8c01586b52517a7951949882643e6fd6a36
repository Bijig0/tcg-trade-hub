{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":51,"index":251}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}},{"name":"../../../chat/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":252},"end":{"line":6,"column":51,"index":303}}],"key":"9xbGolTXFRFrLIidk7OzN6u8Uq4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _reactNative = require(_dependencyMap[2]);\n  var _libSupabase = require(_dependencyMap[3]);\n  var _contextAuthProvider = require(_dependencyMap[4]);\n  var _feedQueryKeys = require(_dependencyMap[5]);\n  var _chatQueryKeys = require(_dependencyMap[6]);\n  /**\n   * Hook that blocks a user by inserting into the blocks table.\n   *\n   * Shows a confirmation dialog before blocking. On success, invalidates\n   * feed queries to remove the blocked user's listings from the feed.\n   */\n  var useBlockUser = () => {\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var mutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var blockedId = _ref.blockedId;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('blocks').insert({\n              blocker_id: user.id,\n              blocked_id: blockedId\n            }),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return {\n            blockedId\n          };\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: ['blocked-users']\n        });\n        queryClient.invalidateQueries({\n          queryKey: _chatQueryKeys.chatKeys.conversations()\n        });\n      },\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to block user');\n      }\n    });\n    var blockWithConfirmation = _ref3 => {\n      var blockedId = _ref3.blockedId,\n        displayName = _ref3.displayName;\n      _reactNative.Alert.alert('Block User', `Are you sure you want to block ${displayName}? They won't be able to see your listings or message you.`, [{\n        text: 'Cancel',\n        style: 'cancel'\n      }, {\n        text: 'Block',\n        style: 'destructive',\n        onPress: () => mutation.mutate({\n          blockedId,\n          displayName\n        })\n      }]);\n    };\n    return {\n      ...mutation,\n      blockWithConfirmation\n    };\n  };\n  var _default = useBlockUser;\n});","lineCount":91,"map":[[12,2,66,0,"Object"],[12,8,66,0],[12,9,66,0,"defineProperty"],[12,23,66,0],[12,24,66,0,"exports"],[12,31,66,0],[13,4,66,0,"enumerable"],[13,14,66,0],[14,4,66,0,"get"],[14,7,66,0],[14,18,66,0,"get"],[14,19,66,0],[15,6,66,0],[15,13,66,0,"_default"],[15,21,66,0],[16,4,66,0],[17,2,66,0],[18,2,66,28],[18,6,66,28,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,66,28],[18,45,66,28,"require"],[18,52,66,28],[18,53,66,28,"_dependencyMap"],[18,67,66,28],[19,2,66,28],[19,6,66,28,"_asyncToGenerator"],[19,23,66,28],[19,26,66,28,"_interopDefault"],[19,41,66,28],[19,42,66,28,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,66,28],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_reactNative"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_libSupabase"],[22,18,3,0],[22,21,3,0,"require"],[22,28,3,0],[22,29,3,0,"_dependencyMap"],[22,43,3,0],[23,2,4,0],[23,6,4,0,"_contextAuthProvider"],[23,26,4,0],[23,29,4,0,"require"],[23,36,4,0],[23,37,4,0,"_dependencyMap"],[23,51,4,0],[24,2,5,0],[24,6,5,0,"_feedQueryKeys"],[24,20,5,0],[24,23,5,0,"require"],[24,30,5,0],[24,31,5,0,"_dependencyMap"],[24,45,5,0],[25,2,6,0],[25,6,6,0,"_chatQueryKeys"],[25,20,6,0],[25,23,6,0,"require"],[25,30,6,0],[25,31,6,0,"_dependencyMap"],[25,45,6,0],[26,2,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,0,18,0],[32,2,19,0],[32,6,19,6,"useBlockUser"],[32,18,19,18],[32,21,19,21,"useBlockUser"],[32,22,19,21],[32,27,19,27],[33,4,20,2],[33,8,20,8,"queryClient"],[33,19,20,19],[33,22,20,22],[33,26,20,22,"useQueryClient"],[33,45,20,36],[33,46,20,36,"useQueryClient"],[33,60,20,36],[33,62,20,37],[33,63,20,38],[34,4,21,2],[34,8,21,2,"_useAuth"],[34,16,21,2],[34,19,21,19],[34,23,21,19,"useAuth"],[34,43,21,26],[34,44,21,26,"useAuth"],[34,51,21,26],[34,53,21,27],[34,54,21,28],[35,6,21,10,"user"],[35,10,21,14],[35,13,21,14,"_useAuth"],[35,21,21,14],[35,22,21,10,"user"],[35,26,21,14],[36,4,23,2],[36,8,23,8,"mutation"],[36,16,23,16],[36,19,23,19],[36,23,23,19,"useMutation"],[36,42,23,30],[36,43,23,30,"useMutation"],[36,54,23,30],[36,56,23,31],[37,6,24,4,"mutationFn"],[37,16,24,14],[38,8,24,14],[38,12,24,14,"_ref2"],[38,17,24,14],[38,24,24,14,"_asyncToGenerator"],[38,41,24,14],[38,42,24,14,"default"],[38,49,24,14],[38,51,24,16],[38,62,24,16,"_ref"],[38,66,24,16],[38,68,24,58],[39,10,24,58],[39,14,24,25,"blockedId"],[39,23,24,34],[39,26,24,34,"_ref"],[39,30,24,34],[39,31,24,25,"blockedId"],[39,40,24,34],[40,10,25,6],[40,14,25,10],[40,15,25,11,"user"],[40,19,25,15],[40,21,25,17],[40,27,25,23],[40,31,25,27,"Error"],[40,36,25,32],[40,37,25,33],[40,56,25,52],[40,57,25,53],[41,10,27,6],[41,14,27,6,"_yield$supabase$from$"],[41,35,27,6],[41,44,27,30,"supabase"],[41,56,27,38],[41,57,27,38,"supabase"],[41,65,27,38],[41,66,27,39,"from"],[41,70,27,43],[41,71,27,44],[41,79,27,52],[41,80,27,53],[41,81,27,54,"insert"],[41,87,27,60],[41,88,27,61],[42,14,28,8,"blocker_id"],[42,24,28,18],[42,26,28,20,"user"],[42,30,28,24],[42,31,28,25,"id"],[42,33,28,27],[43,14,29,8,"blocked_id"],[43,24,29,18],[43,26,29,20,"blockedId"],[44,12,30,6],[44,13,30,7],[44,14,30,8],[45,12,27,14,"error"],[45,17,27,19],[45,20,27,19,"_yield$supabase$from$"],[45,41,27,19],[45,42,27,14,"error"],[45,47,27,19],[46,10,32,6],[46,14,32,10,"error"],[46,19,32,15],[46,21,32,17],[46,27,32,23,"error"],[46,32,32,28],[47,10,33,6],[47,17,33,13],[48,12,33,15,"blockedId"],[49,10,33,25],[49,11,33,26],[50,8,34,4],[50,9,34,5],[51,8,34,5],[51,24,24,4,"mutationFn"],[51,34,24,14,"mutationFn"],[51,35,24,14,"_x"],[51,37,24,14],[52,10,24,14],[52,17,24,14,"_ref2"],[52,22,24,14],[52,23,24,14,"apply"],[52,28,24,14],[52,35,24,14,"arguments"],[52,44,24,14],[53,8,24,14],[54,6,24,14],[54,9,34,5],[55,6,35,4,"onSuccess"],[55,15,35,13],[55,17,35,15,"onSuccess"],[55,18,35,15],[55,23,35,21],[56,8,36,6,"queryClient"],[56,19,36,17],[56,20,36,18,"invalidateQueries"],[56,37,36,35],[56,38,36,36],[57,10,36,38,"queryKey"],[57,18,36,46],[57,20,36,48,"feedKeys"],[57,34,36,56],[57,35,36,56,"feedKeys"],[57,43,36,56],[57,44,36,57,"all"],[58,8,36,61],[58,9,36,62],[58,10,36,63],[59,8,37,6,"queryClient"],[59,19,37,17],[59,20,37,18,"invalidateQueries"],[59,37,37,35],[59,38,37,36],[60,10,37,38,"queryKey"],[60,18,37,46],[60,20,37,48],[60,21,37,49],[60,36,37,64],[61,8,37,66],[61,9,37,67],[61,10,37,68],[62,8,38,6,"queryClient"],[62,19,38,17],[62,20,38,18,"invalidateQueries"],[62,37,38,35],[62,38,38,36],[63,10,38,38,"queryKey"],[63,18,38,46],[63,20,38,48,"chatKeys"],[63,34,38,56],[63,35,38,56,"chatKeys"],[63,43,38,56],[63,44,38,57,"conversations"],[63,57,38,70],[63,58,38,71],[64,8,38,73],[64,9,38,74],[64,10,38,75],[65,6,39,4],[65,7,39,5],[66,6,40,4,"onError"],[66,13,40,11],[66,15,40,14,"error"],[66,20,40,26],[66,24,40,31],[67,8,41,6,"Alert"],[67,20,41,11],[67,21,41,11,"Alert"],[67,26,41,11],[67,27,41,12,"alert"],[67,32,41,17],[67,33,41,18],[67,40,41,25],[67,42,41,27,"error"],[67,47,41,32],[67,48,41,33,"message"],[67,55,41,40],[67,59,41,44],[67,81,41,66],[67,82,41,67],[68,6,42,4],[69,4,43,2],[69,5,43,3],[69,6,43,4],[70,4,45,2],[70,8,45,8,"blockWithConfirmation"],[70,29,45,29],[70,32,45,32,"_ref3"],[70,37,45,32],[70,41,45,81],[71,6,45,81],[71,10,45,35,"blockedId"],[71,19,45,44],[71,22,45,44,"_ref3"],[71,27,45,44],[71,28,45,35,"blockedId"],[71,37,45,44],[72,8,45,46,"displayName"],[72,19,45,57],[72,22,45,57,"_ref3"],[72,27,45,57],[72,28,45,46,"displayName"],[72,39,45,57],[73,6,46,4,"Alert"],[73,18,46,9],[73,19,46,9,"Alert"],[73,24,46,9],[73,25,46,10,"alert"],[73,30,46,15],[73,31,47,6],[73,43,47,18],[73,45,48,6],[73,79,48,40,"displayName"],[73,90,48,51],[73,149,48,110],[73,151,49,6],[73,152,50,8],[74,8,50,10,"text"],[74,12,50,14],[74,14,50,16],[74,22,50,24],[75,8,50,26,"style"],[75,13,50,31],[75,15,50,33],[76,6,50,42],[76,7,50,43],[76,9,51,8],[77,8,52,10,"text"],[77,12,52,14],[77,14,52,16],[77,21,52,23],[78,8,53,10,"style"],[78,13,53,15],[78,15,53,17],[78,28,53,30],[79,8,54,10,"onPress"],[79,15,54,17],[79,17,54,19,"onPress"],[79,18,54,19],[79,23,54,25,"mutation"],[79,31,54,33],[79,32,54,34,"mutate"],[79,38,54,40],[79,39,54,41],[80,10,54,43,"blockedId"],[80,19,54,52],[81,10,54,54,"displayName"],[82,8,54,66],[82,9,54,67],[83,6,55,8],[83,7,55,9],[83,8,57,4],[83,9,57,5],[84,4,58,2],[84,5,58,3],[85,4,60,2],[85,11,60,9],[86,6,61,4],[86,9,61,7,"mutation"],[86,17,61,15],[87,6,62,4,"blockWithConfirmation"],[88,4,63,2],[88,5,63,3],[89,2,64,0],[89,3,64,1],[90,2,66,0],[90,6,66,0,"_default"],[90,14,66,0],[90,17,66,15,"useBlockUser"],[90,29,66,27],[91,0,66,28],[91,3]],"functionMap":{"names":["<global>","useBlockUser","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError","blockWithConfirmation","onPress"],"mappings":"AAA;qBCkB;gBCK;KDU;eEC;KFI;aGC;KHE;gCIG;mBCS,iDD;GJI;CDM"},"hasCjsExports":false},"type":"js/module"}]}