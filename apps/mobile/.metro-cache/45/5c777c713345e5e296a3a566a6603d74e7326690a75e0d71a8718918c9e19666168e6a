{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":45,"index":138}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}},{"name":"@/utils/parseLocationCoords/parseLocationCoords","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":139},"end":{"line":4,"column":82,"index":221}}],"key":"qd6WXtcycH/euWng1Negl3DCKIM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[2], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  var _utilsParseLocationCoordsParseLocationCoords = require(_dependencyMap[5], \"@/utils/parseLocationCoords/parseLocationCoords\");\n  var parseLocationCoords = _interopDefault(_utilsParseLocationCoordsParseLocationCoords);\n  /**\n   * Hook that fetches a single meetup by ID with all joined data.\n   *\n   * Resolves the match, both users, the shop location, and the related\n   * conversation for the match. Also fetches listing_items, offer_items,\n   * and parses shop coordinates for the map view.\n   */\n  var useMeetupDetail = meetupId => {\n    _s();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.meetupKeys.detail(meetupId),\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$auth$ = yield _libSupabase.supabase.auth.getSession(),\n            session = _yield$supabase$auth$.data.session;\n          var user = session?.user ?? null;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('meetups').select(`\n          id,\n          match_id,\n          proposal_message_id,\n          shop_id,\n          location_name,\n          location_coords,\n          proposed_time,\n          status,\n          user_a_completed,\n          user_b_completed,\n          created_at,\n          updated_at,\n          match:matches (\n            id,\n            user_a_id,\n            user_b_id,\n            listing_id,\n            offer_id,\n            status,\n            created_at,\n            updated_at\n          ),\n          shop:shops (\n            id,\n            name,\n            address,\n            location,\n            hours,\n            website,\n            phone,\n            supported_tcgs,\n            verified,\n            created_at,\n            updated_at\n          )\n        `).eq('id', meetupId).single(),\n            meetup = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!meetup) throw new Error('Meetup not found');\n          var match = meetup.match;\n          var shop = meetup.shop;\n          var isUserA = match.user_a_id === user.id;\n          var otherUserId = isUserA ? match.user_b_id : match.user_a_id;\n\n          // Fetch other user's profile, listing items, offer items, and conversation in parallel\n          var _yield$Promise$all = yield Promise.all([_libSupabase.supabase.from('users').select('id, display_name, avatar_url, rating_score, total_trades').eq('id', otherUserId).single(), _libSupabase.supabase.from('conversations').select('id').eq('match_id', match.id).single(), _libSupabase.supabase.from('listing_items').select('*').eq('listing_id', match.listing_id), _libSupabase.supabase.from('offer_items').select('*').eq('offer_id', match.offer_id)]),\n            _yield$Promise$all2 = (0, _slicedToArray.default)(_yield$Promise$all, 4),\n            userResult = _yield$Promise$all2[0],\n            conversationResult = _yield$Promise$all2[1],\n            listingItemsResult = _yield$Promise$all2[2],\n            offerItemsResult = _yield$Promise$all2[3];\n          if (userResult.error) throw userResult.error;\n\n          // Parse shop coordinates (prefer shop location, fall back to meetup location_coords)\n          var shopCoords = (0, parseLocationCoords.default)(shop?.location) ?? (0, parseLocationCoords.default)(meetup.location_coords);\n          return {\n            ...meetup,\n            match,\n            shop: shop,\n            other_user: userResult.data ?? {\n              id: otherUserId,\n              display_name: 'Unknown',\n              avatar_url: null,\n              rating_score: 0,\n              total_trades: 0\n            },\n            conversation: conversationResult.data ?? null,\n            is_user_a: isUserA,\n            shopCoords,\n            listingItems: listingItemsResult.data ?? [],\n            offerItems: offerItemsResult.data ?? []\n          };\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      enabled: !!meetupId\n    });\n  };\n  _s(useMeetupDetail, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  var _default = useMeetupDetail;\n});","lineCount":131,"map":[[13,2,151,0,"Object"],[13,8,151,0],[13,9,151,0,"defineProperty"],[13,23,151,0],[13,24,151,0,"exports"],[13,31,151,0],[14,4,151,0,"enumerable"],[14,14,151,0],[15,4,151,0,"get"],[15,7,151,0],[15,18,151,0,"get"],[15,19,151,0],[16,6,151,0],[16,13,151,0,"_default"],[16,21,151,0],[17,4,151,0],[18,2,151,0],[19,2,151,31],[19,6,151,31,"_babelRuntimeHelpersSlicedToArray"],[19,39,151,31],[19,42,151,31,"require"],[19,49,151,31],[19,50,151,31,"_dependencyMap"],[19,64,151,31],[20,2,151,31],[20,6,151,31,"_slicedToArray"],[20,20,151,31],[20,23,151,31,"_interopDefault"],[20,38,151,31],[20,39,151,31,"_babelRuntimeHelpersSlicedToArray"],[20,72,151,31],[21,2,151,31],[21,6,151,31,"_babelRuntimeHelpersAsyncToGenerator"],[21,42,151,31],[21,45,151,31,"require"],[21,52,151,31],[21,53,151,31,"_dependencyMap"],[21,67,151,31],[22,2,151,31],[22,6,151,31,"_asyncToGenerator"],[22,23,151,31],[22,26,151,31,"_interopDefault"],[22,41,151,31],[22,42,151,31,"_babelRuntimeHelpersAsyncToGenerator"],[22,78,151,31],[23,2,1,0],[23,6,1,0,"_tanstackReactQuery"],[23,25,1,0],[23,28,1,0,"require"],[23,35,1,0],[23,36,1,0,"_dependencyMap"],[23,50,1,0],[24,2,2,0],[24,6,2,0,"_libSupabase"],[24,18,2,0],[24,21,2,0,"require"],[24,28,2,0],[24,29,2,0,"_dependencyMap"],[24,43,2,0],[25,2,3,0],[25,6,3,0,"_queryKeys"],[25,16,3,0],[25,19,3,0,"require"],[25,26,3,0],[25,27,3,0,"_dependencyMap"],[25,41,3,0],[26,2,4,0],[26,6,4,0,"_utilsParseLocationCoordsParseLocationCoords"],[26,50,4,0],[26,53,4,0,"require"],[26,60,4,0],[26,61,4,0,"_dependencyMap"],[26,75,4,0],[27,2,4,0],[27,6,4,0,"parseLocationCoords"],[27,25,4,0],[27,28,4,0,"_interopDefault"],[27,43,4,0],[27,44,4,0,"_utilsParseLocationCoordsParseLocationCoords"],[27,88,4,0],[28,2,29,0],[29,0,30,0],[30,0,31,0],[31,0,32,0],[32,0,33,0],[33,0,34,0],[34,0,35,0],[35,2,36,0],[35,6,36,6,"useMeetupDetail"],[35,21,36,21],[35,24,36,25,"meetupId"],[35,32,36,41],[35,36,36,46],[36,4,36,46,"_s"],[36,6,36,46],[37,4,37,2],[37,11,37,9],[37,15,37,9,"useQuery"],[37,34,37,17],[37,35,37,17,"useQuery"],[37,43,37,17],[37,45,37,39],[38,6,38,4,"queryKey"],[38,14,38,12],[38,16,38,14,"meetupKeys"],[38,26,38,24],[38,27,38,24,"meetupKeys"],[38,37,38,24],[38,38,38,25,"detail"],[38,44,38,31],[38,45,38,32,"meetupId"],[38,53,38,40],[38,54,38,41],[39,6,39,4,"queryFn"],[39,13,39,11],[40,8,39,11],[40,12,39,11,"_ref"],[40,16,39,11],[40,23,39,11,"_asyncToGenerator"],[40,40,39,11],[40,41,39,11,"default"],[40,48,39,11],[40,50,39,13],[40,63,39,25],[41,10,40,6],[41,14,40,6,"_yield$supabase$auth$"],[41,35,40,6],[41,44,42,16,"supabase"],[41,56,42,24],[41,57,42,24,"supabase"],[41,65,42,24],[41,66,42,25,"auth"],[41,70,42,29],[41,71,42,30,"getSession"],[41,81,42,40],[41,82,42,41],[41,83,42,42],[42,12,41,16,"session"],[42,19,41,23],[42,22,41,23,"_yield$supabase$auth$"],[42,43,41,23],[42,44,41,8,"data"],[42,48,41,12],[42,49,41,16,"session"],[42,56,41,23],[43,10,43,6],[43,14,43,12,"user"],[43,18,43,16],[43,21,43,19,"session"],[43,28,43,26],[43,30,43,28,"user"],[43,34,43,32],[43,38,43,36],[43,42,43,40],[44,10,45,6],[44,14,45,10],[44,15,45,11,"user"],[44,19,45,15],[44,21,45,17],[44,27,45,23],[44,31,45,27,"Error"],[44,36,45,32],[44,37,45,33],[44,56,45,52],[44,57,45,53],[45,10,47,6],[45,14,47,6,"_yield$supabase$from$"],[45,35,47,6],[45,44,47,44,"supabase"],[45,56,47,52],[45,57,47,52,"supabase"],[45,65,47,52],[45,66,48,9,"from"],[45,70,48,13],[45,71,48,14],[45,80,48,23],[45,81,48,24],[45,82,49,9,"select"],[45,88,49,15],[45,89,50,10],[46,0,51,0],[47,0,52,0],[48,0,53,0],[49,0,54,0],[50,0,55,0],[51,0,56,0],[52,0,57,0],[53,0,58,0],[54,0,59,0],[55,0,60,0],[56,0,61,0],[57,0,62,0],[58,0,63,0],[59,0,64,0],[60,0,65,0],[61,0,66,0],[62,0,67,0],[63,0,68,0],[64,0,69,0],[65,0,70,0],[66,0,71,0],[67,0,72,0],[68,0,73,0],[69,0,74,0],[70,0,75,0],[71,0,76,0],[72,0,77,0],[73,0,78,0],[74,0,79,0],[75,0,80,0],[76,0,81,0],[77,0,82,0],[78,0,83,0],[79,0,84,0],[80,0,85,0],[81,0,86,0],[81,9,87,8],[81,10,87,9],[81,11,88,9,"eq"],[81,13,88,11],[81,14,88,12],[81,18,88,16],[81,20,88,18,"meetupId"],[81,28,88,26],[81,29,88,27],[81,30,89,9,"single"],[81,36,89,15],[81,37,89,16],[81,38,89,17],[82,12,47,20,"meetup"],[82,18,47,26],[82,21,47,26,"_yield$supabase$from$"],[82,42,47,26],[82,43,47,14,"data"],[82,47,47,18],[83,12,47,28,"error"],[83,17,47,33],[83,20,47,33,"_yield$supabase$from$"],[83,41,47,33],[83,42,47,28,"error"],[83,47,47,33],[84,10,91,6],[84,14,91,10,"error"],[84,19,91,15],[84,21,91,17],[84,27,91,23,"error"],[84,32,91,28],[85,10,92,6],[85,14,92,10],[85,15,92,11,"meetup"],[85,21,92,17],[85,23,92,19],[85,29,92,25],[85,33,92,29,"Error"],[85,38,92,34],[85,39,92,35],[85,57,92,53],[85,58,92,54],[86,10,94,6],[86,14,94,12,"match"],[86,19,94,17],[86,22,94,21,"meetup"],[86,28,94,27],[86,29,94,56,"match"],[86,34,94,73],[87,10,95,6],[87,14,95,12,"shop"],[87,18,95,16],[87,21,95,20,"meetup"],[87,27,95,26],[87,28,95,55,"shop"],[87,32,95,104],[88,10,96,6],[88,14,96,12,"isUserA"],[88,21,96,19],[88,24,96,22,"match"],[88,29,96,27],[88,30,96,28,"user_a_id"],[88,39,96,37],[88,44,96,42,"user"],[88,48,96,46],[88,49,96,47,"id"],[88,51,96,49],[89,10,97,6],[89,14,97,12,"otherUserId"],[89,25,97,23],[89,28,97,26,"isUserA"],[89,35,97,33],[89,38,97,36,"match"],[89,43,97,41],[89,44,97,42,"user_b_id"],[89,53,97,51],[89,56,97,54,"match"],[89,61,97,59],[89,62,97,60,"user_a_id"],[89,71,97,69],[91,10,99,6],[92,10,100,6],[92,14,100,6,"_yield$Promise$all"],[92,32,100,6],[92,41,101,14,"Promise"],[92,48,101,21],[92,49,101,22,"all"],[92,52,101,25],[92,53,101,26],[92,54,102,10,"supabase"],[92,66,102,18],[92,67,102,18,"supabase"],[92,75,102,18],[92,76,103,13,"from"],[92,80,103,17],[92,81,103,18],[92,88,103,25],[92,89,103,26],[92,90,104,13,"select"],[92,96,104,19],[92,97,104,20],[92,155,104,78],[92,156,104,79],[92,157,105,13,"eq"],[92,159,105,15],[92,160,105,16],[92,164,105,20],[92,166,105,22,"otherUserId"],[92,177,105,33],[92,178,105,34],[92,179,106,13,"single"],[92,185,106,19],[92,186,106,20],[92,187,106,21],[92,189,107,10,"supabase"],[92,201,107,18],[92,202,107,18,"supabase"],[92,210,107,18],[92,211,108,13,"from"],[92,215,108,17],[92,216,108,18],[92,231,108,33],[92,232,108,34],[92,233,109,13,"select"],[92,239,109,19],[92,240,109,20],[92,244,109,24],[92,245,109,25],[92,246,110,13,"eq"],[92,248,110,15],[92,249,110,16],[92,259,110,26],[92,261,110,28,"match"],[92,266,110,33],[92,267,110,34,"id"],[92,269,110,36],[92,270,110,37],[92,271,111,13,"single"],[92,277,111,19],[92,278,111,20],[92,279,111,21],[92,281,112,10,"supabase"],[92,293,112,18],[92,294,112,18,"supabase"],[92,302,112,18],[92,303,113,13,"from"],[92,307,113,17],[92,308,113,18],[92,323,113,33],[92,324,113,34],[92,325,114,13,"select"],[92,331,114,19],[92,332,114,20],[92,335,114,23],[92,336,114,24],[92,337,115,13,"eq"],[92,339,115,15],[92,340,115,16],[92,352,115,28],[92,354,115,30,"match"],[92,359,115,35],[92,360,115,36,"listing_id"],[92,370,115,46],[92,371,115,47],[92,373,116,10,"supabase"],[92,385,116,18],[92,386,116,18,"supabase"],[92,394,116,18],[92,395,117,13,"from"],[92,399,117,17],[92,400,117,18],[92,413,117,31],[92,414,117,32],[92,415,118,13,"select"],[92,421,118,19],[92,422,118,20],[92,425,118,23],[92,426,118,24],[92,427,119,13,"eq"],[92,429,119,15],[92,430,119,16],[92,440,119,26],[92,442,119,28,"match"],[92,447,119,33],[92,448,119,34,"offer_id"],[92,456,119,42],[92,457,119,43],[92,458,120,9],[92,459,120,10],[93,12,120,10,"_yield$Promise$all2"],[93,31,120,10],[93,38,120,10,"_slicedToArray"],[93,52,120,10],[93,53,120,10,"default"],[93,60,120,10],[93,62,120,10,"_yield$Promise$all"],[93,80,120,10],[94,12,100,13,"userResult"],[94,22,100,23],[94,25,100,23,"_yield$Promise$all2"],[94,44,100,23],[95,12,100,25,"conversationResult"],[95,30,100,43],[95,33,100,43,"_yield$Promise$all2"],[95,52,100,43],[96,12,100,45,"listingItemsResult"],[96,30,100,63],[96,33,100,63,"_yield$Promise$all2"],[96,52,100,63],[97,12,100,65,"offerItemsResult"],[97,28,100,81],[97,31,100,81,"_yield$Promise$all2"],[97,50,100,81],[98,10,122,6],[98,14,122,10,"userResult"],[98,24,122,20],[98,25,122,21,"error"],[98,30,122,26],[98,32,122,28],[98,38,122,34,"userResult"],[98,48,122,44],[98,49,122,45,"error"],[98,54,122,50],[100,10,124,6],[101,10,125,6],[101,14,125,12,"shopCoords"],[101,24,125,22],[101,27,126,8],[101,31,126,8,"parseLocationCoords"],[101,50,126,27],[101,51,126,27,"default"],[101,58,126,27],[101,60,126,28,"shop"],[101,64,126,32],[101,66,126,34,"location"],[101,74,126,42],[101,75,126,43],[101,79,127,8],[101,83,127,8,"parseLocationCoords"],[101,102,127,27],[101,103,127,27,"default"],[101,110,127,27],[101,112,127,29,"meetup"],[101,118,127,35],[101,119,127,64,"location_coords"],[101,134,127,79],[101,135,127,80],[102,10,129,6],[102,17,129,13],[103,12,130,8],[103,15,130,12,"meetup"],[103,21,130,43],[104,12,131,8,"match"],[104,17,131,13],[105,12,132,8,"shop"],[105,16,132,12],[105,18,132,14,"shop"],[105,22,132,36],[106,12,133,8,"other_user"],[106,22,133,18],[106,24,133,20,"userResult"],[106,34,133,30],[106,35,133,31,"data"],[106,39,133,35],[106,43,133,39],[107,14,134,10,"id"],[107,16,134,12],[107,18,134,14,"otherUserId"],[107,29,134,25],[108,14,135,10,"display_name"],[108,26,135,22],[108,28,135,24],[108,37,135,33],[109,14,136,10,"avatar_url"],[109,24,136,20],[109,26,136,22],[109,30,136,26],[110,14,137,10,"rating_score"],[110,26,137,22],[110,28,137,24],[110,29,137,25],[111,14,138,10,"total_trades"],[111,26,138,22],[111,28,138,24],[112,12,139,8],[112,13,139,9],[113,12,140,8,"conversation"],[113,24,140,20],[113,26,140,22,"conversationResult"],[113,44,140,40],[113,45,140,41,"data"],[113,49,140,45],[113,53,140,49],[113,57,140,53],[114,12,141,8,"is_user_a"],[114,21,141,17],[114,23,141,19,"isUserA"],[114,30,141,26],[115,12,142,8,"shopCoords"],[115,22,142,18],[116,12,143,8,"listingItems"],[116,24,143,20],[116,26,143,23,"listingItemsResult"],[116,44,143,41],[116,45,143,42,"data"],[116,49,143,46],[116,53,143,50],[116,55,143,73],[117,12,144,8,"offerItems"],[117,22,144,18],[117,24,144,21,"offerItemsResult"],[117,40,144,37],[117,41,144,38,"data"],[117,45,144,42],[117,49,144,46],[118,10,145,6],[118,11,145,7],[119,8,146,4],[119,9,146,5],[120,8,146,5],[120,24,39,4,"queryFn"],[120,31,39,11,"queryFn"],[120,32,39,11],[121,10,39,11],[121,17,39,11,"_ref"],[121,21,39,11],[121,22,39,11,"apply"],[121,27,39,11],[121,34,39,11,"arguments"],[121,43,39,11],[122,8,39,11],[123,6,39,11],[123,9,146,5],[124,6,147,4,"enabled"],[124,13,147,11],[124,15,147,13],[124,16,147,14],[124,17,147,15,"meetupId"],[125,4,148,2],[125,5,148,3],[125,6,148,4],[126,2,149,0],[126,3,149,1],[127,2,149,2,"_s"],[127,4,149,2],[127,5,36,6,"useMeetupDetail"],[127,20,36,21],[128,4,36,21],[128,12,37,9,"useQuery"],[128,31,37,17],[128,32,37,17,"useQuery"],[128,40,37,17],[129,2,37,17],[130,2,151,0],[130,6,151,0,"_default"],[130,14,151,0],[130,17,151,15,"useMeetupDetail"],[130,32,151,30],[131,0,151,31],[131,3]],"functionMap":{"names":["<global>","useMeetupDetail","useQuery$argument_0.queryFn"],"mappings":"AAA;wBCmC;aCG;KD2G;CDG"},"hasCjsExports":false},"type":"js/module"}]}