{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":46,"index":246}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _queryKeys = require(_dependencyMap[5], \"../../queryKeys\");\n  /**\n   * Hook that updates the current user's profile.\n   *\n   * On success, invalidates profile queries and calls refreshProfile\n   * from the AuthProvider to keep the auth context in sync.\n   */\n  var useUpdateProfile = function useUpdateProfile() {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user,\n      refreshProfile = _useAuth.refreshProfile;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _mutationFn = (0, _asyncToGenerator.default)(function* (params) {\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('users').upsert(Object.assign({\n              id: user.id,\n              email: user.email,\n              display_name: user.email.split('@')[0]\n            }, params)).select().single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return data;\n        });\n        function mutationFn(_x) {\n          return _mutationFn.apply(this, arguments);\n        }\n        return mutationFn;\n      }(),\n      onSuccess: function () {\n        var _onSuccess = (0, _asyncToGenerator.default)(function* () {\n          queryClient.invalidateQueries({\n            queryKey: _queryKeys.profileKeys.all\n          });\n          yield refreshProfile();\n        });\n        function onSuccess() {\n          return _onSuccess.apply(this, arguments);\n        }\n        return onSuccess;\n      }(),\n      onError: function onError(error) {\n        var _error$message;\n        _reactNative.Alert.alert('Error', (_error$message = error.message) != null ? _error$message : 'Failed to update profile');\n      }\n    });\n  };\n  _s(useUpdateProfile, \"1RA2TfO07ohqe1tJlPHxB+fYK4M=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useUpdateProfile;\n});","lineCount":79,"map":[[13,2,49,0,"Object"],[13,8,49,0],[13,9,49,0,"defineProperty"],[13,23,49,0],[13,24,49,0,"exports"],[13,31,49,0],[14,4,49,0,"enumerable"],[14,14,49,0],[15,4,49,0,"get"],[15,7,49,0],[15,18,49,0,"get"],[15,19,49,0],[16,6,49,0],[16,13,49,0,"_default"],[16,21,49,0],[17,4,49,0],[18,2,49,0],[19,2,49,32],[19,6,49,32,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,49,32],[19,45,49,32,"require"],[19,52,49,32],[19,53,49,32,"_dependencyMap"],[19,67,49,32],[20,2,49,32],[20,6,49,32,"_asyncToGenerator"],[20,23,49,32],[20,26,49,32,"_interopDefault"],[20,41,49,32],[20,42,49,32,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,49,32],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_contextAuthProvider"],[24,26,4,0],[24,29,4,0,"require"],[24,36,4,0],[24,37,4,0,"_dependencyMap"],[24,51,4,0],[25,2,5,0],[25,6,5,0,"_queryKeys"],[25,16,5,0],[25,19,5,0,"require"],[25,26,5,0],[25,27,5,0,"_dependencyMap"],[25,41,5,0],[26,2,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,2,22,0],[32,6,22,6,"useUpdateProfile"],[32,22,22,22],[32,25,22,25],[32,34,22,6,"useUpdateProfile"],[32,50,22,22,"useUpdateProfile"],[32,51,22,22],[32,53,22,31],[33,4,22,31,"_s"],[33,6,22,31],[34,4,23,2],[34,8,23,8,"queryClient"],[34,19,23,19],[34,22,23,22],[34,26,23,22,"useQueryClient"],[34,45,23,36],[34,46,23,36,"useQueryClient"],[34,60,23,36],[34,62,23,37],[34,63,23,38],[35,4,24,2],[35,8,24,2,"_useAuth"],[35,16,24,2],[35,19,24,35],[35,23,24,35,"useAuth"],[35,43,24,42],[35,44,24,42,"useAuth"],[35,51,24,42],[35,53,24,43],[35,54,24,44],[36,6,24,10,"user"],[36,10,24,14],[36,13,24,14,"_useAuth"],[36,21,24,14],[36,22,24,10,"user"],[36,26,24,14],[37,6,24,16,"refreshProfile"],[37,20,24,30],[37,23,24,30,"_useAuth"],[37,31,24,30],[37,32,24,16,"refreshProfile"],[37,46,24,30],[38,4,26,2],[38,11,26,9],[38,15,26,9,"useMutation"],[38,34,26,20],[38,35,26,20,"useMutation"],[38,46,26,20],[38,48,26,21],[39,6,27,4,"mutationFn"],[39,16,27,14],[40,8,27,14],[40,12,27,14,"_mutationFn"],[40,23,27,14],[40,30,27,14,"_asyncToGenerator"],[40,47,27,14],[40,48,27,14,"default"],[40,55,27,14],[40,57,27,16],[40,68,27,23,"params"],[40,74,27,50],[40,76,27,55],[41,10,28,6],[41,14,28,10],[41,15,28,11,"user"],[41,19,28,15],[41,21,28,17],[41,27,28,23],[41,31,28,27,"Error"],[41,36,28,32],[41,37,28,33],[41,56,28,52],[41,57,28,53],[42,10,30,6],[42,14,30,6,"_yield$supabase$from$"],[42,35,30,6],[42,44,30,36,"supabase"],[42,56,30,44],[42,57,30,44,"supabase"],[42,65,30,44],[42,66,31,9,"from"],[42,70,31,13],[42,71,31,14],[42,78,31,21],[42,79,31,22],[42,80,32,9,"upsert"],[42,86,32,15],[42,87,32,15,"Object"],[42,93,32,15],[42,94,32,15,"assign"],[42,100,32,15],[43,14,32,18,"id"],[43,16,32,20],[43,18,32,22,"user"],[43,22,32,26],[43,23,32,27,"id"],[43,25,32,29],[44,14,32,31,"email"],[44,19,32,36],[44,21,32,38,"user"],[44,25,32,42],[44,26,32,43,"email"],[44,31,32,49],[45,14,32,51,"display_name"],[45,26,32,63],[45,28,32,65,"user"],[45,32,32,69],[45,33,32,70,"email"],[45,38,32,75],[45,39,32,77,"split"],[45,44,32,82],[45,45,32,83],[45,48,32,86],[45,49,32,87],[45,50,32,88],[45,51,32,89],[46,12,32,90],[46,15,32,95,"params"],[46,21,32,101],[46,22,32,103],[46,23,32,104],[46,24,33,9,"select"],[46,30,33,15],[46,31,33,16],[46,32,33,17],[46,33,34,9,"single"],[46,39,34,15],[46,40,34,16],[46,41,34,17],[47,12,30,14,"data"],[47,16,30,18],[47,19,30,18,"_yield$supabase$from$"],[47,40,30,18],[47,41,30,14,"data"],[47,45,30,18],[48,12,30,20,"error"],[48,17,30,25],[48,20,30,25,"_yield$supabase$from$"],[48,41,30,25],[48,42,30,20,"error"],[48,47,30,25],[49,10,36,6],[49,14,36,10,"error"],[49,19,36,15],[49,21,36,17],[49,27,36,23,"error"],[49,32,36,28],[50,10,37,6],[50,17,37,13,"data"],[50,21,37,17],[51,8,38,4],[51,9,38,5],[52,8,38,5],[52,17,27,4,"mutationFn"],[52,27,27,14,"mutationFn"],[52,28,27,14,"_x"],[52,30,27,14],[53,10,27,14],[53,17,27,14,"_mutationFn"],[53,28,27,14],[53,29,27,14,"apply"],[53,34,27,14],[53,41,27,14,"arguments"],[53,50,27,14],[54,8,27,14],[55,8,27,14],[55,15,27,4,"mutationFn"],[55,25,27,14],[56,6,27,14],[56,9,38,5],[57,6,39,4,"onSuccess"],[57,15,39,13],[58,8,39,13],[58,12,39,13,"_onSuccess"],[58,22,39,13],[58,29,39,13,"_asyncToGenerator"],[58,46,39,13],[58,47,39,13,"default"],[58,54,39,13],[58,56,39,15],[58,69,39,27],[59,10,40,6,"queryClient"],[59,21,40,17],[59,22,40,18,"invalidateQueries"],[59,39,40,35],[59,40,40,36],[60,12,40,38,"queryKey"],[60,20,40,46],[60,22,40,48,"profileKeys"],[60,32,40,59],[60,33,40,59,"profileKeys"],[60,44,40,59],[60,45,40,60,"all"],[61,10,40,64],[61,11,40,65],[61,12,40,66],[62,10,41,6],[62,16,41,12,"refreshProfile"],[62,30,41,26],[62,31,41,27],[62,32,41,28],[63,8,42,4],[63,9,42,5],[64,8,42,5],[64,17,39,4,"onSuccess"],[64,26,39,13,"onSuccess"],[64,27,39,13],[65,10,39,13],[65,17,39,13,"_onSuccess"],[65,27,39,13],[65,28,39,13,"apply"],[65,33,39,13],[65,40,39,13,"arguments"],[65,49,39,13],[66,8,39,13],[67,8,39,13],[67,15,39,4,"onSuccess"],[67,24,39,13],[68,6,39,13],[68,9,42,5],[69,6,43,4,"onError"],[69,13,43,11],[69,15,43,13],[69,24,43,4,"onError"],[69,31,43,11,"onError"],[69,32,43,14,"error"],[69,37,43,26],[69,39,43,31],[70,8,43,31],[70,12,43,31,"_error$message"],[70,26,43,31],[71,8,44,6,"Alert"],[71,20,44,11],[71,21,44,11,"Alert"],[71,26,44,11],[71,27,44,12,"alert"],[71,32,44,17],[71,33,44,18],[71,40,44,25],[71,43,44,25,"_error$message"],[71,57,44,25],[71,60,44,27,"error"],[71,65,44,32],[71,66,44,33,"message"],[71,73,44,40],[71,85,44,40,"_error$message"],[71,99,44,40],[71,102,44,44],[71,128,44,70],[71,129,44,71],[72,6,45,4],[73,4,46,2],[73,5,46,3],[73,6,46,4],[74,2,47,0],[74,3,47,1],[75,2,47,2,"_s"],[75,4,47,2],[75,5,22,6,"useUpdateProfile"],[75,21,22,22],[76,4,22,22],[76,12,23,22,"useQueryClient"],[76,31,23,36],[76,32,23,36,"useQueryClient"],[76,46,23,36],[76,48,24,35,"useAuth"],[76,68,24,42],[76,69,24,42,"useAuth"],[76,76,24,42],[76,78,26,9,"useMutation"],[76,97,26,20],[76,98,26,20,"useMutation"],[76,109,26,20],[77,2,26,20],[78,2,49,0],[78,6,49,0,"_default"],[78,14,49,0],[78,17,49,15,"useUpdateProfile"],[78,33,49,31],[79,0,49,32],[79,3]],"functionMap":{"names":["<global>","useUpdateProfile","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;yBCqB;gBCK;KDW;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}