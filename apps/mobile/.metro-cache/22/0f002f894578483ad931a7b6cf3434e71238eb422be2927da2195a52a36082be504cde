{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":49,"index":142}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _contextAuthProvider = require(_dependencyMap[3]);\n  /**\n   * Lightweight check for whether the current user has any active listings.\n   *\n   * Uses a head-only count query (fetches zero row data) so it's as cheap as\n   * possible. Returns `{ hasListings, isLoading }`.\n   */\n  var useHasActiveListings = () => {\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    var _useQuery = (0, _tanstackReactQuery.useQuery)({\n        queryKey: ['user-has-active-listings', user?.id],\n        queryFn: function () {\n          var _ref = (0, _asyncToGenerator.default)(function* () {\n            if (!user) return 0;\n            var _yield$supabase$from$ = yield _libSupabase.supabase.from('listings').select('id', {\n                count: 'exact',\n                head: true\n              }).eq('user_id', user.id).eq('status', 'active'),\n              count = _yield$supabase$from$.count,\n              error = _yield$supabase$from$.error;\n            if (error) throw error;\n            return count ?? 0;\n          });\n          return function queryFn() {\n            return _ref.apply(this, arguments);\n          };\n        }(),\n        enabled: !!user\n      }),\n      data = _useQuery.data,\n      isLoading = _useQuery.isLoading;\n    return {\n      hasListings: (data ?? 0) > 0,\n      isLoading\n    };\n  };\n  var _default = useHasActiveListings;\n});","lineCount":60,"map":[[12,2,36,0,"Object"],[12,8,36,0],[12,9,36,0,"defineProperty"],[12,23,36,0],[12,24,36,0,"exports"],[12,31,36,0],[13,4,36,0,"enumerable"],[13,14,36,0],[14,4,36,0,"get"],[14,7,36,0],[14,18,36,0,"get"],[14,19,36,0],[15,6,36,0],[15,13,36,0,"_default"],[15,21,36,0],[16,4,36,0],[17,2,36,0],[18,2,36,36],[18,6,36,36,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,36,36],[18,45,36,36,"require"],[18,52,36,36],[18,53,36,36,"_dependencyMap"],[18,67,36,36],[19,2,36,36],[19,6,36,36,"_asyncToGenerator"],[19,23,36,36],[19,26,36,36,"_interopDefault"],[19,41,36,36],[19,42,36,36,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,36,36],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_contextAuthProvider"],[22,26,3,0],[22,29,3,0,"require"],[22,36,3,0],[22,37,3,0,"_dependencyMap"],[22,51,3,0],[23,2,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,2,11,0],[29,6,11,6,"useHasActiveListings"],[29,26,11,26],[29,29,11,29,"useHasActiveListings"],[29,30,11,29],[29,35,11,35],[30,4,12,2],[30,8,12,2,"_useAuth"],[30,16,12,2],[30,19,12,19],[30,23,12,19,"useAuth"],[30,43,12,26],[30,44,12,26,"useAuth"],[30,51,12,26],[30,53,12,27],[30,54,12,28],[31,6,12,10,"user"],[31,10,12,14],[31,13,12,14,"_useAuth"],[31,21,12,14],[31,22,12,10,"user"],[31,26,12,14],[32,4,14,2],[32,8,14,2,"_useQuery"],[32,17,14,2],[32,20,14,30],[32,24,14,30,"useQuery"],[32,43,14,38],[32,44,14,38,"useQuery"],[32,52,14,38],[32,54,14,39],[33,8,15,4,"queryKey"],[33,16,15,12],[33,18,15,14],[33,19,15,15],[33,45,15,41],[33,47,15,43,"user"],[33,51,15,47],[33,53,15,49,"id"],[33,55,15,51],[33,56,15,52],[34,8,16,4,"queryFn"],[34,15,16,11],[35,10,16,11],[35,14,16,11,"_ref"],[35,18,16,11],[35,25,16,11,"_asyncToGenerator"],[35,42,16,11],[35,43,16,11,"default"],[35,50,16,11],[35,52,16,13],[35,65,16,25],[36,12,17,6],[36,16,17,10],[36,17,17,11,"user"],[36,21,17,15],[36,23,17,17],[36,30,17,24],[36,31,17,25],[37,12,18,6],[37,16,18,6,"_yield$supabase$from$"],[37,37,18,6],[37,46,18,37,"supabase"],[37,58,18,45],[37,59,18,45,"supabase"],[37,67,18,45],[37,68,19,9,"from"],[37,72,19,13],[37,73,19,14],[37,83,19,24],[37,84,19,25],[37,85,20,9,"select"],[37,91,20,15],[37,92,20,16],[37,96,20,20],[37,98,20,22],[38,16,20,24,"count"],[38,21,20,29],[38,23,20,31],[38,30,20,38],[39,16,20,40,"head"],[39,20,20,44],[39,22,20,46],[40,14,20,51],[40,15,20,52],[40,16,20,53],[40,17,21,9,"eq"],[40,19,21,11],[40,20,21,12],[40,29,21,21],[40,31,21,23,"user"],[40,35,21,27],[40,36,21,28,"id"],[40,38,21,30],[40,39,21,31],[40,40,22,9,"eq"],[40,42,22,11],[40,43,22,12],[40,51,22,20],[40,53,22,22],[40,61,22,30],[40,62,22,31],[41,14,18,14,"count"],[41,19,18,19],[41,22,18,19,"_yield$supabase$from$"],[41,43,18,19],[41,44,18,14,"count"],[41,49,18,19],[42,14,18,21,"error"],[42,19,18,26],[42,22,18,26,"_yield$supabase$from$"],[42,43,18,26],[42,44,18,21,"error"],[42,49,18,26],[43,12,24,6],[43,16,24,10,"error"],[43,21,24,15],[43,23,24,17],[43,29,24,23,"error"],[43,34,24,28],[44,12,25,6],[44,19,25,13,"count"],[44,24,25,18],[44,28,25,22],[44,29,25,23],[45,10,26,4],[45,11,26,5],[46,10,26,5],[46,26,16,4,"queryFn"],[46,33,16,11,"queryFn"],[46,34,16,11],[47,12,16,11],[47,19,16,11,"_ref"],[47,23,16,11],[47,24,16,11,"apply"],[47,29,16,11],[47,36,16,11,"arguments"],[47,45,16,11],[48,10,16,11],[49,8,16,11],[49,11,26,5],[50,8,27,4,"enabled"],[50,15,27,11],[50,17,27,13],[50,18,27,14],[50,19,27,15,"user"],[51,6,28,2],[51,7,28,3],[51,8,28,4],[52,6,14,10,"data"],[52,10,14,14],[52,13,14,14,"_useQuery"],[52,22,14,14],[52,23,14,10,"data"],[52,27,14,14],[53,6,14,16,"isLoading"],[53,15,14,25],[53,18,14,25,"_useQuery"],[53,27,14,25],[53,28,14,16,"isLoading"],[53,37,14,25],[54,4,30,2],[54,11,30,9],[55,6,31,4,"hasListings"],[55,17,31,15],[55,19,31,17],[55,20,31,18,"data"],[55,24,31,22],[55,28,31,26],[55,29,31,27],[55,33,31,31],[55,34,31,32],[56,6,32,4,"isLoading"],[57,4,33,2],[57,5,33,3],[58,2,34,0],[58,3,34,1],[59,2,36,0],[59,6,36,0,"_default"],[59,14,36,0],[59,17,36,15,"useHasActiveListings"],[59,37,36,35],[60,0,36,36],[60,3]],"functionMap":{"names":["<global>","useHasActiveListings","useQuery$argument_0.queryFn"],"mappings":"AAA;6BCU;aCK;KDU;CDQ"},"hasCjsExports":false},"type":"js/module"}]}