{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":49,"index":82}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/services/cardData/cardDataService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":83},"end":{"line":3,"column":70,"index":153}}],"key":"nywe4wRFGi03uMHWkFCW5l9Ir6I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _servicesCardDataCardDataService = require(_dependencyMap[2], \"@/services/cardData/cardDataService\");\n  var PERIOD_DAYS = {\n    '1M': 30,\n    '3M': 90,\n    '6M': 180,\n    '12M': 365,\n    MAX: Infinity\n  };\n\n  /**\n   * Returns price history for a card, filtered by the selected time period.\n   */\n  var usePriceHistory = function usePriceHistory(externalId, period) {\n    _s();\n    var _useQuery = (0, _tanstackReactQuery.useQuery)({\n        queryKey: ['card-detail', externalId],\n        queryFn: function queryFn() {\n          return _servicesCardDataCardDataService.cardDataService.getCardDetail(externalId);\n        },\n        staleTime: 1000 * 60 * 30,\n        enabled: externalId.length > 0\n      }),\n      detail = _useQuery.data,\n      isLoading = _useQuery.isLoading;\n    var filtered = (0, _react.useMemo)(function () {\n      var _PERIOD_DAYS$period;\n      var history = detail == null ? void 0 : detail.priceHistory;\n      if (!history || history.points.length === 0) return null;\n      var days = (_PERIOD_DAYS$period = PERIOD_DAYS[period]) != null ? _PERIOD_DAYS$period : Infinity;\n      if (days === Infinity) return history;\n      var cutoff = new Date();\n      cutoff.setDate(cutoff.getDate() - days);\n      var cutoffStr = cutoff.toISOString().split('T')[0];\n      var pts = history.points.filter(function (p) {\n        return p.date >= cutoffStr;\n      });\n      if (pts.length < 2) return history; // fallback to full if too few points\n\n      var high = -Infinity;\n      var low = Infinity;\n      for (var p of pts) {\n        if (p.price > high) high = p.price;\n        if (p.price < low) low = p.price;\n      }\n      var first = pts[0].price;\n      var last = pts[pts.length - 1].price;\n      var changePercent = first > 0 ? Math.round((last - first) / first * 10000) / 100 : 0;\n      return {\n        points: pts,\n        high: Math.round(high * 100) / 100,\n        low: Math.round(low * 100) / 100,\n        changePercent: changePercent\n      };\n    }, [detail, period]);\n    return {\n      data: filtered,\n      isLoading: isLoading\n    };\n  };\n  _s(usePriceHistory, \"YMXHSA49uYO3a1yluVvMZu9yRfE=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  var _default = usePriceHistory;\n});","lineCount":79,"map":[[8,2,64,0,"Object"],[8,8,64,0],[8,9,64,0,"defineProperty"],[8,23,64,0],[8,24,64,0,"exports"],[8,31,64,0],[9,4,64,0,"enumerable"],[9,14,64,0],[10,4,64,0,"get"],[10,7,64,0],[10,18,64,0,"get"],[10,19,64,0],[11,6,64,0],[11,13,64,0,"_default"],[11,21,64,0],[12,4,64,0],[13,2,64,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_tanstackReactQuery"],[15,25,2,0],[15,28,2,0,"require"],[15,35,2,0],[15,36,2,0,"_dependencyMap"],[15,50,2,0],[16,2,3,0],[16,6,3,0,"_servicesCardDataCardDataService"],[16,38,3,0],[16,41,3,0,"require"],[16,48,3,0],[16,49,3,0,"_dependencyMap"],[16,63,3,0],[17,2,6,0],[17,6,6,6,"PERIOD_DAYS"],[17,17,6,41],[17,20,6,44],[18,4,7,2],[18,8,7,6],[18,10,7,8],[18,12,7,10],[19,4,8,2],[19,8,8,6],[19,10,8,8],[19,12,8,10],[20,4,9,2],[20,8,9,6],[20,10,9,8],[20,13,9,11],[21,4,10,2],[21,9,10,7],[21,11,10,9],[21,14,10,12],[22,4,11,2,"MAX"],[22,7,11,5],[22,9,11,7,"Infinity"],[23,2,12,0],[23,3,12,1],[25,2,14,0],[26,0,15,0],[27,0,16,0],[28,2,17,0],[28,6,17,6,"usePriceHistory"],[28,21,17,21],[28,24,17,24],[28,33,17,6,"usePriceHistory"],[28,48,17,21,"usePriceHistory"],[28,49,17,25,"externalId"],[28,59,17,43],[28,61,17,45,"period"],[28,67,17,59],[28,69,17,64],[29,4,17,64,"_s"],[29,6,17,64],[30,4,18,2],[30,8,18,2,"_useQuery"],[30,17,18,2],[30,20,18,38],[30,24,18,38,"useQuery"],[30,43,18,46],[30,44,18,46,"useQuery"],[30,52,18,46],[30,54,18,47],[31,8,19,4,"queryKey"],[31,16,19,12],[31,18,19,14],[31,19,19,15],[31,32,19,28],[31,34,19,30,"externalId"],[31,44,19,40],[31,45,19,50],[32,8,20,4,"queryFn"],[32,15,20,11],[32,17,20,13],[32,26,20,4,"queryFn"],[32,33,20,11,"queryFn"],[32,34,20,11],[33,10,20,11],[33,17,20,19,"cardDataService"],[33,49,20,34],[33,50,20,34,"cardDataService"],[33,65,20,34],[33,66,20,35,"getCardDetail"],[33,79,20,48],[33,80,20,49,"externalId"],[33,90,20,59],[33,91,20,60],[34,8,20,60],[35,8,21,4,"staleTime"],[35,17,21,13],[35,19,21,15],[35,23,21,19],[35,26,21,22],[35,28,21,24],[35,31,21,27],[35,33,21,29],[36,8,22,4,"enabled"],[36,15,22,11],[36,17,22,13,"externalId"],[36,27,22,23],[36,28,22,24,"length"],[36,34,22,30],[36,37,22,33],[37,6,23,2],[37,7,23,3],[37,8,23,4],[38,6,18,16,"detail"],[38,12,18,22],[38,15,18,22,"_useQuery"],[38,24,18,22],[38,25,18,10,"data"],[38,29,18,14],[39,6,18,24,"isLoading"],[39,15,18,33],[39,18,18,33,"_useQuery"],[39,27,18,33],[39,28,18,24,"isLoading"],[39,37,18,33],[40,4,25,2],[40,8,25,8,"filtered"],[40,16,25,16],[40,19,25,19],[40,23,25,19,"useMemo"],[40,29,25,26],[40,30,25,26,"useMemo"],[40,37,25,26],[40,39,25,27],[40,51,25,54],[41,6,25,54],[41,10,25,54,"_PERIOD_DAYS$period"],[41,29,25,54],[42,6,26,4],[42,10,26,10,"history"],[42,17,26,17],[42,20,26,20,"detail"],[42,26,26,26],[42,46,26,20,"detail"],[42,52,26,26],[42,53,26,28,"priceHistory"],[42,65,26,40],[43,6,27,4],[43,10,27,8],[43,11,27,9,"history"],[43,18,27,16],[43,22,27,20,"history"],[43,29,27,27],[43,30,27,28,"points"],[43,36,27,34],[43,37,27,35,"length"],[43,43,27,41],[43,48,27,46],[43,49,27,47],[43,51,27,49],[43,58,27,56],[43,62,27,60],[44,6,29,4],[44,10,29,10,"days"],[44,14,29,14],[44,18,29,14,"_PERIOD_DAYS$period"],[44,37,29,14],[44,40,29,17,"PERIOD_DAYS"],[44,51,29,28],[44,52,29,29,"period"],[44,58,29,35],[44,59,29,36],[44,71,29,36,"_PERIOD_DAYS$period"],[44,90,29,36],[44,93,29,40,"Infinity"],[44,101,29,48],[45,6,30,4],[45,10,30,8,"days"],[45,14,30,12],[45,19,30,17,"Infinity"],[45,27,30,25],[45,29,30,27],[45,36,30,34,"history"],[45,43,30,41],[46,6,32,4],[46,10,32,10,"cutoff"],[46,16,32,16],[46,19,32,19],[46,23,32,23,"Date"],[46,27,32,27],[46,28,32,28],[46,29,32,29],[47,6,33,4,"cutoff"],[47,12,33,10],[47,13,33,11,"setDate"],[47,20,33,18],[47,21,33,19,"cutoff"],[47,27,33,25],[47,28,33,26,"getDate"],[47,35,33,33],[47,36,33,34],[47,37,33,35],[47,40,33,38,"days"],[47,44,33,42],[47,45,33,43],[48,6,34,4],[48,10,34,10,"cutoffStr"],[48,19,34,19],[48,22,34,22,"cutoff"],[48,28,34,28],[48,29,34,29,"toISOString"],[48,40,34,40],[48,41,34,41],[48,42,34,42],[48,43,34,43,"split"],[48,48,34,48],[48,49,34,49],[48,52,34,52],[48,53,34,53],[48,54,34,54],[48,55,34,55],[48,56,34,57],[49,6,36,4],[49,10,36,10,"pts"],[49,13,36,13],[49,16,36,16,"history"],[49,23,36,23],[49,24,36,24,"points"],[49,30,36,30],[49,31,36,31,"filter"],[49,37,36,37],[49,38,36,38],[49,48,36,39,"p"],[49,49,36,40],[50,8,36,40],[50,15,36,45,"p"],[50,16,36,46],[50,17,36,47,"date"],[50,21,36,51],[50,25,36,55,"cutoffStr"],[50,34,36,64],[51,6,36,64],[51,8,36,65],[52,6,37,4],[52,10,37,8,"pts"],[52,13,37,11],[52,14,37,12,"length"],[52,20,37,18],[52,23,37,21],[52,24,37,22],[52,26,37,24],[52,33,37,31,"history"],[52,40,37,38],[52,41,37,39],[52,42,37,40],[54,6,39,4],[54,10,39,8,"high"],[54,14,39,12],[54,17,39,15],[54,18,39,16,"Infinity"],[54,26,39,24],[55,6,40,4],[55,10,40,8,"low"],[55,13,40,11],[55,16,40,14,"Infinity"],[55,24,40,22],[56,6,41,4],[56,11,41,9],[56,15,41,15,"p"],[56,16,41,16],[56,20,41,20,"pts"],[56,23,41,23],[56,25,41,25],[57,8,42,6],[57,12,42,10,"p"],[57,13,42,11],[57,14,42,12,"price"],[57,19,42,17],[57,22,42,20,"high"],[57,26,42,24],[57,28,42,26,"high"],[57,32,42,30],[57,35,42,33,"p"],[57,36,42,34],[57,37,42,35,"price"],[57,42,42,40],[58,8,43,6],[58,12,43,10,"p"],[58,13,43,11],[58,14,43,12,"price"],[58,19,43,17],[58,22,43,20,"low"],[58,25,43,23],[58,27,43,25,"low"],[58,30,43,28],[58,33,43,31,"p"],[58,34,43,32],[58,35,43,33,"price"],[58,40,43,38],[59,6,44,4],[60,6,46,4],[60,10,46,10,"first"],[60,15,46,15],[60,18,46,18,"pts"],[60,21,46,21],[60,22,46,22],[60,23,46,23],[60,24,46,24],[60,25,46,26,"price"],[60,30,46,31],[61,6,47,4],[61,10,47,10,"last"],[61,14,47,14],[61,17,47,17,"pts"],[61,20,47,20],[61,21,47,21,"pts"],[61,24,47,24],[61,25,47,25,"length"],[61,31,47,31],[61,34,47,34],[61,35,47,35],[61,36,47,36],[61,37,47,38,"price"],[61,42,47,43],[62,6,48,4],[62,10,48,10,"changePercent"],[62,23,48,23],[62,26,49,6,"first"],[62,31,49,11],[62,34,49,14],[62,35,49,15],[62,38,50,10,"Math"],[62,42,50,14],[62,43,50,15,"round"],[62,48,50,20],[62,49,50,22],[62,50,50,23,"last"],[62,54,50,27],[62,57,50,30,"first"],[62,62,50,35],[62,66,50,39,"first"],[62,71,50,44],[62,74,50,48],[62,79,50,53],[62,80,50,54],[62,83,50,57],[62,86,50,60],[62,89,51,10],[62,90,51,11],[63,6,53,4],[63,13,53,11],[64,8,54,6,"points"],[64,14,54,12],[64,16,54,14,"pts"],[64,19,54,17],[65,8,55,6,"high"],[65,12,55,10],[65,14,55,12,"Math"],[65,18,55,16],[65,19,55,17,"round"],[65,24,55,22],[65,25,55,23,"high"],[65,29,55,27],[65,32,55,30],[65,35,55,33],[65,36,55,34],[65,39,55,37],[65,42,55,40],[66,8,56,6,"low"],[66,11,56,9],[66,13,56,11,"Math"],[66,17,56,15],[66,18,56,16,"round"],[66,23,56,21],[66,24,56,22,"low"],[66,27,56,25],[66,30,56,28],[66,33,56,31],[66,34,56,32],[66,37,56,35],[66,40,56,38],[67,8,57,6,"changePercent"],[67,21,57,19],[67,23,57,6,"changePercent"],[68,6,58,4],[68,7,58,5],[69,4,59,2],[69,5,59,3],[69,7,59,5],[69,8,59,6,"detail"],[69,14,59,12],[69,16,59,14,"period"],[69,22,59,20],[69,23,59,21],[69,24,59,22],[70,4,61,2],[70,11,61,9],[71,6,61,11,"data"],[71,10,61,15],[71,12,61,17,"filtered"],[71,20,61,25],[72,6,61,27,"isLoading"],[72,15,61,36],[72,17,61,27,"isLoading"],[73,4,61,37],[73,5,61,38],[74,2,62,0],[74,3,62,1],[75,2,62,2,"_s"],[75,4,62,2],[75,5,17,6,"usePriceHistory"],[75,20,17,21],[76,4,17,21],[76,12,18,38,"useQuery"],[76,31,18,46],[76,32,18,46,"useQuery"],[76,40,18,46],[77,2,18,46],[78,2,64,0],[78,6,64,0,"_default"],[78,14,64,0],[78,17,64,15,"usePriceHistory"],[78,32,64,30],[79,0,64,31],[79,3]],"functionMap":{"names":["<global>","usePriceHistory","useQuery$argument_0.queryFn","useMemo$argument_0","history.points.filter$argument_0"],"mappings":"AAA;wBCgB;aCG,+CD;2BEK;sCCW,0BD;GFuB;CDG"},"hasCjsExports":false},"type":"js/module"}]}