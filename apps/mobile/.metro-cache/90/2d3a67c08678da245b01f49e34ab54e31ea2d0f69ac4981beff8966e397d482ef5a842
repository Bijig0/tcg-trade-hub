{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":43,"index":136}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[3], \"../../queryKeys\");\n  /**\n   * Fetches all shops from the shops table for display on the browse map.\n   * Transforms PostGIS geography/geometry point to { lat, lng }.\n   */\n  var useBrowseShops = function useBrowseShops() {\n    _s();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.feedKeys.shops(),\n      queryFn: function () {\n        var _queryFn = (0, _asyncToGenerator.default)(function* () {\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('shops').select('id, name, address, location, supported_tcgs, verified'),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          if (!data) return [];\n          return data.map(function (shop) {\n            var _ref, _ref2, _ref3;\n            var lat = 0;\n            var lng = 0;\n\n            // Parse PostGIS point â€” could be GeoJSON or WKT string\n            var loc = shop.location;\n            if (loc && typeof loc === 'object') {\n              var geo = loc;\n              if (geo.coordinates) {\n                // GeoJSON: [lng, lat]\n                lng = geo.coordinates[0];\n                lat = geo.coordinates[1];\n              }\n            } else if (typeof loc === 'string') {\n              // WKT: POINT(lng lat)\n              var match = /POINT\\(([^ ]+) ([^ ]+)\\)/.exec(loc);\n              if (match && match[1] && match[2]) {\n                lng = parseFloat(match[1]);\n                lat = parseFloat(match[2]);\n              }\n            }\n            return {\n              id: shop.id,\n              name: shop.name,\n              address: (_ref = shop.address) != null ? _ref : '',\n              lat: lat,\n              lng: lng,\n              supported_tcgs: (_ref2 = shop.supported_tcgs) != null ? _ref2 : [],\n              verified: (_ref3 = shop.verified) != null ? _ref3 : false\n            };\n          });\n        });\n        function queryFn() {\n          return _queryFn.apply(this, arguments);\n        }\n        return queryFn;\n      }()\n    });\n  };\n  _s(useBrowseShops, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  var _default = useBrowseShops;\n});","lineCount":83,"map":[[13,2,57,0,"Object"],[13,8,57,0],[13,9,57,0,"defineProperty"],[13,23,57,0],[13,24,57,0,"exports"],[13,31,57,0],[14,4,57,0,"enumerable"],[14,14,57,0],[15,4,57,0,"get"],[15,7,57,0],[15,18,57,0,"get"],[15,19,57,0],[16,6,57,0],[16,13,57,0,"_default"],[16,21,57,0],[17,4,57,0],[18,2,57,0],[19,2,57,30],[19,6,57,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,57,30],[19,45,57,30,"require"],[19,52,57,30],[19,53,57,30,"_dependencyMap"],[19,67,57,30],[20,2,57,30],[20,6,57,30,"_asyncToGenerator"],[20,23,57,30],[20,26,57,30,"_interopDefault"],[20,41,57,30],[20,42,57,30,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,57,30],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_libSupabase"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_queryKeys"],[23,16,3,0],[23,19,3,0,"require"],[23,26,3,0],[23,27,3,0,"_dependencyMap"],[23,41,3,0],[24,2,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,2,10,0],[28,6,10,6,"useBrowseShops"],[28,20,10,20],[28,23,10,23],[28,32,10,6,"useBrowseShops"],[28,46,10,20,"useBrowseShops"],[28,47,10,20],[28,49,10,29],[29,4,10,29,"_s"],[29,6,10,29],[30,4,11,2],[30,11,11,9],[30,15,11,9,"useQuery"],[30,34,11,17],[30,35,11,17,"useQuery"],[30,43,11,17],[30,45,11,34],[31,6,12,4,"queryKey"],[31,14,12,12],[31,16,12,14,"feedKeys"],[31,26,12,22],[31,27,12,22,"feedKeys"],[31,35,12,22],[31,36,12,23,"shops"],[31,41,12,28],[31,42,12,29],[31,43,12,30],[32,6,13,4,"queryFn"],[32,13,13,11],[33,8,13,11],[33,12,13,11,"_queryFn"],[33,20,13,11],[33,27,13,11,"_asyncToGenerator"],[33,44,13,11],[33,45,13,11,"default"],[33,52,13,11],[33,54,13,13],[33,67,13,25],[34,10,14,6],[34,14,14,6,"_yield$supabase$from$"],[34,35,14,6],[34,44,14,36,"supabase"],[34,56,14,44],[34,57,14,44,"supabase"],[34,65,14,44],[34,66,15,9,"from"],[34,70,15,13],[34,71,15,14],[34,78,15,21],[34,79,15,22],[34,80,16,9,"select"],[34,86,16,15],[34,87,16,16],[34,142,16,71],[34,143,16,72],[35,12,14,14,"data"],[35,16,14,18],[35,19,14,18,"_yield$supabase$from$"],[35,40,14,18],[35,41,14,14,"data"],[35,45,14,18],[36,12,14,20,"error"],[36,17,14,25],[36,20,14,25,"_yield$supabase$from$"],[36,41,14,25],[36,42,14,20,"error"],[36,47,14,25],[37,10,18,6],[37,14,18,10,"error"],[37,19,18,15],[37,21,18,17],[37,27,18,23,"error"],[37,32,18,28],[38,10,19,6],[38,14,19,10],[38,15,19,11,"data"],[38,19,19,15],[38,21,19,17],[38,28,19,24],[38,30,19,26],[39,10,21,6],[39,17,21,13,"data"],[39,21,21,17],[39,22,21,18,"map"],[39,25,21,21],[39,26,21,22],[39,36,21,23,"shop"],[39,40,21,52],[39,42,21,57],[40,12,21,57],[40,16,21,57,"_ref"],[40,20,21,57],[40,22,21,57,"_ref2"],[40,27,21,57],[40,29,21,57,"_ref3"],[40,34,21,57],[41,12,22,8],[41,16,22,12,"lat"],[41,19,22,15],[41,22,22,18],[41,23,22,19],[42,12,23,8],[42,16,23,12,"lng"],[42,19,23,15],[42,22,23,18],[42,23,23,19],[44,12,25,8],[45,12,26,8],[45,16,26,14,"loc"],[45,19,26,17],[45,22,26,20,"shop"],[45,26,26,24],[45,27,26,25,"location"],[45,35,26,33],[46,12,27,8],[46,16,27,12,"loc"],[46,19,27,15],[46,23,27,19],[46,30,27,26,"loc"],[46,33,27,29],[46,38,27,34],[46,46,27,42],[46,48,27,44],[47,14,28,10],[47,18,28,16,"geo"],[47,21,28,19],[47,24,28,22,"loc"],[47,27,28,63],[48,14,29,10],[48,18,29,14,"geo"],[48,21,29,17],[48,22,29,18,"coordinates"],[48,33,29,29],[48,35,29,31],[49,16,30,12],[50,16,31,12,"lng"],[50,19,31,15],[50,22,31,18,"geo"],[50,25,31,21],[50,26,31,22,"coordinates"],[50,37,31,33],[50,38,31,34],[50,39,31,35],[50,40,31,36],[51,16,32,12,"lat"],[51,19,32,15],[51,22,32,18,"geo"],[51,25,32,21],[51,26,32,22,"coordinates"],[51,37,32,33],[51,38,32,34],[51,39,32,35],[51,40,32,36],[52,14,33,10],[53,12,34,8],[53,13,34,9],[53,19,34,15],[53,23,34,19],[53,30,34,26,"loc"],[53,33,34,29],[53,38,34,34],[53,46,34,42],[53,48,34,44],[54,14,35,10],[55,14,36,10],[55,18,36,16,"match"],[55,23,36,21],[55,26,36,24],[55,52,36,50],[55,53,36,51,"exec"],[55,57,36,55],[55,58,36,56,"loc"],[55,61,36,59],[55,62,36,60],[56,14,37,10],[56,18,37,14,"match"],[56,23,37,19],[56,27,37,23,"match"],[56,32,37,28],[56,33,37,29],[56,34,37,30],[56,35,37,31],[56,39,37,35,"match"],[56,44,37,40],[56,45,37,41],[56,46,37,42],[56,47,37,43],[56,49,37,45],[57,16,38,12,"lng"],[57,19,38,15],[57,22,38,18,"parseFloat"],[57,32,38,28],[57,33,38,29,"match"],[57,38,38,34],[57,39,38,35],[57,40,38,36],[57,41,38,37],[57,42,38,38],[58,16,39,12,"lat"],[58,19,39,15],[58,22,39,18,"parseFloat"],[58,32,39,28],[58,33,39,29,"match"],[58,38,39,34],[58,39,39,35],[58,40,39,36],[58,41,39,37],[58,42,39,38],[59,14,40,10],[60,12,41,8],[61,12,43,8],[61,19,43,15],[62,14,44,10,"id"],[62,16,44,12],[62,18,44,14,"shop"],[62,22,44,18],[62,23,44,19,"id"],[62,25,44,31],[63,14,45,10,"name"],[63,18,45,14],[63,20,45,16,"shop"],[63,24,45,20],[63,25,45,21,"name"],[63,29,45,35],[64,14,46,10,"address"],[64,21,46,17],[64,24,46,17,"_ref"],[64,28,46,17],[64,31,46,20,"shop"],[64,35,46,24],[64,36,46,25,"address"],[64,43,46,32],[64,55,46,32,"_ref"],[64,59,46,32],[64,62,46,47],[64,64,46,49],[65,14,47,10,"lat"],[65,17,47,13],[65,19,47,10,"lat"],[65,22,47,13],[66,14,48,10,"lng"],[66,17,48,13],[66,19,48,10,"lng"],[66,22,48,13],[67,14,49,10,"supported_tcgs"],[67,28,49,24],[67,31,49,24,"_ref2"],[67,36,49,24],[67,39,49,27,"shop"],[67,43,49,31],[67,44,49,32,"supported_tcgs"],[67,58,49,46],[67,70,49,46,"_ref2"],[67,75,49,46],[67,78,49,63],[67,80,49,65],[68,14,50,10,"verified"],[68,22,50,18],[68,25,50,18,"_ref3"],[68,30,50,18],[68,33,50,21,"shop"],[68,37,50,25],[68,38,50,26,"verified"],[68,46,50,34],[68,58,50,34,"_ref3"],[68,63,50,34],[68,66,50,50],[69,12,51,8],[69,13,51,9],[70,10,52,6],[70,11,52,7],[70,12,52,8],[71,8,53,4],[71,9,53,5],[72,8,53,5],[72,17,13,4,"queryFn"],[72,24,13,11,"queryFn"],[72,25,13,11],[73,10,13,11],[73,17,13,11,"_queryFn"],[73,25,13,11],[73,26,13,11,"apply"],[73,31,13,11],[73,38,13,11,"arguments"],[73,47,13,11],[74,8,13,11],[75,8,13,11],[75,15,13,4,"queryFn"],[75,22,13,11],[76,6,13,11],[77,4,54,2],[77,5,54,3],[77,6,54,4],[78,2,55,0],[78,3,55,1],[79,2,55,2,"_s"],[79,4,55,2],[79,5,10,6,"useBrowseShops"],[79,19,10,20],[80,4,10,20],[80,12,11,9,"useQuery"],[80,31,11,17],[80,32,11,17,"useQuery"],[80,40,11,17],[81,2,11,17],[82,2,57,0],[82,6,57,0,"_default"],[82,14,57,0],[82,17,57,15,"useBrowseShops"],[82,31,57,29],[83,0,57,30],[83,3]],"functionMap":{"names":["<global>","useBrowseShops","useQuery$argument_0.queryFn","data.map$argument_0"],"mappings":"AAA;uBCS;aCG;sBCQ;OD+B;KDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}