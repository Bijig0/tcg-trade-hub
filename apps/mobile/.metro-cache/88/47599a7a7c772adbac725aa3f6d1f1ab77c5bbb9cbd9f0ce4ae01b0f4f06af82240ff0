{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":45,"index":195}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  /**\n   * Hook that undoes a meetup completion via atomic Postgres RPC.\n   *\n   * Resets the current user's completion flag. Only allowed while the\n   * meetup is still in `confirmed` status (the other party hasn't\n   * completed yet). Once both complete, finalization is irreversible.\n   */\n  var useUncompleteMeetup = () => {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var meetupId = _ref.meetupId;\n          var _yield$supabase$auth$ = yield _libSupabase.supabase.auth.getSession(),\n            session = _yield$supabase$auth$.data.session;\n          var userId = session?.user?.id;\n          if (!userId) throw new Error('Not authenticated');\n          var _yield$supabase$rpc = yield _libSupabase.supabase.rpc('uncomplete_meetup_v1', {\n              p_meetup_id: meetupId,\n              p_user_id: userId\n            }),\n            data = _yield$supabase$rpc.data,\n            error = _yield$supabase$rpc.error;\n          if (error) throw error;\n          if (!data) throw new Error('No response from uncomplete_meetup_v1');\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: data => {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.meetupKeys.detail(data.meetup_id)\n        });\n      },\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to undo completion');\n      }\n    });\n  };\n  _s(useUncompleteMeetup, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n  var _default = useUncompleteMeetup;\n});","lineCount":74,"map":[[13,2,54,0,"Object"],[13,8,54,0],[13,9,54,0,"defineProperty"],[13,23,54,0],[13,24,54,0,"exports"],[13,31,54,0],[14,4,54,0,"enumerable"],[14,14,54,0],[15,4,54,0,"get"],[15,7,54,0],[15,18,54,0,"get"],[15,19,54,0],[16,6,54,0],[16,13,54,0,"_default"],[16,21,54,0],[17,4,54,0],[18,2,54,0],[19,2,54,35],[19,6,54,35,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,54,35],[19,45,54,35,"require"],[19,52,54,35],[19,53,54,35,"_dependencyMap"],[19,67,54,35],[20,2,54,35],[20,6,54,35,"_asyncToGenerator"],[20,23,54,35],[20,26,54,35,"_interopDefault"],[20,41,54,35],[20,42,54,35,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,54,35],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_queryKeys"],[24,16,4,0],[24,19,4,0,"require"],[24,26,4,0],[24,27,4,0,"_dependencyMap"],[24,41,4,0],[25,2,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,2,22,0],[32,6,22,6,"useUncompleteMeetup"],[32,25,22,25],[32,28,22,28,"useUncompleteMeetup"],[32,29,22,28],[32,34,22,34],[33,4,22,34,"_s"],[33,6,22,34],[34,4,23,2],[34,8,23,8,"queryClient"],[34,19,23,19],[34,22,23,22],[34,26,23,22,"useQueryClient"],[34,45,23,36],[34,46,23,36,"useQueryClient"],[34,60,23,36],[34,62,23,37],[34,63,23,38],[35,4,25,2],[35,11,25,9],[35,15,25,9,"useMutation"],[35,34,25,20],[35,35,25,20,"useMutation"],[35,46,25,20],[35,48,25,21],[36,6,26,4,"mutationFn"],[36,16,26,14],[37,8,26,14],[37,12,26,14,"_ref2"],[37,17,26,14],[37,24,26,14,"_asyncToGenerator"],[37,41,26,14],[37,42,26,14,"default"],[37,49,26,14],[37,51,26,16],[37,62,26,16,"_ref"],[37,66,26,16],[37,68,26,64],[38,10,26,64],[38,14,26,25,"meetupId"],[38,22,26,33],[38,25,26,33,"_ref"],[38,29,26,33],[38,30,26,25,"meetupId"],[38,38,26,33],[39,10,27,6],[39,14,27,6,"_yield$supabase$auth$"],[39,35,27,6],[39,44,29,16,"supabase"],[39,56,29,24],[39,57,29,24,"supabase"],[39,65,29,24],[39,66,29,25,"auth"],[39,70,29,29],[39,71,29,30,"getSession"],[39,81,29,40],[39,82,29,41],[39,83,29,42],[40,12,28,16,"session"],[40,19,28,23],[40,22,28,23,"_yield$supabase$auth$"],[40,43,28,23],[40,44,28,8,"data"],[40,48,28,12],[40,49,28,16,"session"],[40,56,28,23],[41,10,30,6],[41,14,30,12,"userId"],[41,20,30,18],[41,23,30,21,"session"],[41,30,30,28],[41,32,30,30,"user"],[41,36,30,34],[41,38,30,36,"id"],[41,40,30,38],[42,10,32,6],[42,14,32,10],[42,15,32,11,"userId"],[42,21,32,17],[42,23,32,19],[42,29,32,25],[42,33,32,29,"Error"],[42,38,32,34],[42,39,32,35],[42,58,32,54],[42,59,32,55],[43,10,34,6],[43,14,34,6,"_yield$supabase$rpc"],[43,33,34,6],[43,42,34,36,"supabase"],[43,54,34,44],[43,55,34,44,"supabase"],[43,63,34,44],[43,64,34,45,"rpc"],[43,67,34,48],[43,68,34,49],[43,90,34,71],[43,92,34,73],[44,14,35,8,"p_meetup_id"],[44,25,35,19],[44,27,35,21,"meetupId"],[44,35,35,29],[45,14,36,8,"p_user_id"],[45,23,36,17],[45,25,36,19,"userId"],[46,12,37,6],[46,13,37,7],[46,14,37,8],[47,12,34,14,"data"],[47,16,34,18],[47,19,34,18,"_yield$supabase$rpc"],[47,38,34,18],[47,39,34,14,"data"],[47,43,34,18],[48,12,34,20,"error"],[48,17,34,25],[48,20,34,25,"_yield$supabase$rpc"],[48,39,34,25],[48,40,34,20,"error"],[48,45,34,25],[49,10,39,6],[49,14,39,10,"error"],[49,19,39,15],[49,21,39,17],[49,27,39,23,"error"],[49,32,39,28],[50,10,40,6],[50,14,40,10],[50,15,40,11,"data"],[50,19,40,15],[50,21,40,17],[50,27,40,23],[50,31,40,27,"Error"],[50,36,40,32],[50,37,40,33],[50,76,40,72],[50,77,40,73],[51,10,42,6],[51,17,42,13,"data"],[51,21,42,17],[52,8,43,4],[52,9,43,5],[53,8,43,5],[53,24,26,4,"mutationFn"],[53,34,26,14,"mutationFn"],[53,35,26,14,"_x"],[53,37,26,14],[54,10,26,14],[54,17,26,14,"_ref2"],[54,22,26,14],[54,23,26,14,"apply"],[54,28,26,14],[54,35,26,14,"arguments"],[54,44,26,14],[55,8,26,14],[56,6,26,14],[56,9,43,5],[57,6,44,4,"onSuccess"],[57,15,44,13],[57,17,44,16,"data"],[57,21,44,20],[57,25,44,25],[58,8,45,6,"queryClient"],[58,19,45,17],[58,20,45,18,"invalidateQueries"],[58,37,45,35],[58,38,45,36],[59,10,45,38,"queryKey"],[59,18,45,46],[59,20,45,48,"meetupKeys"],[59,30,45,58],[59,31,45,58,"meetupKeys"],[59,41,45,58],[59,42,45,59,"all"],[60,8,45,63],[60,9,45,64],[60,10,45,65],[61,8,46,6,"queryClient"],[61,19,46,17],[61,20,46,18,"invalidateQueries"],[61,37,46,35],[61,38,46,36],[62,10,46,38,"queryKey"],[62,18,46,46],[62,20,46,48,"meetupKeys"],[62,30,46,58],[62,31,46,58,"meetupKeys"],[62,41,46,58],[62,42,46,59,"detail"],[62,48,46,65],[62,49,46,66,"data"],[62,53,46,70],[62,54,46,71,"meetup_id"],[62,63,46,80],[63,8,46,82],[63,9,46,83],[63,10,46,84],[64,6,47,4],[64,7,47,5],[65,6,48,4,"onError"],[65,13,48,11],[65,15,48,14,"error"],[65,20,48,26],[65,24,48,31],[66,8,49,6,"Alert"],[66,20,49,11],[66,21,49,11,"Alert"],[66,26,49,11],[66,27,49,12,"alert"],[66,32,49,17],[66,33,49,18],[66,40,49,25],[66,42,49,27,"error"],[66,47,49,32],[66,48,49,33,"message"],[66,55,49,40],[66,59,49,44],[66,86,49,71],[66,87,49,72],[67,6,50,4],[68,4,51,2],[68,5,51,3],[68,6,51,4],[69,2,52,0],[69,3,52,1],[70,2,52,2,"_s"],[70,4,52,2],[70,5,22,6,"useUncompleteMeetup"],[70,24,22,25],[71,4,22,25],[71,12,23,22,"useQueryClient"],[71,31,23,36],[71,32,23,36,"useQueryClient"],[71,46,23,36],[71,48,25,9,"useMutation"],[71,67,25,20],[71,68,25,20,"useMutation"],[71,79,25,20],[72,2,25,20],[73,2,54,0],[73,6,54,0,"_default"],[73,14,54,0],[73,17,54,15,"useUncompleteMeetup"],[73,36,54,34],[74,0,54,35],[74,3]],"functionMap":{"names":["<global>","useUncompleteMeetup","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;4BCqB;gBCI;KDiB;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}