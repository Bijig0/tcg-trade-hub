{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":37,"index":106}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":42,"index":149}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":49,"index":199}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":46,"index":246}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _queryKeys = require(_dependencyMap[5], \"../../queryKeys\");\n  /**\n   * Hook that updates the current user's profile.\n   *\n   * On success, invalidates profile queries and calls refreshProfile\n   * from the AuthProvider to keep the auth context in sync.\n   */\n  var useUpdateProfile = () => {\n    _s();\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user,\n      refreshProfile = _useAuth.refreshProfile;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* (params) {\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('users').upsert({\n              id: user.id,\n              email: user.email,\n              display_name: user.email.split('@')[0],\n              ...params\n            }).select().single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n          return data;\n        });\n        return function mutationFn(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      onSuccess: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          queryClient.invalidateQueries({\n            queryKey: _queryKeys.profileKeys.all\n          });\n          yield refreshProfile();\n        });\n        return function onSuccess() {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onError: error => {\n        _reactNative.Alert.alert('Error', error.message ?? 'Failed to update profile');\n      }\n    });\n  };\n  _s(useUpdateProfile, \"1RA2TfO07ohqe1tJlPHxB+fYK4M=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _contextAuthProvider.useAuth, _tanstackReactQuery.useMutation];\n  });\n  var _default = useUpdateProfile;\n});","lineCount":77,"map":[[13,2,50,0,"Object"],[13,8,50,0],[13,9,50,0,"defineProperty"],[13,23,50,0],[13,24,50,0,"exports"],[13,31,50,0],[14,4,50,0,"enumerable"],[14,14,50,0],[15,4,50,0,"get"],[15,7,50,0],[15,18,50,0,"get"],[15,19,50,0],[16,6,50,0],[16,13,50,0,"_default"],[16,21,50,0],[17,4,50,0],[18,2,50,0],[19,2,50,32],[19,6,50,32,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,50,32],[19,45,50,32,"require"],[19,52,50,32],[19,53,50,32,"_dependencyMap"],[19,67,50,32],[20,2,50,32],[20,6,50,32,"_asyncToGenerator"],[20,23,50,32],[20,26,50,32,"_interopDefault"],[20,41,50,32],[20,42,50,32,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,50,32],[21,2,1,0],[21,6,1,0,"_tanstackReactQuery"],[21,25,1,0],[21,28,1,0,"require"],[21,35,1,0],[21,36,1,0,"_dependencyMap"],[21,50,1,0],[22,2,2,0],[22,6,2,0,"_reactNative"],[22,18,2,0],[22,21,2,0,"require"],[22,28,2,0],[22,29,2,0,"_dependencyMap"],[22,43,2,0],[23,2,3,0],[23,6,3,0,"_libSupabase"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_contextAuthProvider"],[24,26,4,0],[24,29,4,0,"require"],[24,36,4,0],[24,37,4,0,"_dependencyMap"],[24,51,4,0],[25,2,5,0],[25,6,5,0,"_queryKeys"],[25,16,5,0],[25,19,5,0,"require"],[25,26,5,0],[25,27,5,0,"_dependencyMap"],[25,41,5,0],[26,2,17,0],[27,0,18,0],[28,0,19,0],[29,0,20,0],[30,0,21,0],[31,0,22,0],[32,2,23,0],[32,6,23,6,"useUpdateProfile"],[32,22,23,22],[32,25,23,25,"useUpdateProfile"],[32,26,23,25],[32,31,23,31],[33,4,23,31,"_s"],[33,6,23,31],[34,4,24,2],[34,8,24,8,"queryClient"],[34,19,24,19],[34,22,24,22],[34,26,24,22,"useQueryClient"],[34,45,24,36],[34,46,24,36,"useQueryClient"],[34,60,24,36],[34,62,24,37],[34,63,24,38],[35,4,25,2],[35,8,25,2,"_useAuth"],[35,16,25,2],[35,19,25,35],[35,23,25,35,"useAuth"],[35,43,25,42],[35,44,25,42,"useAuth"],[35,51,25,42],[35,53,25,43],[35,54,25,44],[36,6,25,10,"user"],[36,10,25,14],[36,13,25,14,"_useAuth"],[36,21,25,14],[36,22,25,10,"user"],[36,26,25,14],[37,6,25,16,"refreshProfile"],[37,20,25,30],[37,23,25,30,"_useAuth"],[37,31,25,30],[37,32,25,16,"refreshProfile"],[37,46,25,30],[38,4,27,2],[38,11,27,9],[38,15,27,9,"useMutation"],[38,34,27,20],[38,35,27,20,"useMutation"],[38,46,27,20],[38,48,27,21],[39,6,28,4,"mutationFn"],[39,16,28,14],[40,8,28,14],[40,12,28,14,"_ref"],[40,16,28,14],[40,23,28,14,"_asyncToGenerator"],[40,40,28,14],[40,41,28,14,"default"],[40,48,28,14],[40,50,28,16],[40,61,28,23,"params"],[40,67,28,50],[40,69,28,55],[41,10,29,6],[41,14,29,10],[41,15,29,11,"user"],[41,19,29,15],[41,21,29,17],[41,27,29,23],[41,31,29,27,"Error"],[41,36,29,32],[41,37,29,33],[41,56,29,52],[41,57,29,53],[42,10,31,6],[42,14,31,6,"_yield$supabase$from$"],[42,35,31,6],[42,44,31,36,"supabase"],[42,56,31,44],[42,57,31,44,"supabase"],[42,65,31,44],[42,66,32,9,"from"],[42,70,32,13],[42,71,32,14],[42,78,32,21],[42,79,32,22],[42,80,33,9,"upsert"],[42,86,33,15],[42,87,33,16],[43,14,33,18,"id"],[43,16,33,20],[43,18,33,22,"user"],[43,22,33,26],[43,23,33,27,"id"],[43,25,33,29],[44,14,33,31,"email"],[44,19,33,36],[44,21,33,38,"user"],[44,25,33,42],[44,26,33,43,"email"],[44,31,33,49],[45,14,33,51,"display_name"],[45,26,33,63],[45,28,33,65,"user"],[45,32,33,69],[45,33,33,70,"email"],[45,38,33,75],[45,39,33,77,"split"],[45,44,33,82],[45,45,33,83],[45,48,33,86],[45,49,33,87],[45,50,33,88],[45,51,33,89],[45,52,33,90],[46,14,33,92],[46,17,33,95,"params"],[47,12,33,102],[47,13,33,103],[47,14,33,104],[47,15,34,9,"select"],[47,21,34,15],[47,22,34,16],[47,23,34,17],[47,24,35,9,"single"],[47,30,35,15],[47,31,35,16],[47,32,35,17],[48,12,31,14,"data"],[48,16,31,18],[48,19,31,18,"_yield$supabase$from$"],[48,40,31,18],[48,41,31,14,"data"],[48,45,31,18],[49,12,31,20,"error"],[49,17,31,25],[49,20,31,25,"_yield$supabase$from$"],[49,41,31,25],[49,42,31,20,"error"],[49,47,31,25],[50,10,37,6],[50,14,37,10,"error"],[50,19,37,15],[50,21,37,17],[50,27,37,23,"error"],[50,32,37,28],[51,10,38,6],[51,17,38,13,"data"],[51,21,38,17],[52,8,39,4],[52,9,39,5],[53,8,39,5],[53,24,28,4,"mutationFn"],[53,34,28,14,"mutationFn"],[53,35,28,14,"_x"],[53,37,28,14],[54,10,28,14],[54,17,28,14,"_ref"],[54,21,28,14],[54,22,28,14,"apply"],[54,27,28,14],[54,34,28,14,"arguments"],[54,43,28,14],[55,8,28,14],[56,6,28,14],[56,9,39,5],[57,6,40,4,"onSuccess"],[57,15,40,13],[58,8,40,13],[58,12,40,13,"_ref2"],[58,17,40,13],[58,24,40,13,"_asyncToGenerator"],[58,41,40,13],[58,42,40,13,"default"],[58,49,40,13],[58,51,40,15],[58,64,40,27],[59,10,41,6,"queryClient"],[59,21,41,17],[59,22,41,18,"invalidateQueries"],[59,39,41,35],[59,40,41,36],[60,12,41,38,"queryKey"],[60,20,41,46],[60,22,41,48,"profileKeys"],[60,32,41,59],[60,33,41,59,"profileKeys"],[60,44,41,59],[60,45,41,60,"all"],[61,10,41,64],[61,11,41,65],[61,12,41,66],[62,10,42,6],[62,16,42,12,"refreshProfile"],[62,30,42,26],[62,31,42,27],[62,32,42,28],[63,8,43,4],[63,9,43,5],[64,8,43,5],[64,24,40,4,"onSuccess"],[64,33,40,13,"onSuccess"],[64,34,40,13],[65,10,40,13],[65,17,40,13,"_ref2"],[65,22,40,13],[65,23,40,13,"apply"],[65,28,40,13],[65,35,40,13,"arguments"],[65,44,40,13],[66,8,40,13],[67,6,40,13],[67,9,43,5],[68,6,44,4,"onError"],[68,13,44,11],[68,15,44,14,"error"],[68,20,44,26],[68,24,44,31],[69,8,45,6,"Alert"],[69,20,45,11],[69,21,45,11,"Alert"],[69,26,45,11],[69,27,45,12,"alert"],[69,32,45,17],[69,33,45,18],[69,40,45,25],[69,42,45,27,"error"],[69,47,45,32],[69,48,45,33,"message"],[69,55,45,40],[69,59,45,44],[69,85,45,70],[69,86,45,71],[70,6,46,4],[71,4,47,2],[71,5,47,3],[71,6,47,4],[72,2,48,0],[72,3,48,1],[73,2,48,2,"_s"],[73,4,48,2],[73,5,23,6,"useUpdateProfile"],[73,21,23,22],[74,4,23,22],[74,12,24,22,"useQueryClient"],[74,31,24,36],[74,32,24,36,"useQueryClient"],[74,46,24,36],[74,48,25,35,"useAuth"],[74,68,25,42],[74,69,25,42,"useAuth"],[74,76,25,42],[74,78,27,9,"useMutation"],[74,97,27,20],[74,98,27,20,"useMutation"],[74,109,27,20],[75,2,27,20],[76,2,50,0],[76,6,50,0,"_default"],[76,14,50,0],[76,17,50,15,"useUpdateProfile"],[76,33,50,31],[77,0,50,32],[77,3]],"functionMap":{"names":["<global>","useUpdateProfile","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;yBCsB;gBCK;KDW;eEC;KFG;aGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}