{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":42,"index":111}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":112},"end":{"line":3,"column":46,"index":158}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}},{"name":"../../../feed/queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":159},"end":{"line":4,"column":51,"index":210}}],"key":"fOhRZkI3VX68oiFPDy9rlJOS+w8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _queryKeys = require(_dependencyMap[3]);\n  var _feedQueryKeys = require(_dependencyMap[4]);\n  /**\n   * Mutation hook that updates a listing's location and location_name.\n   * Invalidates listing detail and feed queries on success.\n   */\n  var useUpdateListingLocation = () => {\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var listingId = _ref.listingId,\n            coords = _ref.coords,\n            locationName = _ref.locationName;\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('listings').update({\n              location: `POINT(${coords.longitude} ${coords.latitude})`,\n              location_name: locationName\n            }).eq('id', listingId),\n            error = _yield$supabase$from$.error;\n          if (error) throw error;\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: _queryKeys.listingKeys.all\n        });\n        queryClient.invalidateQueries({\n          queryKey: _feedQueryKeys.feedKeys.lists()\n        });\n      }\n    });\n  };\n  var _default = useUpdateListingLocation;\n});","lineCount":58,"map":[[12,2,38,0,"Object"],[12,8,38,0],[12,9,38,0,"defineProperty"],[12,23,38,0],[12,24,38,0,"exports"],[12,31,38,0],[13,4,38,0,"enumerable"],[13,14,38,0],[14,4,38,0,"get"],[14,7,38,0],[14,18,38,0,"get"],[14,19,38,0],[15,6,38,0],[15,13,38,0,"_default"],[15,21,38,0],[16,4,38,0],[17,2,38,0],[18,2,38,40],[18,6,38,40,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,38,40],[18,45,38,40,"require"],[18,52,38,40],[18,53,38,40,"_dependencyMap"],[18,67,38,40],[19,2,38,40],[19,6,38,40,"_asyncToGenerator"],[19,23,38,40],[19,26,38,40,"_interopDefault"],[19,41,38,40],[19,42,38,40,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,38,40],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_queryKeys"],[22,16,3,0],[22,19,3,0,"require"],[22,26,3,0],[22,27,3,0,"_dependencyMap"],[22,41,3,0],[23,2,4,0],[23,6,4,0,"_feedQueryKeys"],[23,20,4,0],[23,23,4,0,"require"],[23,30,4,0],[23,31,4,0,"_dependencyMap"],[23,45,4,0],[24,2,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,2,16,0],[28,6,16,6,"useUpdateListingLocation"],[28,30,16,30],[28,33,16,33,"useUpdateListingLocation"],[28,34,16,33],[28,39,16,39],[29,4,17,2],[29,8,17,8,"queryClient"],[29,19,17,19],[29,22,17,22],[29,26,17,22,"useQueryClient"],[29,45,17,36],[29,46,17,36,"useQueryClient"],[29,60,17,36],[29,62,17,37],[29,63,17,38],[30,4,19,2],[30,11,19,9],[30,15,19,9,"useMutation"],[30,34,19,20],[30,35,19,20,"useMutation"],[30,46,19,20],[30,48,19,21],[31,6,20,4,"mutationFn"],[31,16,20,14],[32,8,20,14],[32,12,20,14,"_ref2"],[32,17,20,14],[32,24,20,14,"_asyncToGenerator"],[32,41,20,14],[32,42,20,14,"default"],[32,49,20,14],[32,51,20,16],[32,62,20,16,"_ref"],[32,66,20,16],[32,68,20,84],[33,10,20,84],[33,14,20,25,"listingId"],[33,23,20,34],[33,26,20,34,"_ref"],[33,30,20,34],[33,31,20,25,"listingId"],[33,40,20,34],[34,12,20,36,"coords"],[34,18,20,42],[34,21,20,42,"_ref"],[34,25,20,42],[34,26,20,36,"coords"],[34,32,20,42],[35,12,20,44,"locationName"],[35,24,20,56],[35,27,20,56,"_ref"],[35,31,20,56],[35,32,20,44,"locationName"],[35,44,20,56],[36,10,21,6],[36,14,21,6,"_yield$supabase$from$"],[36,35,21,6],[36,44,21,30,"supabase"],[36,56,21,38],[36,57,21,38,"supabase"],[36,65,21,38],[36,66,22,9,"from"],[36,70,22,13],[36,71,22,14],[36,81,22,24],[36,82,22,25],[36,83,23,9,"update"],[36,89,23,15],[36,90,23,16],[37,14,24,10,"location"],[37,22,24,18],[37,24,24,20],[37,33,24,29,"coords"],[37,39,24,35],[37,40,24,36,"longitude"],[37,49,24,45],[37,53,24,49,"coords"],[37,59,24,55],[37,60,24,56,"latitude"],[37,68,24,64],[37,71,24,67],[38,14,25,10,"location_name"],[38,27,25,23],[38,29,25,25,"locationName"],[39,12,26,8],[39,13,26,9],[39,14,26,10],[39,15,27,9,"eq"],[39,17,27,11],[39,18,27,12],[39,22,27,16],[39,24,27,18,"listingId"],[39,33,27,27],[39,34,27,28],[40,12,21,14,"error"],[40,17,21,19],[40,20,21,19,"_yield$supabase$from$"],[40,41,21,19],[40,42,21,14,"error"],[40,47,21,19],[41,10,29,6],[41,14,29,10,"error"],[41,19,29,15],[41,21,29,17],[41,27,29,23,"error"],[41,32,29,28],[42,8,30,4],[42,9,30,5],[43,8,30,5],[43,24,20,4,"mutationFn"],[43,34,20,14,"mutationFn"],[43,35,20,14,"_x"],[43,37,20,14],[44,10,20,14],[44,17,20,14,"_ref2"],[44,22,20,14],[44,23,20,14,"apply"],[44,28,20,14],[44,35,20,14,"arguments"],[44,44,20,14],[45,8,20,14],[46,6,20,14],[46,9,30,5],[47,6,31,4,"onSuccess"],[47,15,31,13],[47,17,31,15,"onSuccess"],[47,18,31,15],[47,23,31,21],[48,8,32,6,"queryClient"],[48,19,32,17],[48,20,32,18,"invalidateQueries"],[48,37,32,35],[48,38,32,36],[49,10,32,38,"queryKey"],[49,18,32,46],[49,20,32,48,"listingKeys"],[49,30,32,59],[49,31,32,59,"listingKeys"],[49,42,32,59],[49,43,32,60,"all"],[50,8,32,64],[50,9,32,65],[50,10,32,66],[51,8,33,6,"queryClient"],[51,19,33,17],[51,20,33,18,"invalidateQueries"],[51,37,33,35],[51,38,33,36],[52,10,33,38,"queryKey"],[52,18,33,46],[52,20,33,48,"feedKeys"],[52,34,33,56],[52,35,33,56,"feedKeys"],[52,43,33,56],[52,44,33,57,"lists"],[52,49,33,62],[52,50,33,63],[53,8,33,65],[53,9,33,66],[53,10,33,67],[54,6,34,4],[55,4,35,2],[55,5,35,3],[55,6,35,4],[56,2,36,0],[56,3,36,1],[57,2,38,0],[57,6,38,0,"_default"],[57,14,38,0],[57,17,38,15,"useUpdateListingLocation"],[57,41,38,39],[58,0,38,40],[58,3]],"functionMap":{"names":["<global>","useUpdateListingLocation","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess"],"mappings":"AAA;iCCe;gBCI;KDU;eEC;KFG;CDE"},"hasCjsExports":false},"type":"js/module"}]}