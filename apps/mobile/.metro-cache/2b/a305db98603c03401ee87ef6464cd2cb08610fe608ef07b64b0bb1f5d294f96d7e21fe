{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":49,"index":142}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":143},"end":{"line":4,"column":43,"index":186}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"fetchLikedListings\", {\n    enumerable: true,\n    get: function () {\n      return fetchLikedListings;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[2], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[3], \"@/context/AuthProvider\");\n  var _queryKeys = require(_dependencyMap[4], \"../../queryKeys\");\n  /**\n   * Fetches listings a user has swiped \"like\" on.\n   * Extracted as a standalone function so both the hook and prefetch use the same queryFn.\n   */\n  var fetchLikedListings = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (userId) {\n      // 1. Get liked listing IDs\n      var _yield$supabase$from$ = yield _libSupabase.supabase.from('swipes').select('listing_id, created_at').eq('user_id', userId).eq('direction', 'like').order('created_at', {\n          ascending: false\n        }),\n        swipes = _yield$supabase$from$.data,\n        swipeError = _yield$supabase$from$.error;\n      if (swipeError) throw swipeError;\n      if (!swipes || swipes.length === 0) return [];\n      var likedIds = swipes.map(function (s) {\n        return s.listing_id;\n      });\n\n      // 2. Fetch the actual listings\n      var _yield$supabase$from$2 = yield _libSupabase.supabase.from('listings').select(`\n      *,\n      listing_items (*),\n      users!inner (\n        id,\n        display_name,\n        avatar_url,\n        location,\n        rating_score,\n        total_trades\n      )\n    `).in('id', likedIds).eq('status', 'active'),\n        rawListings = _yield$supabase$from$2.data,\n        listingError = _yield$supabase$from$2.error;\n      if (listingError) throw listingError;\n      if (!rawListings) return [];\n\n      // 3. Transform to ListingWithDistance and preserve swipe order\n      var listingMap = new Map();\n      for (var listing of rawListings) {\n        var _listing$listing_item, _userProfile$rating_s, _userProfile$total_tr;\n        var userProfile = listing.users;\n        var items = (_listing$listing_item = listing.listing_items) != null ? _listing$listing_item : [];\n        listingMap.set(listing.id, {\n          id: listing.id,\n          user_id: listing.user_id,\n          type: listing.type,\n          tcg: listing.tcg,\n          title: listing.title,\n          cash_amount: listing.cash_amount,\n          total_value: listing.total_value,\n          description: listing.description,\n          photos: listing.photos,\n          status: listing.status,\n          created_at: listing.created_at,\n          updated_at: listing.updated_at,\n          distance_km: 0,\n          owner: {\n            display_name: userProfile.display_name,\n            avatar_url: userProfile.avatar_url,\n            rating_score: (_userProfile$rating_s = userProfile.rating_score) != null ? _userProfile$rating_s : 0,\n            total_trades: (_userProfile$total_tr = userProfile.total_trades) != null ? _userProfile$total_tr : 0\n          },\n          items: items,\n          offer_count: 0\n        });\n      }\n\n      // Return in swipe order (most recent first), filtering out inactive/deleted\n      return likedIds.map(function (id) {\n        return listingMap.get(id);\n      }).filter(function (l) {\n        return l !== undefined;\n      });\n    });\n    return function fetchLikedListings(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\n   * Fetches listings the current user has swiped \"like\" on.\n   *\n   * Queries the swipes table for likes, then fetches the corresponding active\n   * listings with items and owner profiles. Returns most-recently-liked first.\n   */\n  var useLikedListings = function useLikedListings() {\n    _s();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.feedKeys.liked(),\n      queryFn: function queryFn() {\n        return fetchLikedListings(user.id);\n      },\n      enabled: !!user\n    });\n  };\n  _s(useLikedListings, \"feBfegY2LWvVkHAo3/+H6/HJ9O4=\", false, function () {\n    return [_contextAuthProvider.useAuth, _tanstackReactQuery.useQuery];\n  });\n  var _default = useLikedListings;\n});","lineCount":132,"map":[[13,2,108,0,"Object"],[13,8,108,0],[13,9,108,0,"defineProperty"],[13,23,108,0],[13,24,108,0,"exports"],[13,31,108,0],[14,4,108,0,"enumerable"],[14,14,108,0],[15,4,108,0,"get"],[15,7,108,0],[15,18,108,0,"get"],[15,19,108,0],[16,6,108,0],[16,13,108,0,"_default"],[16,21,108,0],[17,4,108,0],[18,2,108,0],[19,2,11,0,"Object"],[19,8,11,0],[19,9,11,0,"defineProperty"],[19,23,11,0],[19,24,11,0,"exports"],[19,31,11,0],[20,4,11,0,"enumerable"],[20,14,11,0],[21,4,11,0,"get"],[21,7,11,0],[21,18,11,0,"get"],[21,19,11,0],[22,6,11,0],[22,13,11,0,"fetchLikedListings"],[22,31,11,0],[23,4,11,0],[24,2,11,0],[25,2,90,2],[25,6,90,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,42,90,2],[25,45,90,2,"require"],[25,52,90,2],[25,53,90,2,"_dependencyMap"],[25,67,90,2],[26,2,90,2],[26,6,90,2,"_asyncToGenerator"],[26,23,90,2],[26,26,90,2,"_interopDefault"],[26,41,90,2],[26,42,90,2,"_babelRuntimeHelpersAsyncToGenerator"],[26,78,90,2],[27,2,1,0],[27,6,1,0,"_tanstackReactQuery"],[27,25,1,0],[27,28,1,0,"require"],[27,35,1,0],[27,36,1,0,"_dependencyMap"],[27,50,1,0],[28,2,2,0],[28,6,2,0,"_libSupabase"],[28,18,2,0],[28,21,2,0,"require"],[28,28,2,0],[28,29,2,0,"_dependencyMap"],[28,43,2,0],[29,2,3,0],[29,6,3,0,"_contextAuthProvider"],[29,26,3,0],[29,29,3,0,"require"],[29,36,3,0],[29,37,3,0,"_dependencyMap"],[29,51,3,0],[30,2,4,0],[30,6,4,0,"_queryKeys"],[30,16,4,0],[30,19,4,0,"require"],[30,26,4,0],[30,27,4,0,"_dependencyMap"],[30,41,4,0],[31,2,7,0],[32,0,8,0],[33,0,9,0],[34,0,10,0],[35,2,11,7],[35,6,11,13,"fetchLikedListings"],[35,24,11,31],[36,4,11,31],[36,8,11,31,"_ref"],[36,12,11,31],[36,19,11,31,"_asyncToGenerator"],[36,36,11,31],[36,37,11,31,"default"],[36,44,11,31],[36,46,11,34],[36,57,11,41,"userId"],[36,63,11,55],[36,65,11,60],[37,6,12,2],[38,6,13,2],[38,10,13,2,"_yield$supabase$from$"],[38,31,13,2],[38,40,13,52,"supabase"],[38,52,13,60],[38,53,13,60,"supabase"],[38,61,13,60],[38,62,14,5,"from"],[38,66,14,9],[38,67,14,10],[38,75,14,18],[38,76,14,19],[38,77,15,5,"select"],[38,83,15,11],[38,84,15,12],[38,108,15,36],[38,109,15,37],[38,110,16,5,"eq"],[38,112,16,7],[38,113,16,8],[38,122,16,17],[38,124,16,19,"userId"],[38,130,16,25],[38,131,16,26],[38,132,17,5,"eq"],[38,134,17,7],[38,135,17,8],[38,146,17,19],[38,148,17,21],[38,154,17,27],[38,155,17,28],[38,156,18,5,"order"],[38,161,18,10],[38,162,18,11],[38,174,18,23],[38,176,18,25],[39,10,18,27,"ascending"],[39,19,18,36],[39,21,18,38],[40,8,18,44],[40,9,18,45],[40,10,18,46],[41,8,13,16,"swipes"],[41,14,13,22],[41,17,13,22,"_yield$supabase$from$"],[41,38,13,22],[41,39,13,10,"data"],[41,43,13,14],[42,8,13,31,"swipeError"],[42,18,13,41],[42,21,13,41,"_yield$supabase$from$"],[42,42,13,41],[42,43,13,24,"error"],[42,48,13,29],[43,6,20,2],[43,10,20,6,"swipeError"],[43,20,20,16],[43,22,20,18],[43,28,20,24,"swipeError"],[43,38,20,34],[44,6,21,2],[44,10,21,6],[44,11,21,7,"swipes"],[44,17,21,13],[44,21,21,17,"swipes"],[44,27,21,23],[44,28,21,24,"length"],[44,34,21,30],[44,39,21,35],[44,40,21,36],[44,42,21,38],[44,49,21,45],[44,51,21,47],[45,6,23,2],[45,10,23,8,"likedIds"],[45,18,23,16],[45,21,23,19,"swipes"],[45,27,23,25],[45,28,23,26,"map"],[45,31,23,29],[45,32,23,30],[45,42,23,31,"s"],[45,43,23,32],[46,8,23,32],[46,15,23,37,"s"],[46,16,23,38],[46,17,23,39,"listing_id"],[46,27,23,49],[47,6,23,49],[47,8,23,50],[49,6,25,2],[50,6,26,2],[50,10,26,2,"_yield$supabase$from$2"],[50,32,26,2],[50,41,26,59,"supabase"],[50,53,26,67],[50,54,26,67,"supabase"],[50,62,26,67],[50,63,27,5,"from"],[50,67,27,9],[50,68,27,10],[50,78,27,20],[50,79,27,21],[50,80,28,5,"select"],[50,86,28,11],[50,87,28,12],[51,0,29,0],[52,0,30,0],[53,0,31,0],[54,0,32,0],[55,0,33,0],[56,0,34,0],[57,0,35,0],[58,0,36,0],[59,0,37,0],[60,0,38,0],[61,0,39,0],[61,5,39,5],[61,6,39,6],[61,7,40,5,"in"],[61,9,40,7],[61,10,40,8],[61,14,40,12],[61,16,40,14,"likedIds"],[61,24,40,22],[61,25,40,23],[61,26,41,5,"eq"],[61,28,41,7],[61,29,41,8],[61,37,41,16],[61,39,41,18],[61,47,41,26],[61,48,41,27],[62,8,26,16,"rawListings"],[62,19,26,27],[62,22,26,27,"_yield$supabase$from$2"],[62,44,26,27],[62,45,26,10,"data"],[62,49,26,14],[63,8,26,36,"listingError"],[63,20,26,48],[63,23,26,48,"_yield$supabase$from$2"],[63,45,26,48],[63,46,26,29,"error"],[63,51,26,34],[64,6,43,2],[64,10,43,6,"listingError"],[64,22,43,18],[64,24,43,20],[64,30,43,26,"listingError"],[64,42,43,38],[65,6,44,2],[65,10,44,6],[65,11,44,7,"rawListings"],[65,22,44,18],[65,24,44,20],[65,31,44,27],[65,33,44,29],[67,6,46,2],[68,6,47,2],[68,10,47,8,"listingMap"],[68,20,47,18],[68,23,47,21],[68,27,47,25,"Map"],[68,30,47,28],[68,31,47,58],[68,32,47,59],[69,6,49,2],[69,11,49,7],[69,15,49,13,"listing"],[69,22,49,20],[69,26,49,24,"rawListings"],[69,37,49,35],[69,39,49,37],[70,8,49,37],[70,12,49,37,"_listing$listing_item"],[70,33,49,37],[70,35,49,37,"_userProfile$rating_s"],[70,56,49,37],[70,58,49,37,"_userProfile$total_tr"],[70,79,49,37],[71,8,50,4],[71,12,50,10,"userProfile"],[71,23,50,21],[71,26,50,24,"listing"],[71,33,50,31],[71,34,50,32,"users"],[71,39,57,5],[72,8,59,4],[72,12,59,10,"items"],[72,17,59,15],[72,21,59,15,"_listing$listing_item"],[72,42,59,15],[72,45,59,19,"listing"],[72,52,59,26],[72,53,59,27,"listing_items"],[72,66,59,40],[72,78,59,40,"_listing$listing_item"],[72,99,59,40],[72,102,59,44],[72,104,59,90],[73,8,61,4,"listingMap"],[73,18,61,14],[73,19,61,15,"set"],[73,22,61,18],[73,23,61,19,"listing"],[73,30,61,26],[73,31,61,27,"id"],[73,33,61,29],[73,35,61,31],[74,10,62,6,"id"],[74,12,62,8],[74,14,62,10,"listing"],[74,21,62,17],[74,22,62,18,"id"],[74,24,62,20],[75,10,63,6,"user_id"],[75,17,63,13],[75,19,63,15,"listing"],[75,26,63,22],[75,27,63,23,"user_id"],[75,34,63,30],[76,10,64,6,"type"],[76,14,64,10],[76,16,64,12,"listing"],[76,23,64,19],[76,24,64,20,"type"],[76,28,64,24],[77,10,65,6,"tcg"],[77,13,65,9],[77,15,65,11,"listing"],[77,22,65,18],[77,23,65,19,"tcg"],[77,26,65,22],[78,10,66,6,"title"],[78,15,66,11],[78,17,66,13,"listing"],[78,24,66,20],[78,25,66,21,"title"],[78,30,66,26],[79,10,67,6,"cash_amount"],[79,21,67,17],[79,23,67,19,"listing"],[79,30,67,26],[79,31,67,27,"cash_amount"],[79,42,67,38],[80,10,68,6,"total_value"],[80,21,68,17],[80,23,68,19,"listing"],[80,30,68,26],[80,31,68,27,"total_value"],[80,42,68,38],[81,10,69,6,"description"],[81,21,69,17],[81,23,69,19,"listing"],[81,30,69,26],[81,31,69,27,"description"],[81,42,69,38],[82,10,70,6,"photos"],[82,16,70,12],[82,18,70,14,"listing"],[82,25,70,21],[82,26,70,22,"photos"],[82,32,70,28],[83,10,71,6,"status"],[83,16,71,12],[83,18,71,14,"listing"],[83,25,71,21],[83,26,71,22,"status"],[83,32,71,28],[84,10,72,6,"created_at"],[84,20,72,16],[84,22,72,18,"listing"],[84,29,72,25],[84,30,72,26,"created_at"],[84,40,72,36],[85,10,73,6,"updated_at"],[85,20,73,16],[85,22,73,18,"listing"],[85,29,73,25],[85,30,73,26,"updated_at"],[85,40,73,36],[86,10,74,6,"distance_km"],[86,21,74,17],[86,23,74,19],[86,24,74,20],[87,10,75,6,"owner"],[87,15,75,11],[87,17,75,13],[88,12,76,8,"display_name"],[88,24,76,20],[88,26,76,22,"userProfile"],[88,37,76,33],[88,38,76,34,"display_name"],[88,50,76,46],[89,12,77,8,"avatar_url"],[89,22,77,18],[89,24,77,20,"userProfile"],[89,35,77,31],[89,36,77,32,"avatar_url"],[89,46,77,42],[90,12,78,8,"rating_score"],[90,24,78,20],[90,27,78,20,"_userProfile$rating_s"],[90,48,78,20],[90,51,78,22,"userProfile"],[90,62,78,33],[90,63,78,34,"rating_score"],[90,75,78,46],[90,87,78,46,"_userProfile$rating_s"],[90,108,78,46],[90,111,78,50],[90,112,78,51],[91,12,79,8,"total_trades"],[91,24,79,20],[91,27,79,20,"_userProfile$total_tr"],[91,48,79,20],[91,51,79,22,"userProfile"],[91,62,79,33],[91,63,79,34,"total_trades"],[91,75,79,46],[91,87,79,46,"_userProfile$total_tr"],[91,108,79,46],[91,111,79,50],[92,10,80,6],[92,11,80,7],[93,10,81,6,"items"],[93,15,81,11],[93,17,81,6,"items"],[93,22,81,11],[94,10,82,6,"offer_count"],[94,21,82,17],[94,23,82,19],[95,8,83,4],[95,9,83,5],[95,10,83,6],[96,6,84,2],[98,6,86,2],[99,6,87,2],[99,13,87,9,"likedIds"],[99,21,87,17],[99,22,88,5,"map"],[99,25,88,8],[99,26,88,9],[99,36,88,10,"id"],[99,38,88,12],[100,8,88,12],[100,15,88,17,"listingMap"],[100,25,88,27],[100,26,88,28,"get"],[100,29,88,31],[100,30,88,32,"id"],[100,32,88,34],[100,33,88,35],[101,6,88,35],[101,8,88,36],[101,9,89,5,"filter"],[101,15,89,11],[101,16,89,12],[101,26,89,13,"l"],[101,27,89,14],[102,8,89,14],[102,15,89,45,"l"],[102,16,89,46],[102,21,89,51,"undefined"],[102,30,89,60],[103,6,89,60],[103,8,89,61],[104,4,90,0],[104,5,90,1],[105,4,90,1],[105,20,11,13,"fetchLikedListings"],[105,38,11,31,"fetchLikedListings"],[105,39,11,31,"_x"],[105,41,11,31],[106,6,11,31],[106,13,11,31,"_ref"],[106,17,11,31],[106,18,11,31,"apply"],[106,23,11,31],[106,30,11,31,"arguments"],[106,39,11,31],[107,4,11,31],[108,2,11,31],[108,5,90,1],[110,2,92,0],[111,0,93,0],[112,0,94,0],[113,0,95,0],[114,0,96,0],[115,0,97,0],[116,2,98,0],[116,6,98,6,"useLikedListings"],[116,22,98,22],[116,25,98,25],[116,34,98,6,"useLikedListings"],[116,50,98,22,"useLikedListings"],[116,51,98,22],[116,53,98,31],[117,4,98,31,"_s"],[117,6,98,31],[118,4,99,2],[118,8,99,2,"_useAuth"],[118,16,99,2],[118,19,99,19],[118,23,99,19,"useAuth"],[118,43,99,26],[118,44,99,26,"useAuth"],[118,51,99,26],[118,53,99,27],[118,54,99,28],[119,6,99,10,"user"],[119,10,99,14],[119,13,99,14,"_useAuth"],[119,21,99,14],[119,22,99,10,"user"],[119,26,99,14],[120,4,101,2],[120,11,101,9],[120,15,101,9,"useQuery"],[120,34,101,17],[120,35,101,17,"useQuery"],[120,43,101,17],[120,45,101,48],[121,6,102,4,"queryKey"],[121,14,102,12],[121,16,102,14,"feedKeys"],[121,26,102,22],[121,27,102,22,"feedKeys"],[121,35,102,22],[121,36,102,23,"liked"],[121,41,102,28],[121,42,102,29],[121,43,102,30],[122,6,103,4,"queryFn"],[122,13,103,11],[122,15,103,13],[122,24,103,4,"queryFn"],[122,31,103,11,"queryFn"],[122,32,103,11],[123,8,103,11],[123,15,103,19,"fetchLikedListings"],[123,33,103,37],[123,34,103,38,"user"],[123,38,103,42],[123,39,103,44,"id"],[123,41,103,46],[123,42,103,47],[124,6,103,47],[125,6,104,4,"enabled"],[125,13,104,11],[125,15,104,13],[125,16,104,14],[125,17,104,15,"user"],[126,4,105,2],[126,5,105,3],[126,6,105,4],[127,2,106,0],[127,3,106,1],[128,2,106,2,"_s"],[128,4,106,2],[128,5,98,6,"useLikedListings"],[128,21,98,22],[129,4,98,22],[129,12,99,19,"useAuth"],[129,32,99,26],[129,33,99,26,"useAuth"],[129,40,99,26],[129,42,101,9,"useQuery"],[129,61,101,17],[129,62,101,17,"useQuery"],[129,70,101,17],[130,2,101,17],[131,2,108,0],[131,6,108,0,"_default"],[131,14,108,0],[131,17,108,15,"useLikedListings"],[131,33,108,31],[132,0,108,32],[132,3]],"functionMap":{"names":["<global>","fetchLikedListings","swipes.map$argument_0","likedIds.map$argument_0","likedIds.map.filter$argument_0","useLikedListings","useQuery$argument_0.queryFn"],"mappings":"AAA;kCCU;8BCY,mBD;SEiE,0BF;YGC,gDH;CDC;yBKQ;aCK,kCD;CLG"},"hasCjsExports":false},"type":"js/module"}]}