{"dependencies":[{"name":"@babel/runtime/helpers/toConsumableArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kiCFfIx1MWoD4noR0gEoyrFAUKE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":42,"index":92}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":49,"index":142}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}},{"name":"../../queryKeys","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":143},"end":{"line":4,"column":43,"index":186}}],"key":"9dB6801Llb9DiWHOk43CNQJdoj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"fetchConversations\", {\n    enumerable: true,\n    get: function () {\n      return fetchConversations;\n    }\n  });\n  var _babelRuntimeHelpersToConsumableArray = require(_dependencyMap[0], \"@babel/runtime/helpers/toConsumableArray\");\n  var _toConsumableArray = _interopDefault(_babelRuntimeHelpersToConsumableArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[2], \"@tanstack/react-query\");\n  var _libSupabase = require(_dependencyMap[3], \"@/lib/supabase\");\n  var _contextAuthProvider = require(_dependencyMap[4], \"@/context/AuthProvider\");\n  var _queryKeys = require(_dependencyMap[5], \"../../queryKeys\");\n  /**\n   * Fetches all conversations for a given user, sorted by most recent message.\n   *\n   * Batch-fetches profiles, last messages, and unread counts in bulk queries\n   * instead of N+1 loops. Filters out conversations with blocked users.\n   */\n  var fetchConversations = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (userId) {\n      // 1. Get conversations with match data, listing info, and negotiation status\n      var _yield$supabase$from$ = yield _libSupabase.supabase.from('conversations').select(`\n      id,\n      match_id,\n      negotiation_status,\n      matches!inner (\n        id,\n        user_a_id,\n        user_b_id,\n        listing_id,\n        listings!inner (\n          id,\n          title,\n          type,\n          tcg,\n          listing_items (\n            card_image_url\n          )\n        )\n      )\n    `).or(`user_a_id.eq.${userId},user_b_id.eq.${userId}`, {\n          referencedTable: 'matches'\n        }),\n        conversations = _yield$supabase$from$.data,\n        error = _yield$supabase$from$.error;\n      if (error) throw error;\n      if (!conversations || conversations.length === 0) return [];\n\n      // 2. Collect other user IDs and conversation IDs\n      var otherUserIds = [];\n      var convIds = [];\n      for (var conv of conversations) {\n        var match = conv.matches;\n        var otherId = match.user_a_id === userId ? match.user_b_id : match.user_a_id;\n        otherUserIds.push(otherId);\n        convIds.push(conv.id);\n      }\n\n      // 3. Fetch blocked user IDs (both directions)\n      var _yield$supabase$from$2 = yield _libSupabase.supabase.from('blocks').select('blocked_id').eq('blocker_id', userId),\n        blocksAsBlocker = _yield$supabase$from$2.data;\n      var _yield$supabase$from$3 = yield _libSupabase.supabase.from('blocks').select('blocker_id').eq('blocked_id', userId),\n        blocksAsBlocked = _yield$supabase$from$3.data;\n      var blockedIds = new Set([].concat((0, _toConsumableArray.default)((blocksAsBlocker != null ? blocksAsBlocker : []).map(function (b) {\n        return b.blocked_id;\n      })), (0, _toConsumableArray.default)((blocksAsBlocked != null ? blocksAsBlocked : []).map(function (b) {\n        return b.blocker_id;\n      }))));\n\n      // 4. Batch fetch profiles for all other users\n      var uniqueOtherIds = (0, _toConsumableArray.default)(new Set(otherUserIds));\n      var _yield$supabase$from$4 = yield _libSupabase.supabase.from('users').select('id, display_name, avatar_url, rating_score').in('id', uniqueOtherIds),\n        profiles = _yield$supabase$from$4.data;\n      var profileMap = new Map((profiles != null ? profiles : []).map(function (p) {\n        return [p.id, p];\n      }));\n\n      // 5. Batch fetch last messages â€” one query, most recent per conversation\n      var _yield$supabase$from$5 = yield _libSupabase.supabase.from('messages').select('conversation_id, body, type, created_at').in('conversation_id', convIds).order('created_at', {\n          ascending: false\n        }),\n        recentMessages = _yield$supabase$from$5.data;\n\n      // Deduplicate to most recent per conversation\n      var lastMessageMap = new Map();\n      for (var msg of recentMessages != null ? recentMessages : []) {\n        if (!lastMessageMap.has(msg.conversation_id)) {\n          lastMessageMap.set(msg.conversation_id, {\n            body: msg.body,\n            type: msg.type,\n            created_at: msg.created_at\n          });\n        }\n      }\n\n      // 6. Get real unread counts via RPC\n      var _yield$supabase$rpc = yield _libSupabase.supabase.rpc('get_unread_counts', {\n          p_user_id: userId\n        }),\n        unreadData = _yield$supabase$rpc.data;\n      var unreadMap = new Map((unreadData != null ? unreadData : []).map(function (r) {\n        return [r.conversation_id, r.unread_count];\n      }));\n\n      // 6b. Bulk-fetch nicknames for current user\n      var _yield$supabase$from$6 = yield _libSupabase.supabase.from('conversation_nicknames').select('conversation_id, nickname').eq('user_id', userId).in('conversation_id', convIds),\n        nicknameData = _yield$supabase$from$6.data;\n      var nicknameMap = new Map((nicknameData != null ? nicknameData : []).map(function (n) {\n        return [n.conversation_id, n.nickname];\n      }));\n\n      // 7. Build results, filtering blocked users\n      var results = [];\n      for (var _conv of conversations) {\n        var _match$listings$listi, _profile$id, _profile$display_name, _profile$avatar_url, _profile$rating_score, _unreadMap$get, _nicknameMap$get;\n        var _match = _conv.matches;\n        var _otherId = _match.user_a_id === userId ? _match.user_b_id : _match.user_a_id;\n\n        // Filter blocked users\n        if (blockedIds.has(_otherId)) continue;\n        var profile = profileMap.get(_otherId);\n        var lastMsg = lastMessageMap.get(_conv.id);\n\n        // Get first 2 card thumbnails from listing items\n        var listingThumbnails = ((_match$listings$listi = _match.listings.listing_items) != null ? _match$listings$listi : []).slice(0, 2).map(function (li) {\n          return li.card_image_url;\n        });\n        results.push({\n          conversationId: _conv.id,\n          matchId: _match.id,\n          otherUser: {\n            id: (_profile$id = profile == null ? void 0 : profile.id) != null ? _profile$id : _otherId,\n            name: (_profile$display_name = profile == null ? void 0 : profile.display_name) != null ? _profile$display_name : 'Unknown',\n            avatar: (_profile$avatar_url = profile == null ? void 0 : profile.avatar_url) != null ? _profile$avatar_url : null,\n            rating: (_profile$rating_score = profile == null ? void 0 : profile.rating_score) != null ? _profile$rating_score : 0\n          },\n          lastMessage: lastMsg ? {\n            body: lastMsg.body,\n            type: lastMsg.type,\n            createdAt: lastMsg.created_at\n          } : null,\n          unreadCount: (_unreadMap$get = unreadMap.get(_conv.id)) != null ? _unreadMap$get : 0,\n          negotiationStatus: _conv.negotiation_status,\n          listingTitle: _match.listings.title,\n          listingThumbnails: listingThumbnails,\n          nickname: (_nicknameMap$get = nicknameMap.get(_conv.id)) != null ? _nicknameMap$get : null\n        });\n      }\n\n      // Sort by last message date descending (newest first)\n      results.sort(function (a, b) {\n        var _a$lastMessage$create, _a$lastMessage, _b$lastMessage$create, _b$lastMessage;\n        var dateA = (_a$lastMessage$create = (_a$lastMessage = a.lastMessage) == null ? void 0 : _a$lastMessage.createdAt) != null ? _a$lastMessage$create : '';\n        var dateB = (_b$lastMessage$create = (_b$lastMessage = b.lastMessage) == null ? void 0 : _b$lastMessage.createdAt) != null ? _b$lastMessage$create : '';\n        return dateB.localeCompare(dateA);\n      });\n      return results;\n    });\n    return function fetchConversations(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\n   * Hook that fetches all conversations for the current user.\n   */\n  var useConversations = function useConversations() {\n    _s();\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: _queryKeys.chatKeys.conversations(),\n      queryFn: function queryFn() {\n        return fetchConversations(user.id);\n      },\n      enabled: !!user\n    });\n  };\n  _s(useConversations, \"feBfegY2LWvVkHAo3/+H6/HJ9O4=\", false, function () {\n    return [_contextAuthProvider.useAuth, _tanstackReactQuery.useQuery];\n  });\n  var _default = useConversations;\n});","lineCount":203,"map":[[13,2,243,0,"Object"],[13,8,243,0],[13,9,243,0,"defineProperty"],[13,23,243,0],[13,24,243,0,"exports"],[13,31,243,0],[14,4,243,0,"enumerable"],[14,14,243,0],[15,4,243,0,"get"],[15,7,243,0],[15,18,243,0,"get"],[15,19,243,0],[16,6,243,0],[16,13,243,0,"_default"],[16,21,243,0],[17,4,243,0],[18,2,243,0],[19,2,34,0,"Object"],[19,8,34,0],[19,9,34,0,"defineProperty"],[19,23,34,0],[19,24,34,0,"exports"],[19,31,34,0],[20,4,34,0,"enumerable"],[20,14,34,0],[21,4,34,0,"get"],[21,7,34,0],[21,18,34,0,"get"],[21,19,34,0],[22,6,34,0],[22,13,34,0,"fetchConversations"],[22,31,34,0],[23,4,34,0],[24,2,34,0],[25,2,228,2],[25,6,228,2,"_babelRuntimeHelpersToConsumableArray"],[25,43,228,2],[25,46,228,2,"require"],[25,53,228,2],[25,54,228,2,"_dependencyMap"],[25,68,228,2],[26,2,228,2],[26,6,228,2,"_toConsumableArray"],[26,24,228,2],[26,27,228,2,"_interopDefault"],[26,42,228,2],[26,43,228,2,"_babelRuntimeHelpersToConsumableArray"],[26,80,228,2],[27,2,228,2],[27,6,228,2,"_babelRuntimeHelpersAsyncToGenerator"],[27,42,228,2],[27,45,228,2,"require"],[27,52,228,2],[27,53,228,2,"_dependencyMap"],[27,67,228,2],[28,2,228,2],[28,6,228,2,"_asyncToGenerator"],[28,23,228,2],[28,26,228,2,"_interopDefault"],[28,41,228,2],[28,42,228,2,"_babelRuntimeHelpersAsyncToGenerator"],[28,78,228,2],[29,2,1,0],[29,6,1,0,"_tanstackReactQuery"],[29,25,1,0],[29,28,1,0,"require"],[29,35,1,0],[29,36,1,0,"_dependencyMap"],[29,50,1,0],[30,2,2,0],[30,6,2,0,"_libSupabase"],[30,18,2,0],[30,21,2,0,"require"],[30,28,2,0],[30,29,2,0,"_dependencyMap"],[30,43,2,0],[31,2,3,0],[31,6,3,0,"_contextAuthProvider"],[31,26,3,0],[31,29,3,0,"require"],[31,36,3,0],[31,37,3,0,"_dependencyMap"],[31,51,3,0],[32,2,4,0],[32,6,4,0,"_queryKeys"],[32,16,4,0],[32,19,4,0,"require"],[32,26,4,0],[32,27,4,0,"_dependencyMap"],[32,41,4,0],[33,2,28,0],[34,0,29,0],[35,0,30,0],[36,0,31,0],[37,0,32,0],[38,0,33,0],[39,2,34,7],[39,6,34,13,"fetchConversations"],[39,24,34,31],[40,4,34,31],[40,8,34,31,"_ref"],[40,12,34,31],[40,19,34,31,"_asyncToGenerator"],[40,36,34,31],[40,37,34,31,"default"],[40,44,34,31],[40,46,34,34],[40,57,34,41,"userId"],[40,63,34,55],[40,65,34,92],[41,6,35,2],[42,6,36,2],[42,10,36,2,"_yield$supabase$from$"],[42,31,36,2],[42,40,36,47,"supabase"],[42,52,36,55],[42,53,36,55,"supabase"],[42,61,36,55],[42,62,37,5,"from"],[42,66,37,9],[42,67,37,10],[42,82,37,25],[42,83,37,26],[42,84,38,5,"select"],[42,90,38,11],[42,91,39,6],[43,0,40,0],[44,0,41,0],[45,0,42,0],[46,0,43,0],[47,0,44,0],[48,0,45,0],[49,0,46,0],[50,0,47,0],[51,0,48,0],[52,0,49,0],[53,0,50,0],[54,0,51,0],[55,0,52,0],[56,0,53,0],[57,0,54,0],[58,0,55,0],[59,0,56,0],[60,0,57,0],[61,0,58,0],[61,5,59,4],[61,6,59,5],[61,7,60,5,"or"],[61,9,60,7],[61,10,61,6],[61,26,61,22,"userId"],[61,32,61,28],[61,49,61,45,"userId"],[61,55,61,51],[61,57,61,53],[61,59,62,6],[62,10,62,8,"referencedTable"],[62,25,62,23],[62,27,62,25],[63,8,62,35],[63,9,63,4],[63,10,63,5],[64,8,36,16,"conversations"],[64,21,36,29],[64,24,36,29,"_yield$supabase$from$"],[64,45,36,29],[64,46,36,10,"data"],[64,50,36,14],[65,8,36,31,"error"],[65,13,36,36],[65,16,36,36,"_yield$supabase$from$"],[65,37,36,36],[65,38,36,31,"error"],[65,43,36,36],[66,6,65,2],[66,10,65,6,"error"],[66,15,65,11],[66,17,65,13],[66,23,65,19,"error"],[66,28,65,24],[67,6,66,2],[67,10,66,6],[67,11,66,7,"conversations"],[67,24,66,20],[67,28,66,24,"conversations"],[67,41,66,37],[67,42,66,38,"length"],[67,48,66,44],[67,53,66,49],[67,54,66,50],[67,56,66,52],[67,63,66,59],[67,65,66,61],[69,6,68,2],[70,6,69,2],[70,10,69,8,"otherUserIds"],[70,22,69,30],[70,25,69,33],[70,27,69,35],[71,6,70,2],[71,10,70,8,"convIds"],[71,17,70,25],[71,20,70,28],[71,22,70,30],[72,6,72,2],[72,11,72,7],[72,15,72,13,"conv"],[72,19,72,17],[72,23,72,21,"conversations"],[72,36,72,34],[72,38,72,36],[73,8,73,4],[73,12,73,10,"match"],[73,17,73,15],[73,20,73,18,"conv"],[73,24,73,22],[73,25,73,23,"matches"],[73,32,85,5],[74,8,86,4],[74,12,86,10,"otherId"],[74,19,86,17],[74,22,87,6,"match"],[74,27,87,11],[74,28,87,12,"user_a_id"],[74,37,87,21],[74,42,87,26,"userId"],[74,48,87,32],[74,51,87,35,"match"],[74,56,87,40],[74,57,87,41,"user_b_id"],[74,66,87,50],[74,69,87,53,"match"],[74,74,87,58],[74,75,87,59,"user_a_id"],[74,84,87,68],[75,8,88,4,"otherUserIds"],[75,20,88,16],[75,21,88,17,"push"],[75,25,88,21],[75,26,88,22,"otherId"],[75,33,88,29],[75,34,88,30],[76,8,89,4,"convIds"],[76,15,89,11],[76,16,89,12,"push"],[76,20,89,16],[76,21,89,17,"conv"],[76,25,89,21],[76,26,89,22,"id"],[76,28,89,24],[76,29,89,25],[77,6,90,2],[79,6,92,2],[80,6,93,2],[80,10,93,2,"_yield$supabase$from$2"],[80,32,93,2],[80,41,93,42,"supabase"],[80,53,93,50],[80,54,93,50,"supabase"],[80,62,93,50],[80,63,94,5,"from"],[80,67,94,9],[80,68,94,10],[80,76,94,18],[80,77,94,19],[80,78,95,5,"select"],[80,84,95,11],[80,85,95,12],[80,97,95,24],[80,98,95,25],[80,99,96,5,"eq"],[80,101,96,7],[80,102,96,8],[80,114,96,20],[80,116,96,22,"userId"],[80,122,96,28],[80,123,96,29],[81,8,93,16,"blocksAsBlocker"],[81,23,93,31],[81,26,93,31,"_yield$supabase$from$2"],[81,48,93,31],[81,49,93,10,"data"],[81,53,93,14],[82,6,98,2],[82,10,98,2,"_yield$supabase$from$3"],[82,32,98,2],[82,41,98,42,"supabase"],[82,53,98,50],[82,54,98,50,"supabase"],[82,62,98,50],[82,63,99,5,"from"],[82,67,99,9],[82,68,99,10],[82,76,99,18],[82,77,99,19],[82,78,100,5,"select"],[82,84,100,11],[82,85,100,12],[82,97,100,24],[82,98,100,25],[82,99,101,5,"eq"],[82,101,101,7],[82,102,101,8],[82,114,101,20],[82,116,101,22,"userId"],[82,122,101,28],[82,123,101,29],[83,8,98,16,"blocksAsBlocked"],[83,23,98,31],[83,26,98,31,"_yield$supabase$from$3"],[83,48,98,31],[83,49,98,10,"data"],[83,53,98,14],[84,6,103,2],[84,10,103,8,"blockedIds"],[84,20,103,18],[84,23,103,21],[84,27,103,25,"Set"],[84,30,103,28],[84,34,103,28,"concat"],[84,40,103,28],[84,45,103,28,"_toConsumableArray"],[84,63,103,28],[84,64,103,28,"default"],[84,71,103,28],[84,73,104,7],[84,74,104,8,"blocksAsBlocker"],[84,89,104,23],[84,100,104,8,"blocksAsBlocker"],[84,115,104,23],[84,118,104,27],[84,120,104,29],[84,122,104,31,"map"],[84,125,104,34],[84,126,104,35],[84,136,104,36,"b"],[84,137,104,37],[85,8,104,37],[85,15,104,42,"b"],[85,16,104,43],[85,17,104,44,"blocked_id"],[85,27,104,54],[86,6,104,54],[86,8,104,55],[86,15,104,55,"_toConsumableArray"],[86,33,104,55],[86,34,104,55,"default"],[86,41,104,55],[86,43,105,7],[86,44,105,8,"blocksAsBlocked"],[86,59,105,23],[86,70,105,8,"blocksAsBlocked"],[86,85,105,23],[86,88,105,27],[86,90,105,29],[86,92,105,31,"map"],[86,95,105,34],[86,96,105,35],[86,106,105,36,"b"],[86,107,105,37],[87,8,105,37],[87,15,105,42,"b"],[87,16,105,43],[87,17,105,44,"blocker_id"],[87,27,105,54],[88,6,105,54],[88,8,105,55],[88,10,106,3],[88,11,106,4],[90,6,108,2],[91,6,109,2],[91,10,109,8,"uniqueOtherIds"],[91,24,109,22],[91,31,109,22,"_toConsumableArray"],[91,49,109,22],[91,50,109,22,"default"],[91,57,109,22],[91,59,109,29],[91,63,109,33,"Set"],[91,66,109,36],[91,67,109,37,"otherUserIds"],[91,79,109,49],[91,80,109,50],[91,81,109,51],[92,6,110,2],[92,10,110,2,"_yield$supabase$from$4"],[92,32,110,2],[92,41,110,35,"supabase"],[92,53,110,43],[92,54,110,43,"supabase"],[92,62,110,43],[92,63,111,5,"from"],[92,67,111,9],[92,68,111,10],[92,75,111,17],[92,76,111,18],[92,77,112,5,"select"],[92,83,112,11],[92,84,112,12],[92,128,112,56],[92,129,112,57],[92,130,113,5,"in"],[92,132,113,7],[92,133,113,8],[92,137,113,12],[92,139,113,14,"uniqueOtherIds"],[92,153,113,28],[92,154,113,29],[93,8,110,16,"profiles"],[93,16,110,24],[93,19,110,24,"_yield$supabase$from$4"],[93,41,110,24],[93,42,110,10,"data"],[93,46,110,14],[94,6,115,2],[94,10,115,8,"profileMap"],[94,20,115,18],[94,23,115,21],[94,27,115,25,"Map"],[94,30,115,28],[94,31,116,4],[94,32,116,5,"profiles"],[94,40,116,13],[94,51,116,5,"profiles"],[94,59,116,13],[94,62,116,17],[94,64,116,19],[94,66,116,21,"map"],[94,69,116,24],[94,70,116,25],[94,80,116,26,"p"],[94,81,116,27],[95,8,116,27],[95,15,116,32],[95,16,116,33,"p"],[95,17,116,34],[95,18,116,35,"id"],[95,20,116,37],[95,22,116,39,"p"],[95,23,116,40],[95,24,116,41],[96,6,116,41],[96,8,117,2],[96,9,117,3],[98,6,119,2],[99,6,120,2],[99,10,120,2,"_yield$supabase$from$5"],[99,32,120,2],[99,41,120,41,"supabase"],[99,53,120,49],[99,54,120,49,"supabase"],[99,62,120,49],[99,63,121,5,"from"],[99,67,121,9],[99,68,121,10],[99,78,121,20],[99,79,121,21],[99,80,122,5,"select"],[99,86,122,11],[99,87,122,12],[99,128,122,53],[99,129,122,54],[99,130,123,5,"in"],[99,132,123,7],[99,133,123,8],[99,150,123,25],[99,152,123,27,"convIds"],[99,159,123,34],[99,160,123,35],[99,161,124,5,"order"],[99,166,124,10],[99,167,124,11],[99,179,124,23],[99,181,124,25],[100,10,124,27,"ascending"],[100,19,124,36],[100,21,124,38],[101,8,124,44],[101,9,124,45],[101,10,124,46],[102,8,120,16,"recentMessages"],[102,22,120,30],[102,25,120,30,"_yield$supabase$from$5"],[102,47,120,30],[102,48,120,10,"data"],[102,52,120,14],[104,6,126,2],[105,6,127,2],[105,10,127,8,"lastMessageMap"],[105,24,127,22],[105,27,127,25],[105,31,127,29,"Map"],[105,34,127,32],[105,35,130,4],[105,36,130,5],[106,6,131,2],[106,11,131,7],[106,15,131,13,"msg"],[106,18,131,16],[106,22,131,20,"recentMessages"],[106,36,131,34],[106,47,131,20,"recentMessages"],[106,61,131,34],[106,64,131,38],[106,66,131,40],[106,68,131,42],[107,8,132,4],[107,12,132,8],[107,13,132,9,"lastMessageMap"],[107,27,132,23],[107,28,132,24,"has"],[107,31,132,27],[107,32,132,28,"msg"],[107,35,132,31],[107,36,132,32,"conversation_id"],[107,51,132,47],[107,52,132,48],[107,54,132,50],[108,10,133,6,"lastMessageMap"],[108,24,133,20],[108,25,133,21,"set"],[108,28,133,24],[108,29,133,25,"msg"],[108,32,133,28],[108,33,133,29,"conversation_id"],[108,48,133,44],[108,50,133,46],[109,12,134,8,"body"],[109,16,134,12],[109,18,134,14,"msg"],[109,21,134,17],[109,22,134,18,"body"],[109,26,134,22],[110,12,135,8,"type"],[110,16,135,12],[110,18,135,14,"msg"],[110,21,135,17],[110,22,135,18,"type"],[110,26,135,37],[111,12,136,8,"created_at"],[111,22,136,18],[111,24,136,20,"msg"],[111,27,136,23],[111,28,136,24,"created_at"],[112,10,137,6],[112,11,137,7],[112,12,137,8],[113,8,138,4],[114,6,139,2],[116,6,141,2],[117,6,142,2],[117,10,142,2,"_yield$supabase$rpc"],[117,29,142,2],[117,38,142,37,"supabase"],[117,50,142,45],[117,51,142,45,"supabase"],[117,59,142,45],[117,60,142,46,"rpc"],[117,63,142,49],[117,64,142,50],[117,83,142,69],[117,85,142,71],[118,10,143,4,"p_user_id"],[118,19,143,13],[118,21,143,15,"userId"],[119,8,144,2],[119,9,144,3],[119,10,144,4],[120,8,142,16,"unreadData"],[120,18,142,26],[120,21,142,26,"_yield$supabase$rpc"],[120,40,142,26],[120,41,142,10,"data"],[120,45,142,14],[121,6,146,2],[121,10,146,8,"unreadMap"],[121,19,146,17],[121,22,146,20],[121,26,146,24,"Map"],[121,29,146,27],[121,30,147,4],[121,31,147,5,"unreadData"],[121,41,147,15],[121,52,147,5,"unreadData"],[121,62,147,15],[121,65,147,19],[121,67,147,21],[121,69,147,23,"map"],[121,72,147,26],[121,73,147,27],[121,83,147,28,"r"],[121,84,147,80],[122,8,147,80],[122,15,147,85],[122,16,148,6,"r"],[122,17,148,7],[122,18,148,8,"conversation_id"],[122,33,148,23],[122,35,149,6,"r"],[122,36,149,7],[122,37,149,8,"unread_count"],[122,49,149,20],[122,50,150,5],[123,6,150,5],[123,8,151,2],[123,9,151,3],[125,6,153,2],[126,6,154,2],[126,10,154,2,"_yield$supabase$from$6"],[126,32,154,2],[126,41,154,39,"supabase"],[126,53,154,47],[126,54,154,47,"supabase"],[126,62,154,47],[126,63,155,5,"from"],[126,67,155,9],[126,68,155,10],[126,92,155,34],[126,93,155,35],[126,94,156,5,"select"],[126,100,156,11],[126,101,156,12],[126,128,156,39],[126,129,156,40],[126,130,157,5,"eq"],[126,132,157,7],[126,133,157,8],[126,142,157,17],[126,144,157,19,"userId"],[126,150,157,25],[126,151,157,26],[126,152,158,5,"in"],[126,154,158,7],[126,155,158,8],[126,172,158,25],[126,174,158,27,"convIds"],[126,181,158,34],[126,182,158,35],[127,8,154,16,"nicknameData"],[127,20,154,28],[127,23,154,28,"_yield$supabase$from$6"],[127,45,154,28],[127,46,154,10,"data"],[127,50,154,14],[128,6,160,2],[128,10,160,8,"nicknameMap"],[128,21,160,19],[128,24,160,22],[128,28,160,26,"Map"],[128,31,160,29],[128,32,161,4],[128,33,161,5,"nicknameData"],[128,45,161,17],[128,56,161,5,"nicknameData"],[128,68,161,17],[128,71,161,21],[128,73,161,23],[128,75,161,25,"map"],[128,78,161,28],[128,79,161,29],[128,89,161,30,"n"],[128,90,161,31],[129,8,161,31],[129,15,161,36],[129,16,161,37,"n"],[129,17,161,38],[129,18,161,39,"conversation_id"],[129,33,161,54],[129,35,161,56,"n"],[129,36,161,57],[129,37,161,58,"nickname"],[129,45,161,66],[129,46,161,67],[130,6,161,67],[130,8,162,2],[130,9,162,3],[132,6,164,2],[133,6,165,2],[133,10,165,8,"results"],[133,17,165,38],[133,20,165,41],[133,22,165,43],[134,6,167,2],[134,11,167,7],[134,15,167,13,"conv"],[134,20,167,17],[134,24,167,21,"conversations"],[134,37,167,34],[134,39,167,36],[135,8,167,36],[135,12,167,36,"_match$listings$listi"],[135,33,167,36],[135,35,167,36,"_profile$id"],[135,46,167,36],[135,48,167,36,"_profile$display_name"],[135,69,167,36],[135,71,167,36,"_profile$avatar_url"],[135,90,167,36],[135,92,167,36,"_profile$rating_score"],[135,113,167,36],[135,115,167,36,"_unreadMap$get"],[135,129,167,36],[135,131,167,36,"_nicknameMap$get"],[135,147,167,36],[136,8,168,4],[136,12,168,10,"match"],[136,18,168,15],[136,21,168,18,"conv"],[136,26,168,22],[136,27,168,23,"matches"],[136,34,180,5],[137,8,182,4],[137,12,182,10,"otherId"],[137,20,182,17],[137,23,183,6,"match"],[137,29,183,11],[137,30,183,12,"user_a_id"],[137,39,183,21],[137,44,183,26,"userId"],[137,50,183,32],[137,53,183,35,"match"],[137,59,183,40],[137,60,183,41,"user_b_id"],[137,69,183,50],[137,72,183,53,"match"],[137,78,183,58],[137,79,183,59,"user_a_id"],[137,88,183,68],[139,8,185,4],[140,8,186,4],[140,12,186,8,"blockedIds"],[140,22,186,18],[140,23,186,19,"has"],[140,26,186,22],[140,27,186,23,"otherId"],[140,35,186,30],[140,36,186,31],[140,38,186,33],[141,8,188,4],[141,12,188,10,"profile"],[141,19,188,17],[141,22,188,20,"profileMap"],[141,32,188,30],[141,33,188,31,"get"],[141,36,188,34],[141,37,188,35,"otherId"],[141,45,188,42],[141,46,188,43],[142,8,189,4],[142,12,189,10,"lastMsg"],[142,19,189,17],[142,22,189,20,"lastMessageMap"],[142,36,189,34],[142,37,189,35,"get"],[142,40,189,38],[142,41,189,39,"conv"],[142,46,189,43],[142,47,189,44,"id"],[142,49,189,46],[142,50,189,47],[144,8,191,4],[145,8,192,4],[145,12,192,10,"listingThumbnails"],[145,29,192,27],[145,32,192,30],[145,34,192,30,"_match$listings$listi"],[145,55,192,30],[145,58,192,31,"match"],[145,64,192,36],[145,65,192,37,"listings"],[145,73,192,45],[145,74,192,46,"listing_items"],[145,87,192,59],[145,99,192,59,"_match$listings$listi"],[145,120,192,59],[145,123,192,63],[145,125,192,65],[145,127,193,7,"slice"],[145,132,193,12],[145,133,193,13],[145,134,193,14],[145,136,193,16],[145,137,193,17],[145,138,193,18],[145,139,194,7,"map"],[145,142,194,10],[145,143,194,11],[145,153,194,12,"li"],[145,155,194,14],[146,10,194,14],[146,17,194,19,"li"],[146,19,194,21],[146,20,194,22,"card_image_url"],[146,34,194,36],[147,8,194,36],[147,10,194,37],[148,8,196,4,"results"],[148,15,196,11],[148,16,196,12,"push"],[148,20,196,16],[148,21,196,17],[149,10,197,6,"conversationId"],[149,24,197,20],[149,26,197,22,"conv"],[149,31,197,26],[149,32,197,27,"id"],[149,34,197,29],[150,10,198,6,"matchId"],[150,17,198,13],[150,19,198,15,"match"],[150,25,198,20],[150,26,198,21,"id"],[150,28,198,23],[151,10,199,6,"otherUser"],[151,19,199,15],[151,21,199,17],[152,12,200,8,"id"],[152,14,200,10],[152,17,200,10,"_profile$id"],[152,28,200,10],[152,31,200,12,"profile"],[152,38,200,19],[152,58,200,12,"profile"],[152,65,200,19],[152,66,200,21,"id"],[152,68,200,23],[152,80,200,23,"_profile$id"],[152,91,200,23],[152,94,200,27,"otherId"],[152,102,200,34],[153,12,201,8,"name"],[153,16,201,12],[153,19,201,12,"_profile$display_name"],[153,40,201,12],[153,43,201,14,"profile"],[153,50,201,21],[153,70,201,14,"profile"],[153,77,201,21],[153,78,201,23,"display_name"],[153,90,201,35],[153,102,201,35,"_profile$display_name"],[153,123,201,35],[153,126,201,39],[153,135,201,48],[154,12,202,8,"avatar"],[154,18,202,14],[154,21,202,14,"_profile$avatar_url"],[154,40,202,14],[154,43,202,16,"profile"],[154,50,202,23],[154,70,202,16,"profile"],[154,77,202,23],[154,78,202,25,"avatar_url"],[154,88,202,35],[154,100,202,35,"_profile$avatar_url"],[154,119,202,35],[154,122,202,39],[154,126,202,43],[155,12,203,8,"rating"],[155,18,203,14],[155,21,203,14,"_profile$rating_score"],[155,42,203,14],[155,45,203,16,"profile"],[155,52,203,23],[155,72,203,16,"profile"],[155,79,203,23],[155,80,203,25,"rating_score"],[155,92,203,37],[155,104,203,37,"_profile$rating_score"],[155,125,203,37],[155,128,203,41],[156,10,204,6],[156,11,204,7],[157,10,205,6,"lastMessage"],[157,21,205,17],[157,23,205,19,"lastMsg"],[157,30,205,26],[157,33,206,10],[158,12,207,12,"body"],[158,16,207,16],[158,18,207,18,"lastMsg"],[158,25,207,25],[158,26,207,26,"body"],[158,30,207,30],[159,12,208,12,"type"],[159,16,208,16],[159,18,208,18,"lastMsg"],[159,25,208,25],[159,26,208,26,"type"],[159,30,208,30],[160,12,209,12,"createdAt"],[160,21,209,21],[160,23,209,23,"lastMsg"],[160,30,209,30],[160,31,209,31,"created_at"],[161,10,210,10],[161,11,210,11],[161,14,211,10],[161,18,211,14],[162,10,212,6,"unreadCount"],[162,21,212,17],[162,24,212,17,"_unreadMap$get"],[162,38,212,17],[162,41,212,19,"unreadMap"],[162,50,212,28],[162,51,212,29,"get"],[162,54,212,32],[162,55,212,33,"conv"],[162,60,212,37],[162,61,212,38,"id"],[162,63,212,40],[162,64,212,41],[162,76,212,41,"_unreadMap$get"],[162,90,212,41],[162,93,212,45],[162,94,212,46],[163,10,213,6,"negotiationStatus"],[163,27,213,23],[163,29,213,25,"conv"],[163,34,213,29],[163,35,213,30,"negotiation_status"],[163,53,213,69],[164,10,214,6,"listingTitle"],[164,22,214,18],[164,24,214,20,"match"],[164,30,214,25],[164,31,214,26,"listings"],[164,39,214,34],[164,40,214,35,"title"],[164,45,214,40],[165,10,215,6,"listingThumbnails"],[165,27,215,23],[165,29,215,6,"listingThumbnails"],[165,46,215,23],[166,10,216,6,"nickname"],[166,18,216,14],[166,21,216,14,"_nicknameMap$get"],[166,37,216,14],[166,40,216,16,"nicknameMap"],[166,51,216,27],[166,52,216,28,"get"],[166,55,216,31],[166,56,216,32,"conv"],[166,61,216,36],[166,62,216,37,"id"],[166,64,216,39],[166,65,216,40],[166,77,216,40,"_nicknameMap$get"],[166,93,216,40],[166,96,216,44],[167,8,217,4],[167,9,217,5],[167,10,217,6],[168,6,218,2],[170,6,220,2],[171,6,221,2,"results"],[171,13,221,9],[171,14,221,10,"sort"],[171,18,221,14],[171,19,221,15],[171,29,221,16,"a"],[171,30,221,17],[171,32,221,19,"b"],[171,33,221,20],[171,35,221,25],[172,8,221,25],[172,12,221,25,"_a$lastMessage$create"],[172,33,221,25],[172,35,221,25,"_a$lastMessage"],[172,49,221,25],[172,51,221,25,"_b$lastMessage$create"],[172,72,221,25],[172,74,221,25,"_b$lastMessage"],[172,88,221,25],[173,8,222,4],[173,12,222,10,"dateA"],[173,17,222,15],[173,21,222,15,"_a$lastMessage$create"],[173,42,222,15],[173,46,222,15,"_a$lastMessage"],[173,60,222,15],[173,63,222,18,"a"],[173,64,222,19],[173,65,222,20,"lastMessage"],[173,76,222,31],[173,97,222,18,"_a$lastMessage"],[173,111,222,18],[173,112,222,33,"createdAt"],[173,121,222,42],[173,133,222,42,"_a$lastMessage$create"],[173,154,222,42],[173,157,222,46],[173,159,222,48],[174,8,223,4],[174,12,223,10,"dateB"],[174,17,223,15],[174,21,223,15,"_b$lastMessage$create"],[174,42,223,15],[174,46,223,15,"_b$lastMessage"],[174,60,223,15],[174,63,223,18,"b"],[174,64,223,19],[174,65,223,20,"lastMessage"],[174,76,223,31],[174,97,223,18,"_b$lastMessage"],[174,111,223,18],[174,112,223,33,"createdAt"],[174,121,223,42],[174,133,223,42,"_b$lastMessage$create"],[174,154,223,42],[174,157,223,46],[174,159,223,48],[175,8,224,4],[175,15,224,11,"dateB"],[175,20,224,16],[175,21,224,17,"localeCompare"],[175,34,224,30],[175,35,224,31,"dateA"],[175,40,224,36],[175,41,224,37],[176,6,225,2],[176,7,225,3],[176,8,225,4],[177,6,227,2],[177,13,227,9,"results"],[177,20,227,16],[178,4,228,0],[178,5,228,1],[179,4,228,1],[179,20,34,13,"fetchConversations"],[179,38,34,31,"fetchConversations"],[179,39,34,31,"_x"],[179,41,34,31],[180,6,34,31],[180,13,34,31,"_ref"],[180,17,34,31],[180,18,34,31,"apply"],[180,23,34,31],[180,30,34,31,"arguments"],[180,39,34,31],[181,4,34,31],[182,2,34,31],[182,5,228,1],[184,2,230,0],[185,0,231,0],[186,0,232,0],[187,2,233,0],[187,6,233,6,"useConversations"],[187,22,233,22],[187,25,233,25],[187,34,233,6,"useConversations"],[187,50,233,22,"useConversations"],[187,51,233,22],[187,53,233,31],[188,4,233,31,"_s"],[188,6,233,31],[189,4,234,2],[189,8,234,2,"_useAuth"],[189,16,234,2],[189,19,234,19],[189,23,234,19,"useAuth"],[189,43,234,26],[189,44,234,26,"useAuth"],[189,51,234,26],[189,53,234,27],[189,54,234,28],[190,6,234,10,"user"],[190,10,234,14],[190,13,234,14,"_useAuth"],[190,21,234,14],[190,22,234,10,"user"],[190,26,234,14],[191,4,236,2],[191,11,236,9],[191,15,236,9,"useQuery"],[191,34,236,17],[191,35,236,17,"useQuery"],[191,43,236,17],[191,45,236,18],[192,6,237,4,"queryKey"],[192,14,237,12],[192,16,237,14,"chatKeys"],[192,26,237,22],[192,27,237,22,"chatKeys"],[192,35,237,22],[192,36,237,23,"conversations"],[192,49,237,36],[192,50,237,37],[192,51,237,38],[193,6,238,4,"queryFn"],[193,13,238,11],[193,15,238,13],[193,24,238,4,"queryFn"],[193,31,238,11,"queryFn"],[193,32,238,11],[194,8,238,11],[194,15,238,19,"fetchConversations"],[194,33,238,37],[194,34,238,38,"user"],[194,38,238,42],[194,39,238,44,"id"],[194,41,238,46],[194,42,238,47],[195,6,238,47],[196,6,239,4,"enabled"],[196,13,239,11],[196,15,239,13],[196,16,239,14],[196,17,239,15,"user"],[197,4,240,2],[197,5,240,3],[197,6,240,4],[198,2,241,0],[198,3,241,1],[199,2,241,2,"_s"],[199,4,241,2],[199,5,233,6,"useConversations"],[199,21,233,22],[200,4,233,22],[200,12,234,19,"useAuth"],[200,32,234,26],[200,33,234,26,"useAuth"],[200,40,234,26],[200,42,236,9,"useQuery"],[200,61,236,17],[200,62,236,17,"useQuery"],[200,70,236,17],[201,2,236,17],[202,2,243,0],[202,6,243,0,"_default"],[202,14,243,0],[202,17,243,15,"useConversations"],[202,33,243,31],[203,0,243,32],[203,3]],"functionMap":{"names":["<global>","fetchConversations","map$argument_0","slice.map$argument_0","results.sort$argument_0","useConversations","useQuery$argument_0.queryFn"],"mappings":"AAA;kCCiC;mCCsE,mBD;mCCC,mBD;yBCW,gBD;2BC+B;KDG;6BCW,sCD;WEiC,yBF;eG2B;GHI;CDG;yBKK;aCK,kCD;CLG"},"hasCjsExports":false},"type":"js/module"}]}