{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@/lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":42,"index":95}}],"key":"KSAjB91cgWz7DQuLWke0G0l9TgA=","exportNames":["*"],"imports":1}},{"name":"@/context/AuthProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":49,"index":145}}],"key":"hnDMt1RwOyVwgo481TGNr6ITBm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _tanstackReactQuery = require(_dependencyMap[1]);\n  var _libSupabase = require(_dependencyMap[2]);\n  var _contextAuthProvider = require(_dependencyMap[3]);\n  /**\n   * Hook that records a swipe action (like/pass) on a listing.\n   *\n   * Inserts directly into the swipes table. On success, invalidates feed queries\n   * so already-swiped listings are excluded.\n   */\n  var useRecordSwipe = () => {\n    var _useAuth = (0, _contextAuthProvider.useAuth)(),\n      user = _useAuth.user;\n    return (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* (_ref) {\n          var listingId = _ref.listingId,\n            direction = _ref.direction;\n          if (!user) throw new Error('Not authenticated');\n          var _yield$supabase$from$ = yield _libSupabase.supabase.from('swipes').insert({\n              user_id: user.id,\n              listing_id: listingId,\n              direction\n            }).select('id').single(),\n            data = _yield$supabase$from$.data,\n            error = _yield$supabase$from$.error;\n          if (error) {\n            console.error('[useRecordSwipe] Error recording swipe:', error);\n            throw error;\n          }\n          console.log(`[useRecordSwipe] Recorded ${direction} on ${listingId}`);\n\n          // Match detection is handled server-side (triggers/functions).\n          // For now, return no match â€” matches are created through offers.\n          return {\n            swipe_id: data.id,\n            match: null\n          };\n        });\n        return function mutationFn(_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }()\n    });\n  };\n  var _default = useRecordSwipe;\n});","lineCount":65,"map":[[12,2,56,0,"Object"],[12,8,56,0],[12,9,56,0,"defineProperty"],[12,23,56,0],[12,24,56,0,"exports"],[12,31,56,0],[13,4,56,0,"enumerable"],[13,14,56,0],[14,4,56,0,"get"],[14,7,56,0],[14,18,56,0,"get"],[14,19,56,0],[15,6,56,0],[15,13,56,0,"_default"],[15,21,56,0],[16,4,56,0],[17,2,56,0],[18,2,56,30],[18,6,56,30,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,56,30],[18,45,56,30,"require"],[18,52,56,30],[18,53,56,30,"_dependencyMap"],[18,67,56,30],[19,2,56,30],[19,6,56,30,"_asyncToGenerator"],[19,23,56,30],[19,26,56,30,"_interopDefault"],[19,41,56,30],[19,42,56,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,56,30],[20,2,1,0],[20,6,1,0,"_tanstackReactQuery"],[20,25,1,0],[20,28,1,0,"require"],[20,35,1,0],[20,36,1,0,"_dependencyMap"],[20,50,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_contextAuthProvider"],[22,26,3,0],[22,29,3,0,"require"],[22,36,3,0],[22,37,3,0,"_dependencyMap"],[22,51,3,0],[23,2,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,2,22,0],[29,6,22,6,"useRecordSwipe"],[29,20,22,20],[29,23,22,23,"useRecordSwipe"],[29,24,22,23],[29,29,22,29],[30,4,23,2],[30,8,23,2,"_useAuth"],[30,16,23,2],[30,19,23,19],[30,23,23,19,"useAuth"],[30,43,23,26],[30,44,23,26,"useAuth"],[30,51,23,26],[30,53,23,27],[30,54,23,28],[31,6,23,10,"user"],[31,10,23,14],[31,13,23,14,"_useAuth"],[31,21,23,14],[31,22,23,10,"user"],[31,26,23,14],[32,4,25,2],[32,11,25,9],[32,15,25,9,"useMutation"],[32,34,25,20],[32,35,25,20,"useMutation"],[32,46,25,20],[32,48,25,67],[33,6,26,4,"mutationFn"],[33,16,26,14],[34,8,26,14],[34,12,26,14,"_ref2"],[34,17,26,14],[34,24,26,14,"_asyncToGenerator"],[34,41,26,14],[34,42,26,14,"default"],[34,49,26,14],[34,51,26,16],[34,62,26,16,"_ref"],[34,66,26,16],[34,68,26,52],[35,10,26,52],[35,14,26,25,"listingId"],[35,23,26,34],[35,26,26,34,"_ref"],[35,30,26,34],[35,31,26,25,"listingId"],[35,40,26,34],[36,12,26,36,"direction"],[36,21,26,45],[36,24,26,45,"_ref"],[36,28,26,45],[36,29,26,36,"direction"],[36,38,26,45],[37,10,27,6],[37,14,27,10],[37,15,27,11,"user"],[37,19,27,15],[37,21,27,17],[37,27,27,23],[37,31,27,27,"Error"],[37,36,27,32],[37,37,27,33],[37,56,27,52],[37,57,27,53],[38,10,29,6],[38,14,29,6,"_yield$supabase$from$"],[38,35,29,6],[38,44,29,36,"supabase"],[38,56,29,44],[38,57,29,44,"supabase"],[38,65,29,44],[38,66,30,9,"from"],[38,70,30,13],[38,71,30,14],[38,79,30,22],[38,80,30,23],[38,81,31,9,"insert"],[38,87,31,15],[38,88,31,16],[39,14,32,10,"user_id"],[39,21,32,17],[39,23,32,19,"user"],[39,27,32,23],[39,28,32,24,"id"],[39,30,32,26],[40,14,33,10,"listing_id"],[40,24,33,20],[40,26,33,22,"listingId"],[40,35,33,31],[41,14,34,10,"direction"],[42,12,35,8],[42,13,35,9],[42,14,35,10],[42,15,36,9,"select"],[42,21,36,15],[42,22,36,16],[42,26,36,20],[42,27,36,21],[42,28,37,9,"single"],[42,34,37,15],[42,35,37,16],[42,36,37,17],[43,12,29,14,"data"],[43,16,29,18],[43,19,29,18,"_yield$supabase$from$"],[43,40,29,18],[43,41,29,14,"data"],[43,45,29,18],[44,12,29,20,"error"],[44,17,29,25],[44,20,29,25,"_yield$supabase$from$"],[44,41,29,25],[44,42,29,20,"error"],[44,47,29,25],[45,10,39,6],[45,14,39,10,"error"],[45,19,39,15],[45,21,39,17],[46,12,40,8,"console"],[46,19,40,15],[46,20,40,16,"error"],[46,25,40,21],[46,26,40,22],[46,67,40,63],[46,69,40,65,"error"],[46,74,40,70],[46,75,40,71],[47,12,41,8],[47,18,41,14,"error"],[47,23,41,19],[48,10,42,6],[49,10,44,6,"console"],[49,17,44,13],[49,18,44,14,"log"],[49,21,44,17],[49,22,44,18],[49,51,44,47,"direction"],[49,60,44,56],[49,67,44,63,"listingId"],[49,76,44,72],[49,78,44,74],[49,79,44,75],[51,10,46,6],[52,10,47,6],[53,10,48,6],[53,17,48,13],[54,12,49,8,"swipe_id"],[54,20,49,16],[54,22,49,18,"data"],[54,26,49,22],[54,27,49,23,"id"],[54,29,49,25],[55,12,50,8,"match"],[55,17,50,13],[55,19,50,15],[56,10,51,6],[56,11,51,7],[57,8,52,4],[57,9,52,5],[58,8,52,5],[58,24,26,4,"mutationFn"],[58,34,26,14,"mutationFn"],[58,35,26,14,"_x"],[58,37,26,14],[59,10,26,14],[59,17,26,14,"_ref2"],[59,22,26,14],[59,23,26,14,"apply"],[59,28,26,14],[59,35,26,14,"arguments"],[59,44,26,14],[60,8,26,14],[61,6,26,14],[62,4,53,2],[62,5,53,3],[62,6,53,4],[63,2,54,0],[63,3,54,1],[64,2,56,0],[64,6,56,0,"_default"],[64,14,56,0],[64,17,56,15,"useRecordSwipe"],[64,31,56,29],[65,0,56,30],[65,3]],"functionMap":{"names":["<global>","useRecordSwipe","useMutation$argument_0.mutationFn"],"mappings":"AAA;uBCqB;gBCI;KD0B;CDE"},"hasCjsExports":false},"type":"js/module"}]}